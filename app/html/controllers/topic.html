<div id="topic" class="wrap">
	<lfg-header></lfg-header>
<lfg-friendlist></lfg-friendlist>
	<div class="welcome">


		<div class="marge">
			<div class="filariane">
				<a ng-if="(topic.topic.status != 'news')" ng-href="{{forumUrl}}">Forum</a>
				<a ng-if="(topic.topic.status == 'news')" ng-href="{{homeUrl}}">Home</a>
				> {{topic.topic.titre}} - <span>Page</span> {{currentPage}}</div>
			<h2 class="sujet">
				<span ng-if="topic.topic.status != 'news'">Sujet :</span>
				<span ng-if="topic.topic.status == 'news'">News :</span>
				{{topic.topic.titre}}
			</h2>

			<a href="" class="btn2 refresh" ng-click="refresh()" >Actualiser</a>
			<a ng-href="{{forumUrl}}" class="toussujet btn2" >Sujets</a>
		</div>
		<div class="clear"></div>
		<lfg-fb-share></lfg-fb-share>
		<a href="" class="read fa fa-twitter"><span>Twitter</span></a>
	</div>

	<div class="page">

		<lfg-pagination id="top" a-page="aPage" current-page="currentPage" max-page="6"></lfg-pagination>

		<div class="block">
			<table class="list-message" border="0">

				<tr ng-repeat="message in topic.messages">
					<td class="msg">
						<table>
							<tr>
								<td class="to-avatar" rowspan="2" valign="top">
									<div class="persos" ng-if="message.user.userGame.length > 0">
										<div ng-repeat="usergame in message.user.userGame | filterAvatar" style="background: url('{{usergame.data5}}')"></div>
										<img src="img/forum/lay-bar.png" alt="" class="lay" ng-if="(message.user.role != 'modo')" />
										<img src="img/forum/lay-bar-modo.png" alt="" class="lay" ng-if="(message.user.role == 'modo')" />
									</div>

								</td>
								<td class="to-info" valign="top">
									<div class="left " ng-class="{'modo':(message.user.role == 'modo')}">
										{{message.user.username}}
									</div>
									<div class="right">
										{{message.created *1000 | date:'yyyy-MM-dd HH:mm'}}
										<a href="" ng-click="delete(message)" ng-if="message.user.id === currentUser.id || currentUser.role == 'modo'" class="delete"><span></span></a>
										<a href="" ng-click="modify(message)" ng-if="message.user.id === currentUser.id || currentUser.role == 'modo'" class="modify"><span></span></a>

									</div>
								</td>
							</tr>
							<tr>
								<td class="to-msg" valign="top">
									<div ta-bind ng-model="message.texte"></div>
									<!--<span ng-bind-html="message.texte | filterHtml "></span>-->
								</td>
							</tr>
							<tr>
								<td class="none"></td>
								<td class="to-sign">
									<span ng-repeat="usergame in message.user.userGame" >
										{{usergame.data1 | translate}} {{usergame.data2}} |
									</span>
									<br/>
									<b>{{message.user.userGame[0].data3}}</b>

								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</div>

		<lfg-pagination id="bottom" a-page="aPage" current-page="currentPage" max-page="6"></lfg-pagination>

	</div>

	<div class="welcome" ng-show="canPost" style="margin-bottom: 20px;">
		<div class="marge">

			<div class="new">
				<h2 ng-if="(mode === modeEdit)">RÃ©pondre</h2>
				<h2 ng-if="(mode === modeModify)">Modifier</h2>
				<form name="myForm" ng-submit="submit()">
					<text-angular class="text-angular" name="texteInput" id="" cols="30" rows="10" ng-model="texte" required  ng-show="currentUser !== null"></text-angular><br />
					<input type="submit" class="btn2" value="POSTER" ng-show="currentUser !== null">

					<a class="btn2 long" ng-href="{{registerUrl}}" translate ng-if="currentUser === null">Register</a>
				</form>
			</div>
		</div>
	</div>
</div>
<lfg-footer></lfg-footer>