<lfg-header></lfg-header>
<div id="home" class="wrap">
	<lfg-profile></lfg-profile>
	<div class="page">
		<div class="list">
			<ul class="platforms">
				<li ng-repeat="plateform in aPlateforms">
					<a href="" ng-click="updatePlateform(plateform.id,plateform.nom);" ng-class="{'selected':(plateformSelected == plateform.id)}">{{plateform.nom}}</a>
				</li>
				<li class="selected">
					<a href="" ng-click="updatePlateform('','ALL');" ng-class="{'selected':plateformSelected == ''}" translate>ALL</a>
				</li>
			</ul>
			<ul class="search-tags">

				<li class="search"><input type="text" ng-trim="false" placeholder="#TAGS" ng-model="tags" ng-change="updateTags(this)" list="tagsList"></li>
				<datalist id="tagsList">
					<option data-ng-repeat="item in autoCompleteTags" value="{{item}}" />
				</datalist>
			</ul>

			<div class="last">
				<div ng-if="currentUser">
					<h1>Destiny {{plateformNameSelected}} : My Game</h1>
					<table border="0">
						<thead>
						<tr>
							<th class="list-platform"><a href="">Platforms</a></th>
							<th class="list-tags"><a href="">Tags</a></th>
							<th class="list-infos"><a href="" ng-click="predicate = 'description'; reverse=!reverse">Infos</a></th>
							<th class="list-start"><a href="" ng-click="predicate = 'start'; reverse=!reverse">Start</a></th>
							<th class="list-slots"><a href="" ng-click="predicate ='nbParticipant'; reverse=!reverse">Slots</a></th>
							<th class="list-creator"><a href="" ng-click="predicate = 'name'; reverse=!reverse">Creator</a></th>
						</tr>
						</thead>
					</table>
					<a class="line" ng-href="{{partyWaitingUrlRoot}}{{rdv.id}}" ng-repeat="rdv in aRdv | filterRdvWithMe:currentUser.id:plateformSelected:tags:slotMinAvailable:slotMaxAvailable |orderBy:predicate:reverse as resultsLive" >
						<table border="0">
							<tbody>
							<tr >
								<td class="list-platform">{{ rdv.plateform.nom }}</td>
								<td class="list-tags"> <span ng-repeat="tag in rdv.tags">#{{ tag.nom }} </span></td>
								<td class="list-infos">{{ rdv.description}}</td>
								<td class="list-start" ng-if="isLive(rdv)">NOW</td>
								<td class="list-start" ng-if="!isLive(rdv)">{{ rdv.start*1000 | date:'yyyy-MM-dd HH:mm'}}</td>
								<td class="list-slots">{{rdv.users.length}}/{{ rdv.nbParticipant}}</td>
								<td class="list-creator">{{ rdv.leader.username }}</td>
							</tr>
							</tbody>

						</table>
					</a>
				</div>
				<h1>Destiny {{plateformNameSelected}} : LIVE</h1>
				<table border="0">
					<thead>
						<tr>
							<th class="list-platform"><a href="">Platforms</a></th>
							<th class="list-tags"><a href="">Tags</a></th>
							<th class="list-infos"><a href="" ng-click="predicate = 'description'; reverse=!reverse">Infos</a></th>
							<th class="list-start"><a href="" ng-click="predicate = 'start'; reverse=!reverse">Status</a></th>
							<th class="list-slots"><a href="" ng-click="predicate ='nbParticipant'; reverse=!reverse">Slots</a></th>
							<th class="list-creator"><a href="" ng-click="predicate = 'name'; reverse=!reverse">Creator</a></th>
						</tr>
					</thead>
				</table>
				<a class="line" ng-href="{{partyWaitingUrlRoot}}{{rdv.id}}" ng-repeat="rdv in aRdv | filterRdvLastPlace:plateformSelected:tags:true:false:true:slotMinAvailable:slotMaxAvailable |orderBy:predicate:reverse as resultsLive" >
					<table border="0">
						<tbody>
							<tr >
								<td class="list-platform">{{ rdv.plateform.nom }}</td>
								<td class="list-tags"> <span ng-repeat="tag in rdv.tags">#{{ tag.nom }} </span></td>
								<td class="list-infos">{{ rdv.description}}</td>
								<td class="list-start">OPEN</td>
								<td class="list-slots">{{rdv.users.length}}/{{ rdv.nbParticipant}}</td>
								<td class="list-creator">{{ rdv.leader.username }}</td>
							</tr>
						</tbody>

					</table>
				</a>
				<h1>Destiny {{plateformNameSelected}}</h1>
				<table border="0">
					<thead>
						<tr>
							<th class="list-platform"><a href="">Platforms</a></th>
							<th class="list-tags"><a href="">Tags</a></th>
							<th class="list-infos"><a href="" ng-click="predicate = 'description'; reverse=!reverse">Infos</a></th>
							<th class="list-start"><a href="" ng-click="predicate = 'start'; reverse=!reverse">Start</a></th>
							<th class="list-slots"><a href=" ng-click="predicate = 'nbParticipant'; reverse=!reverse"">Slots</a></th>
							<th class="list-creator"><a href="" ng-click="predicate = 'name'; reverse=!reverse">Creator</a></th>
						</tr>
					</thead>
				</table>
				<a class="line" href="{{partyWaitingUrlRoot}}{{rdv.id}}"ng-repeat="rdv in aRdv | filterRdvLastPlace:plateformSelected:tags:false:false:true:slotMinAvailable:slotMaxAvailable |orderBy:predicate:reverse as resultsAll" >
					<table  border="0" >

						<tbody>
							<tr >
								<td class="list-platform">{{ rdv.plateform.nom }}</td>
								<td class="list-tags"> <span ng-repeat="tag in rdv.tags">#{{ tag.nom }} </span></td>
								<td class="list-infos">{{ rdv.description}}</td>
								<td class="list-start" ng-if="!isEnded(rdv)">{{ rdv.start*1000 | date:'yyyy-MM-dd HH:mm'}}</td>
								<td class="list-start" ng-if="isEnded(rdv)" translate>Ended</td>
								<td class="list-slots">{{rdv.users.length}}/{{ rdv.nbParticipant}}</td>
								<td class="list-creator">{{ rdv.leader.username }}</td>
							</tr>
						</tbody>

					</table>
				</a>
			</div>

			<div lfg-interval="intervalId"></div>
		</div>

	</div>
</div>
<lfg-footer></lfg-footer>