<lfg-header></lfg-header>
<div id="home" class="wrap">
	<div class="welcome">
		<div class="marge" >
		<span translate class="txt faq">
			<span class="tit">FAQ: </span><br />Without an Esbattle account, you only can create an accouncement. To create or join a party, an account is required :)
		</span>
		<span translate class="txt news">
			<span class="tit">What's new: 10 jan 2015</span><br /> With this new version, it's more simple to user the website. Now, just with your gamertag, all your characters will be automai
		</span>
		<br/>

			<a ng-href="{{partyCreateUrl}}" class="btn2"><span translate>Create a party</span> <img
					src="img/ico-create.png"/></a>
			<a href="#" ng-click="displayFormAnnonce = true;" class="btn2 second"><span translate>Post an announcement</span><img
					src="img/ico-annonce.png"/></a>

			<div class="add" ng-show="displayFormAnnonce">
				<form name="myFormBattleTag" ng-submit="getDestinyCharacters()">
					<h2 translate>New announcement</h2>

					<div ng-show="(aCharacters.length === 0)">
						<p><span translate>Enter your informations or</span> <a href="" translate>create an account</a> <span
								translate>to save your character for the next time !</span></p>
						<label for="">
							<select ng-model="plateform" ng-options="plateformData.nom for plateformData in aPlateforms"
							        ng-change="updateFormData()" required>
								<option value="" translate>Platform</option>
							</select>
						</label>

						<input ng-model="gamertag" type="text" placeholder="{{'Your gamertag'|translate}}" class="first"
						       style="margin-top:10px;" required/>

						<span>
							<input type="submit" href="#" class="btn2" value="{{'Find' | translate}}" />
						</span>

					</div>
					<ul class="mychar" >
						<li ng-repeat="character in aCharacters"
						    ng-class="{'selected':(selectedPerso===character)}"
						    class="character"
						    style="background: url('{{character.backgroundPath}}')">
							<a href="#" ng-click="selectPerso(character)">
								<img ng-src="{{character.emblemPath}}" class="embleme"/>

								<div class="left">
									<div class="name">{{character.gamerTag}}</div>
									<div class="team">{{character.clan}}</div>
								</div>
								<div class="right">
									<div class="level">{{character.level}}</div>
									<div class="classe">{{character.class}}</div>

								</div>
							</a>


						</li>
					</ul>
				</form>

					<br style="clear:both"/>

					<div style="margin-top:10px;" ng-show="(selectedPerso !== null)">
						<form name="myFormAnnonce" ng-submit="addAnnonce()">
							<input type="text" placeholder="#Tag" class="first" ng-model="annonce_tag" required>
							<input type="text" placeholder="{{'Enter a description'|translate}}" class="desc" ng-model="annonce_description" required>
							<span>
								<input type="submit" class="btn2" ng-if="(blockPostAnnonce === false)" value="{{'Send it'| translate}}">

							</span>
							<div ng-if="(messageFormAnnonce !== null)">{{messageFormAnnonce | translate}}</div>
						</form>
					</div>


			</div>
			<div class="social">
				<a href="https://www.facebook.com/esbattlelfg" target="_blank"><img src="img/footer-logo-fb.png"/></a>
				<a href="https://twitter.com/esbattle" target="_blank"><img src="img/footer-logo-twitter.png"/></a>
				<a href="http://www.bungie.net/fr/Clan/Forum/595307" target="_blank"><img
						src="img/footer-logo-bungie.png"/></a>
			</div>
		</div>
	</div>
	<div class="page">

		<div class="list">

			<select name="" id="" class="platforms" ng-model="plateformSelected">
				<option value="" ng-repeat="plateform in aPlateforms" ng-click="updatePlateform(plateform.id,plateform.nom);">{{plateform.nom}}</option>
				<option value="" translate>All</option>
			</select>
			<select name="" id="" class="type">
				<option value="" translate ng-click="type = 'type_party';" ng-class="{'selected':(type == 'type_party')}">Party</option>
				<option value="" translate ng-click="type = 'type_annonce';" ng-class="{'selected':(type == 'type_annonce')}">Announcement</option>
				<option value="" translate ng-click="type = 'type_all';" ng-class="{'selected':(type == 'type_all')}">All</option>
			</select>

			<ul class="search-tags">

				<li class="search"><input type="text" ng-trim="false" placeholder="#TAGS" ng-model="tags"
				                          ng-change="updateTags(this)" list="tagsList"></li>
				<datalist id="tagsList">
					<option data-ng-repeat="item in autoCompleteTags" value="{{item}}"/>
				</datalist>
			</ul>

			<div class="last">
				<div ng-if="currentUser">
					<h1 translate>My partys</h1>
					<table border="0">
						<thead>
						<tr>
							<th class="list-player"><a href="" translate>Player</a></th>
							<th class="list-type"><a href="">Type</a></th>
							<th class="list-infos"><a href="" ng-click="predicate = 'description'; reverse=!reverse"
							                          translate>Infos</a></th>
							<th class="list-start"><a href="" ng-click="predicate = 'start'; reverse=!reverse"
							                          translate>Start</a></th>
							<!--<th class="list-slots"><a href=" ng-click="predicate = 'nbParticipant'; reverse=!reverse"">Slots</a></th>
							<th class="list-creator"><a href="" ng-click="predicate = 'name'; reverse=!reverse">Creator</a></th>-->
						</tr>
						</tr>
						</thead>
					</table>
					<a class="line" ng-href="{{rdv.url}}"
					   ng-repeat="rdv in aRdv | filterRdvWithMe:currentUser.id:plateformSelected:tags:slotMinAvailable:slotMaxAvailable |orderBy:predicate:reverse as resultsLive">
						<table border="0">
							<tbody>
							<tr>
								<td class="list-player">
									<span>{{ rdv.leader.username }}</span><span class="co"></span><br/>
									{{rdv.leader.data1}} - {{rdv.leader.data2}}<br/>
									{{ rdv.plateform.nom }}<br/>
								</td>
								<td class="list-type"><span translate>Party</span> <br/><br/>
									<span ng-if="!isEnded(rdv)">Slots
										{{rdv.users.length}}/{{ rdv.nbParticipant}}
									</span>
								</td>
								<td class="list-infos"><span
										ng-repeat="tag in rdv.tags">#{{ tag.nom }} </span><br/><br/>{{ rdv.description}}
								</td>
								<td class="list-start" ng-if="!isEnded(rdv)">{{ rdv.start*1000 | date:'yyyy-MM-dd HH:mm'}}
								</td>
								<td class="list-start" ng-if="isEnded(rdv)" translate>Ended</td>
							</tr>
							</tbody>

						</table>
					</a>
				</div>
				<h1>Destiny {{plateformNameSelected}} </h1>
				<table border="0">
					<thead>
					<tr>
						<th class="list-player"><a href="" translate>Player</a></th>
						<th class="list-type"><a href="">Type</a></th>
						<th class="list-infos"><a href="" ng-click="predicate = 'description'; reverse=!reverse"
						                          translate>Infos</a></th>
						<th class="list-start"><a href="" ng-click="predicate = 'start'; reverse=!reverse" translate>Start</a>
						</th>
						<!--<th class="list-slots"><a href=" ng-click="predicate = 'nbParticipant'; reverse=!reverse"">Slots</a></th>
						<th class="list-creator"><a href="" ng-click="predicate = 'name'; reverse=!reverse">Creator</a></th>-->
					</tr>
					</thead>
				</table>
				<a class="line" ng-href="{{rdv.url}}"
				   ng-repeat="rdv in aRdv | filterRdvLastPlace:plateformSelected:tags:false:false:true:slotMinAvailable:slotMaxAvailable:type |orderBy:predicate:reverse as resultsAll">
					<table border="0">

						<tbody>
						<tr>
							<td class="list-player">
								<div class="character" style="background: url('{{rdv.leader.data4}}')">
									<img ng-src="{{rdv.leader.data5}}" class="embleme"/>

									<div class="left">
										<div class="name" ng-if="rdv.type === 'type_annonce'"><span class="co"></span>
											{{ rdv.leader.gameUsername }}
										</div>
										<div class="name"
										     ng-if="rdv.type !== 'type_annonce' && user.user.id === rdv.leader.id"
										     ng-repeat="user in rdv.users">
											<span class="co"></span>{{ user.gameUsername }}
										</div>
										<div class="team">{{ rdv.plateform.nom }}</div>
									</div>
									<div class="right">
										<div class="level">{{rdv.leader.data2}}</div>
										<div class="classe">{{rdv.leader.data1}}</div>

									</div>
								</div>

							</td>
							<td class="list-type" ng-if="rdv.type !== 'type_annonce'"><span translate>Party</span> <br/><br/>
								<span ng-if="!isEnded(rdv)">Slots
									{{rdv.users.length}}/{{ rdv.nbParticipant}}
								</span>
							</td>
							<td class="list-type" ng-if="rdv.type === 'type_annonce'"><span translate>Announcement</span>
							</td>
							<td class="list-infos"><span ng-repeat="tag in rdv.tags">#{{ tag.nom }} </span><br/><br/>{{
								rdv.description}}
							</td>
							<td class="list-start" ng-if="!isEnded(rdv)">{{ rdv.start*1000 | date:'yyyy-MM-dd HH:mm'}}
							</td>
							<td class="list-start" ng-if="isEnded(rdv)" translate>Ended</td>


						</tr>
						</tbody>

					</table>
				</a>
			</div>

			<div lfg-interval="intervalId"></div>
		</div>

	</div>
</div>
<lfg-footer></lfg-footer>