<lfg-header></lfg-header>
<lfg-friendlist></lfg-friendlist>
<div id="home" class="wrap">
	<lfg-profile-header></lfg-profile-header>
	<div class="welcome page">
		<div class="marge">
			<div id="fb-root"></div>
			<div class="fb-like" data-href="https://www.facebook.com/esbattlelfg" data-width="50" data-layout="button_count" data-action="like" data-show-faces="false" data-share="true"></div>

			<a href=""  class="hide" ng-click="hideHelp()" ng-if="displayhelp"><span></span></a>
			<a href="" class="show" translate ng-click="showHelp()"  ng-if="!displayhelp">Show Help</a>
			<div class="clear"></div>
			<span translate class="txt faq"  ng-show="displayhelp === true">
				<span class="title">FAQ: </span><br/>Without an Esbattle account, you only can create an announcement. To create or join a party, an account is required :)
			</span>


			<!--<span translate class="txt news">-->
			<!--<span class="title">What's new: 12 jan 2015</span><br/>New Design and new feature :<br/>Create an announcement with your destiny character, just put your plateform and your GamerTag ou PSN ID !<br/>Choose your games console and watch all announcement or schedule party.<br/>Use tag like #raid, #cropta, #caveaudeverre, #level30 to find easily what you want !<br/>Create a schedule party easily with our new interface !-->
			<!--</span>-->
			<br/>

			<a ng-href="{{partyCreateUrl}}" class="btn2"><span translate>Create a party</span> <img
				src="img/ico-create.png"/></a>
				<a href="#" ng-click="displayFormAnnonce = true;" class="btn2 second"><span
					translate>Post an announcement</span><img
					src="img/ico-annonce.png"/></a>

					<div class="add" ng-show="displayFormAnnonce">
						<form name="myFormBattleTag" ng-submit="getDestinyCharacters()">
							<h2 translate>New announcement</h2>

							<div ng-show="(aCharacters.length === 0)">
								<p><span translate>Enter your informations or</span> <a href="" translate>create an account</a> <span
									translate>to save your character for the next time !</span></p>
									<label for="">
										<select ng-model="plateformAnnonce" ng-options="plateformData.nom for plateformData in aPlateforms"
										ng-change="updateFormData()" required>
										<option value="" translate>Platform</option>
									</select>
								</label>

								<input ng-model="gamertag" type="text" placeholder="{{'Your gamertag'|translate}}" class="first"
								style="margin-top:10px;" required/>

								<span>
									<input type="submit" href="#" class="btn2" value="{{'Find' | translate}}"/>
								</span>

							</div>
							<div ng-show="(aCharacters.length != 0)" translate>
								Choose a character
							</div>
							<lfg-profile with-plateform="true" selected-perso="selectedPerso"
							a-user-game="aCharacters"></lfg-profile>
						</form>

						<br style="clear:both"/>

						<div style="margin-top:10px;" ng-show="(selectedPerso !== null)">
							<form name="myFormAnnonce" ng-submit="addAnnonce()">
								<input type="text" placeholder="#Tag" class="first" ng-model="annonce_tag" required>
								<input type="text" placeholder="{{'Enter a description'|translate}}" class="desc"
								ng-model="annonce_description" required>
								<span>
									<input type="submit" class="btn2" ng-if="(blockPostAnnonce === false)"
									value="{{'Send it'| translate}}">
									<lfg-loader ng-if="(blockPostAnnonce == true)"></lfg-loader>
								</span>

								<div ng-if="(messageFormAnnonce !== null)">{{messageFormAnnonce | translate}}</div>
							</form>
						</div>


					</div>
					<div class="social">
						<a href="https://www.facebook.com/esbattlelfg" target="_blank"><img src="img/footer-logo-fb.png"/></a>
						<a href="https://twitter.com/esbattle" target="_blank"><img src="img/footer-logo-twitter.png"/></a>
						<a href="http://www.bungie.net/fr/Clan/Forum/595307" target="_blank"><img
							src="img/footer-logo-bungie.png"/></a>
						</div>
					</div>
				</div>
				<div class="page">

					<div class="list">
						<select class="platforms" ng-model="plateform" ng-options="plateformData.nom for plateformData in aPlateforms">
							<option value="" translate>Plateform</option>
						</select>

						<select name="" id="" class="type" ng-model="type">
							<option value="type_party" translate>Party</option>
							<option value="type_annonce" translate>Announcement</option>
							<option value="type_all" translate>Type</option>
						</select>

						<ul class="search-tags">

							<li class="search"><input type="text" ng-trim="false" placeholder="#TAGS" ng-model="tags"
								ng-change="updateTags(this)" list="tagsList">
							</li>
							<datalist id="tagsList">
								<option data-ng-repeat="item in autoCompleteTags" value="{{item}}"/>
							</datalist>
						</ul>

						<lfg-loader></lfg-loader>
					<div class="last">
						<div ng-if="(aMyRdv.length > 0)">
							<h1 translate>My partys</h1>
							<table border="0">
								<thead>
									<tr>
										<th class="list-player"><a href="" translate>Creator</a></th>
										<th class="list-type"><a href="">Type</a></th>
										<th class="list-infos"><a href="" ng-click="predicate = 'description'; reverse=!reverse"
											translate>Infos</a></th>
											<th class="list-start"><a href="" ng-click="predicate = 'start'; reverse=!reverse"
												translate>Start</a></th>
							<!--<th class="list-slots"><a href=" ng-click="predicate = 'nbParticipant'; reverse=!reverse"">Slots</a></th>
							<th class="list-creator"><a href="" ng-click="predicate = 'name'; reverse=!reverse">Creator</a></th>-->
						</tr>
					</tr>
				</thead>
			</table>
			<a class="line" ng-href="{{rdv.url}}"
			ng-repeat="rdv in aMyRdv |orderBy:predicate:reverse">
			<table border="0">
				<tbody>

					<tr>
						<td class="list-player">
							<lfg-profile-bungie with-plateform="false" user-game="rdv.author"></lfg-profile-bungie>
						</td>
						<td class="list-type"><span translate>Party</span> <br/>
							<span class="slot">Slots
								{{rdv.users.length}}/{{ rdv.nbParticipant}}
							</span><br/>
							<span>
								{{ rdv.plateform.nom }}
							</span>
						</td>
						<td class="list-infos"><span
							ng-repeat="tag in rdv.tags">#{{ tag.nom }} </span><br/><br/>{{ rdv.description}}
						</td>
						<td class="list-start"><lfg-since time="{{rdv.start}}"></td>
					</tr>
				</tbody>

			</table>
		</a>
	</div>
<!-- 	<h1>Destiny {{plateform.nom}} </h1> -->
	<table border="0">
		<thead>
			<tr>
				<th class="list-player"><a href="" translate>Player</a></th>
				<th class="list-type"><a href="">Type</a></th>
				<th class="list-infos"><a href="" ng-click="predicate = 'description'; reverse=!reverse"
					translate>Infos</a></th>
					<th class="list-start"><a href="" ng-click="predicate = 'start'; reverse=!reverse" translate>Start</a>
					</th>
						<!--<th class="list-slots"><a href=" ng-click="predicate = 'nbParticipant'; reverse=!reverse"">Slots</a></th>
						<th class="list-creator"><a href="" ng-click="predicate = 'name'; reverse=!reverse">Creator</a></th>-->
					</tr>
				</thead>
			</table>
			<a class="line" ng-href="{{rdv.url}}" ng-animate
			ng-repeat="rdv in aRdvLastPlace |orderBy:predicate:reverse">
			<table border="0">

				<tbody>
					<tr class="mobile-hour" >
						<td align="center" colspan="5">
							<lfg-since time="{{rdv.start}}">
						</td>
					</tr>
					<tr>
						<td class="list-player">
							<lfg-profile-bungie with-plateform="false" user-game="rdv.author" user="rdv.user" list-user="listUser"></lfg-profile-bungie>
						</td>
						<td class="list-type" ng-if="rdv.type !== 'type_annonce'"><span translate>Party</span> <br/>
							<span class="slot">Slots
								{{rdv.users.length}}/{{ rdv.nbParticipant}}
							</span><br/>
							<span>
								{{ rdv.plateform.nom }}
							</span>
						</td>
						<td class="list-type" ng-if="rdv.type === 'type_annonce'">
							<span translate>Announcement</span><br/><br/>
							<span>
								{{ rdv.plateform.nom }}
							</span>
						</td>
						<td class="list-infos"><span ng-repeat="tag in rdv.tags">#{{ tag.nom }} </span><br/><br/>
							{{ rdv.description}}
						</td>
						<td class="list-start"><lfg-since time="{{rdv.start}}"></lfg-since>
						</td>
					</tr>
				</tbody>

			</table>
		</a>
	</div>

	<div lfg-interval="intervalId"></div>
</div>

</div>
</div>
<lfg-footer></lfg-footer>