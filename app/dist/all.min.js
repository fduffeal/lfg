!function(e,t,n){"use strict";function r(e,t){return t=t||Error,function(){var n,r,i=arguments[0],a="["+(e?e+":":"")+i+"] ",o=arguments[1],s=arguments;for(n=a+o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t+2<s.length?dt(s[t+2]):e}),n=n+"\nhttp://errors.angularjs.org/1.3.20/"+(e?e+"/":"")+i,r=2;r<arguments.length;r++)n=n+(2==r?"?":"&")+"p"+(r-2)+"="+encodeURIComponent(dt(arguments[r]));return new t(n)}}function i(e){if(null==e||E(e))return!1;var t="length"in Object(e)&&e.length;return e.nodeType===bi&&t?!0:b(e)||pi(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){var r,o;if(e)if(x(e))for(r in e)"prototype"==r||"length"==r||"name"==r||e.hasOwnProperty&&!e.hasOwnProperty(r)||t.call(n,e[r],r,e);else if(pi(e)||i(e)){var s="object"!=typeof e;for(r=0,o=e.length;o>r;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==a)e.forEach(t,n,e);else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);return e}function o(e){return Object.keys(e).sort()}function s(e,t,n){for(var r=o(e),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function l(e){return function(t,n){e(n,t)}}function u(){return++fi}function c(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function f(e){for(var t=e.$$hashKey,n=1,r=arguments.length;r>n;n++){var i=arguments[n];if(i)for(var a=Object.keys(i),o=0,s=a.length;s>o;o++){var l=a[o];e[l]=i[l]}}return c(e,t),e}function d(e){return parseInt(e,10)}function p(e,t){return f(Object.create(e),t)}function h(){}function m(e){return e}function g(e){return function(){return e}}function v(e){return"undefined"==typeof e}function $(e){return"undefined"!=typeof e}function y(e){return null!==e&&"object"==typeof e}function b(e){return"string"==typeof e}function w(e){return"number"==typeof e}function C(e){return"[object Date]"===li.call(e)}function x(e){return"function"==typeof e}function S(e){return"[object RegExp]"===li.call(e)}function E(e){return e&&e.window===e}function T(e){return e&&e.$evalAsync&&e.$watch}function A(e){return"[object File]"===li.call(e)}function R(e){return"[object FormData]"===li.call(e)}function k(e){return"[object Blob]"===li.call(e)}function N(e){return"boolean"==typeof e}function P(e){return e&&x(e.then)}function U(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function D(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function M(e){return Jr(e.nodeName||e[0]&&e[0].nodeName)}function I(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),t}function O(e,t,n,r){if(E(e)||T(e))throw ui("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(t){if(e===t)throw ui("cpi","Can't copy! Source and destination are identical.");if(n=n||[],r=r||[],y(e)){var i=n.indexOf(e);if(-1!==i)return r[i];n.push(e),r.push(t)}var o;if(pi(e)){t.length=0;for(var s=0;s<e.length;s++)o=O(e[s],null,n,r),y(e[s])&&(n.push(e[s]),r.push(o)),t.push(o)}else{var l=t.$$hashKey;pi(t)?t.length=0:a(t,function(e,n){delete t[n]});for(var u in e)e.hasOwnProperty(u)&&(o=O(e[u],null,n,r),y(e[u])&&(n.push(e[u]),r.push(o)),t[u]=o);c(t,l)}}else if(t=e,e)if(pi(e))t=O(e,[],n,r);else if(C(e))t=new Date(e.getTime());else if(S(e))t=new RegExp(e.source,e.toString().match(/[^\/]*$/)[0]),t.lastIndex=e.lastIndex;else if(y(e)){var f=Object.create(Object.getPrototypeOf(e));t=O(e,f,n,r)}return t}function L(e,t){if(pi(e)){t=t||[];for(var n=0,r=e.length;r>n;n++)t[n]=e[n]}else if(y(e)){t=t||{};for(var i in e)("$"!==i.charAt(0)||"$"!==i.charAt(1))&&(t[i]=e[i])}return t||e}function _(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var r,i,a,o=typeof e,s=typeof t;if(o==s&&"object"==o){if(!pi(e)){if(C(e))return C(t)?_(e.getTime(),t.getTime()):!1;if(S(e))return S(t)?e.toString()==t.toString():!1;if(T(e)||T(t)||E(e)||E(t)||pi(t)||C(t)||S(t))return!1;a={};for(i in e)if("$"!==i.charAt(0)&&!x(e[i])){if(!_(e[i],t[i]))return!1;a[i]=!0}for(i in t)if(!a.hasOwnProperty(i)&&"$"!==i.charAt(0)&&t[i]!==n&&!x(t[i]))return!1;return!0}if(!pi(t))return!1;if((r=e.length)==t.length){for(i=0;r>i;i++)if(!_(e[i],t[i]))return!1;return!0}}return!1}function H(e,t,n){return e.concat(ai.call(t,n))}function F(e,t){return ai.call(e,t||0)}function j(e,t){var n=arguments.length>2?F(arguments,2):[];return!x(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,H(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function B(e,r){var i=r;return"string"==typeof e&&"$"===e.charAt(0)&&"$"===e.charAt(1)?i=n:E(r)?i="$WINDOW":r&&t===r?i="$DOCUMENT":T(r)&&(i="$SCOPE"),i}function q(e,t){return"undefined"==typeof e?n:(w(t)||(t=t?2:null),JSON.stringify(e,B,t))}function V(e){return b(e)?JSON.parse(e):e}function z(e){e=ni(e).clone();try{e.empty()}catch(t){}var n=ni("<div>").append(e).html();try{return e[0].nodeType===Ci?Jr(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(e,t){return"<"+Jr(t)})}catch(t){return Jr(n)}}function W(e){try{return decodeURIComponent(e)}catch(t){}}function G(e){var t,n,r={};return a((e||"").split("&"),function(e){if(e&&(t=e.replace(/\+/g,"%20").split("="),n=W(t[0]),$(n))){var i=$(t[1])?W(t[1]):!0;Qr.call(r,n)?pi(r[n])?r[n].push(i):r[n]=[r[n],i]:r[n]=i}}),r}function K(e){var t=[];return a(e,function(e,n){pi(e)?a(e,function(e){t.push(J(n,!0)+(e===!0?"":"="+J(e,!0)))}):t.push(J(n,!0)+(e===!0?"":"="+J(e,!0)))}),t.length?t.join("&"):""}function Y(e){return J(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function J(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function Q(e,t){var n,r,i=vi.length;for(e=ni(e),r=0;i>r;++r)if(n=vi[r]+t,b(n=e.attr(n)))return n;return null}function Z(e,t){var n,r,i={};a(vi,function(t){var i=t+"app";!n&&e.hasAttribute&&e.hasAttribute(i)&&(n=e,r=e.getAttribute(i))}),a(vi,function(t){var i,a=t+"app";!n&&(i=e.querySelector("["+a.replace(":","\\:")+"]"))&&(n=i,r=i.getAttribute(a))}),n&&(i.strictDi=null!==Q(n,"strict-di"),t(n,r?[r]:[],i))}function X(n,r,i){y(i)||(i={});var o={strictDi:!1};i=f(o,i);var s=function(){if(n=ni(n),n.injector()){var e=n[0]===t?"document":z(n);throw ui("btstrpd","App Already Bootstrapped with this Element '{0}'",e.replace(/</,"&lt;").replace(/>/,"&gt;"))}r=r||[],r.unshift(["$provide",function(e){e.value("$rootElement",n)}]),i.debugInfoEnabled&&r.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),r.unshift("ng");var a=Vt(r,i.strictDi);return a.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),a},l=/^NG_ENABLE_DEBUG_INFO!/,u=/^NG_DEFER_BOOTSTRAP!/;return e&&l.test(e.name)&&(i.debugInfoEnabled=!0,e.name=e.name.replace(l,"")),e&&!u.test(e.name)?s():(e.name=e.name.replace(u,""),ci.resumeBootstrap=function(e){return a(e,function(e){r.push(e)}),s()},void(x(ci.resumeDeferredBootstrap)&&ci.resumeDeferredBootstrap()))}function et(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function tt(e){var t=ci.element(e).injector();if(!t)throw ui("test","no injector found for element argument to getTestability");return t.get("$$testability")}function nt(e,t){return t=t||"_",e.replace($i,function(e,n){return(n?t:"")+e.toLowerCase()})}function rt(){var t;yi||(ri=e.jQuery,ri&&ri.fn.on?(ni=ri,f(ri.fn,{scope:Fi.scope,isolateScope:Fi.isolateScope,controller:Fi.controller,injector:Fi.injector,inheritedData:Fi.inheritedData}),t=ri.cleanData,ri.cleanData=function(e){var n;if(di)di=!1;else for(var r,i=0;null!=(r=e[i]);i++)n=ri._data(r,"events"),n&&n.$destroy&&ri(r).triggerHandler("$destroy");t(e)}):ni=bt,ci.element=ni,yi=!0)}function it(e,t,n){if(!e)throw ui("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function at(e,t,n){return n&&pi(e)&&(e=e[e.length-1]),it(x(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function ot(e,t){if("hasOwnProperty"===e)throw ui("badname","hasOwnProperty is not a valid {0} name",t)}function st(e,t,n){if(!t)return e;for(var r,i=t.split("."),a=e,o=i.length,s=0;o>s;s++)r=i[s],e&&(e=(a=e)[r]);return!n&&x(e)?j(a,e):e}function lt(e){var t=e[0],n=e[e.length-1],r=[t];do{if(t=t.nextSibling,!t)break;r.push(t)}while(t!==n);return ni(r)}function ut(){return Object.create(null)}function ct(e){function t(e,t,n){return e[t]||(e[t]=n())}var n=r("$injector"),i=r("ng"),a=t(e,"angular",Object);return a.$$minErr=a.$$minErr||r,t(a,"module",function(){var e={};return function(r,a,o){var s=function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)};return s(r,"module"),a&&e.hasOwnProperty(r)&&(e[r]=null),t(e,r,function(){function e(e,n,r,i){return i||(i=t),function(){return i[r||"push"]([e,n,arguments]),u}}if(!a)throw n("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",r);var t=[],i=[],s=[],l=e("$injector","invoke","push",i),u={_invokeQueue:t,_configBlocks:i,_runBlocks:s,requires:a,name:r,provider:e("$provide","provider"),factory:e("$provide","factory"),service:e("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),animation:e("$animateProvider","register"),filter:e("$filterProvider","register"),controller:e("$controllerProvider","register"),directive:e("$compileProvider","directive"),config:l,run:function(e){return s.push(e),this}};return o&&l(o),u})}})}function ft(e){var t=[];return JSON.stringify(e,function(e,n){if(n=B(e,n),y(n)){if(t.indexOf(n)>=0)return"<<already seen>>";t.push(n)}return n})}function dt(e){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?ft(e):e}function pt(t){f(t,{bootstrap:X,copy:O,extend:f,equals:_,element:ni,forEach:a,injector:Vt,noop:h,bind:j,toJson:q,fromJson:V,identity:m,isUndefined:v,isDefined:$,isString:b,isFunction:x,isObject:y,isNumber:w,isElement:U,isArray:pi,version:Ti,isDate:C,lowercase:Jr,uppercase:Zr,callbacks:{counter:0},getTestability:tt,$$minErr:r,$$csp:gi,reloadWithDebugInfo:et}),ii=ct(e);try{ii("ngLocale")}catch(n){ii("ngLocale",[]).provider("$locale",vn)}ii("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:Jn}),e.provider("$compile",Qt).directive({a:Ua,input:Ya,textarea:Ya,form:La,script:Ho,select:Bo,style:Vo,option:qo,ngBind:Za,ngBindHtml:eo,ngBindTemplate:Xa,ngClass:no,ngClassEven:io,ngClassOdd:ro,ngCloak:ao,ngController:oo,ngForm:_a,ngHide:Do,ngIf:uo,ngInclude:co,ngInit:po,ngNonBindable:Ao,ngPluralize:Ro,ngRepeat:ko,ngShow:Uo,ngStyle:Mo,ngSwitch:Io,ngSwitchWhen:Oo,ngSwitchDefault:Lo,ngOptions:jo,ngTransclude:_o,ngModel:So,ngList:ho,ngChange:to,pattern:Wo,ngPattern:Wo,required:zo,ngRequired:zo,minlength:Ko,ngMinlength:Ko,maxlength:Go,ngMaxlength:Go,ngValue:Qa,ngModelOptions:To}).directive({ngInclude:fo}).directive(Da).directive(so),e.provider({$anchorScroll:zt,$animate:Ji,$browser:Kt,$cacheFactory:Yt,$controller:tn,$document:nn,$exceptionHandler:rn,$filter:lr,$interpolate:mn,$interval:gn,$http:fn,$httpBackend:pn,$location:Pn,$log:Un,$parse:Vn,$rootScope:Yn,$q:zn,$$q:Wn,$sce:er,$sceDelegate:Xn,$sniffer:tr,$templateCache:Jt,$templateRequest:nr,$$testability:rr,$timeout:ir,$window:sr,$$rAF:Kn,$$asyncCallback:Wt,$$jqLite:Ht})}])}function ht(){return++Ri}function mt(e){return e.replace(Pi,function(e,t,n,r){return r?n.toUpperCase():n}).replace(Ui,"Moz$1")}function gt(e){return!Oi.test(e)}function vt(e){var t=e.nodeType;return t===bi||!t||t===Si}function $t(e,t){var n,r,i,o,s=t.createDocumentFragment(),l=[];if(gt(e))l.push(t.createTextNode(e));else{for(n=n||s.appendChild(t.createElement("div")),r=(Li.exec(e)||["",""])[1].toLowerCase(),i=Hi[r]||Hi._default,n.innerHTML=i[1]+e.replace(_i,"<$1></$2>")+i[2],o=i[0];o--;)n=n.lastChild;l=H(l,n.childNodes),n=s.firstChild,n.textContent=""}return s.textContent="",s.innerHTML="",a(l,function(e){s.appendChild(e)}),s}function yt(e,n){n=n||t;var r;return(r=Ii.exec(e))?[n.createElement(r[1])]:(r=$t(e,n))?r.childNodes:[]}function bt(e){if(e instanceof bt)return e;var t;if(b(e)&&(e=hi(e),t=!0),!(this instanceof bt)){if(t&&"<"!=e.charAt(0))throw Mi("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new bt(e)}t?Nt(this,yt(e)):Nt(this,e)}function wt(e){return e.cloneNode(!0)}function Ct(e,t){if(t||St(e),e.querySelectorAll)for(var n=e.querySelectorAll("*"),r=0,i=n.length;i>r;r++)St(n[r])}function xt(e,t,n,r){if($(r))throw Mi("offargs","jqLite#off() does not support the `selector` argument");var i=Et(e),o=i&&i.events,s=i&&i.handle;if(s)if(t)a(t.split(" "),function(t){if($(n)){var r=o[t];if(I(r||[],n),r&&r.length>0)return}Ni(e,t,s),delete o[t]});else for(t in o)"$destroy"!==t&&Ni(e,t,s),delete o[t]}function St(e,t){var r=e.ng339,i=r&&Ai[r];if(i){if(t)return void delete i.data[t];i.handle&&(i.events.$destroy&&i.handle({},"$destroy"),xt(e)),delete Ai[r],e.ng339=n}}function Et(e,t){var r=e.ng339,i=r&&Ai[r];return t&&!i&&(e.ng339=r=ht(),i=Ai[r]={events:{},data:{},handle:n}),i}function Tt(e,t,n){if(vt(e)){var r=$(n),i=!r&&t&&!y(t),a=!t,o=Et(e,!i),s=o&&o.data;if(r)s[t]=n;else{if(a)return s;if(i)return s&&s[t];f(s,t)}}}function At(e,t){return e.getAttribute?(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1:!1}function Rt(e,t){t&&e.setAttribute&&a(t.split(" "),function(t){e.setAttribute("class",hi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+hi(t)+" "," ")))})}function kt(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");a(t.split(" "),function(e){e=hi(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",hi(n))}}function Nt(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;n>r;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Pt(e,t){return Ut(e,"$"+(t||"ngController")+"Controller")}function Ut(e,t,r){e.nodeType==Si&&(e=e.documentElement);for(var i=pi(t)?t:[t];e;){for(var a=0,o=i.length;o>a;a++)if((r=ni.data(e,i[a]))!==n)return r;e=e.parentNode||e.nodeType===Ei&&e.host}}function Dt(e){for(Ct(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Mt(e,t){t||Ct(e);var n=e.parentNode;n&&n.removeChild(e)}function It(t,n){n=n||e,"complete"===n.document.readyState?n.setTimeout(t):ni(n).on("load",t)}function Ot(e,t){var n=ji[t.toLowerCase()];return n&&Bi[M(e)]&&n}function Lt(e,t){var n=e.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&qi[t]}function _t(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],a=i?i.length:0;if(a){if(v(n.immediatePropagationStopped)){var o=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),o&&o.call(n)}}n.isImmediatePropagationStopped=function(){return n.immediatePropagationStopped===!0},a>1&&(i=L(i));for(var s=0;a>s;s++)n.isImmediatePropagationStopped()||i[s].call(e,n)}};return n.elem=e,n}function Ht(){this.$get=function(){return f(bt,{hasClass:function(e,t){return e.attr&&(e=e[0]),At(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),kt(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),Rt(e,t)}})}}function Ft(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"==r||"object"==r&&null!==e?e.$$hashKey=r+":"+(t||u)():r+":"+e}function jt(e,t){if(t){var n=0;this.nextUid=function(){return++n}}a(e,this.put,this)}function Bt(e){var t=e.toString().replace(Gi,""),n=t.match(Vi);return n?"function("+(n[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function qt(e,t,n){var r,i,o,s;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw b(n)&&n||(n=e.name||Bt(e)),Ki("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);i=e.toString().replace(Gi,""),o=i.match(Vi),a(o[1].split(zi),function(e){e.replace(Wi,function(e,t,n){r.push(n)})})}e.$inject=r}}else pi(e)?(s=e.length-1,at(e[s],"fn"),r=e.slice(0,s)):at(e,"fn",!0);return r}function Vt(e,t){function r(e){return function(t,n){return y(t)?void a(t,l(e)):e(t,n)}}function i(e,t){if(ot(e,"service"),(x(t)||pi(t))&&(t=T.instantiate(t)),!t.$get)throw Ki("pget","Provider '{0}' must define $get factory method.",e);return E[e+w]=t}function o(e,t){return function(){var n=R.invoke(t,this);if(v(n))throw Ki("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function s(e,t,n){return i(e,{$get:n!==!1?o(e,t):t})}function u(e,t){return s(e,["$injector",function(e){return e.instantiate(t)}])}function c(e,t){return s(e,g(t),!1)}function f(e,t){ot(e,"constant"),E[e]=t,A[e]=t}function d(e,t){var n=T.get(e+w),r=n.$get;n.$get=function(){var e=R.invoke(r,n);return R.invoke(t,null,{$delegate:e})}}function p(e){var t,n=[];return a(e,function(e){function r(e){var t,n;for(t=0,n=e.length;n>t;t++){var r=e[t],i=T.get(r[0]);i[r[1]].apply(i,r[2])}}if(!S.get(e)){S.put(e,!0);try{b(e)?(t=ii(e),n=n.concat(p(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):x(e)?n.push(T.invoke(e)):pi(e)?n.push(T.invoke(e)):at(e,"module")}catch(i){throw pi(e)&&(e=e[e.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Ki("modulerr","Failed to instantiate module {0} due to:\n{1}",e,i.stack||i.message||i)}}}),n}function m(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===$)throw Ki("cdep","Circular dependency found: {0}",t+" <- "+C.join(" <- "));return e[t]}try{return C.unshift(t),e[t]=$,e[t]=n(t,r)}catch(i){throw e[t]===$&&delete e[t],i}finally{C.shift()}}function i(e,n,i,a){"string"==typeof i&&(a=i,i=null);var o,s,l,u=[],c=Vt.$$annotate(e,t,a);for(s=0,o=c.length;o>s;s++){if(l=c[s],"string"!=typeof l)throw Ki("itkn","Incorrect injection token! Expected service name as string, got {0}",l);u.push(i&&i.hasOwnProperty(l)?i[l]:r(l,a))}return pi(e)&&(e=e[o]),e.apply(n,u)}function a(e,t,n){var r=Object.create((pi(e)?e[e.length-1]:e).prototype||null),a=i(e,r,t,n);return y(a)||x(a)?a:r}return{invoke:i,instantiate:a,get:r,annotate:Vt.$$annotate,has:function(t){return E.hasOwnProperty(t+w)||e.hasOwnProperty(t)}}}t=t===!0;var $={},w="Provider",C=[],S=new jt([],!0),E={$provide:{provider:r(i),factory:r(s),service:r(u),value:r(c),constant:r(f),decorator:d}},T=E.$injector=m(E,function(e,t){throw ci.isString(t)&&C.push(t),Ki("unpr","Unknown provider: {0}",C.join(" <- "))}),A={},R=A.$injector=m(A,function(e,t){var r=T.get(e+w,t);return R.invoke(r.$get,r,n,e)});return a(p(e),function(e){R.invoke(e||h)}),R}function zt(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){return"a"===M(e)?(t=e,!0):void 0}),t}function a(){var e=s.yOffset;if(x(e))e=e();else if(U(e)){var n=e[0],r=t.getComputedStyle(n);e="fixed"!==r.position?0:n.getBoundingClientRect().bottom}else w(e)||(e=0);return e}function o(e){if(e){e.scrollIntoView();var n=a();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(){var e,t=n.hash();t?(e=l.getElementById(t))?o(e):(e=i(l.getElementsByName(t)))?o(e):"top"===t&&o(null):o(null)}var l=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){(e!==t||""!==e)&&It(function(){r.$evalAsync(s)})}),s}]}function Wt(){this.$get=["$$rAF","$timeout",function(e,t){return e.supported?function(t){return e(t)}:function(e){return t(e,0,!1)}}]}function Gt(e,t,r,i){function o(e){try{e.apply(null,F(arguments,1))}finally{if(S--,0===S)for(;E.length;)try{E.pop()()}catch(t){r.error(t)}}}function s(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function l(e,t){!function n(){a(A,function(e){e()}),T=t(n,e)}()}function u(){f(),d()}function c(){try{return y.state}catch(e){}}function f(){R=c(),R=v(R)?null:R,_(R,I)&&(R=I),I=R}function d(){(N!==m.url()||k!==R)&&(N=m.url(),k=R,a(D,function(e){e(m.url(),R)}))}function p(e){try{return decodeURIComponent(e)}catch(t){return e}}var m=this,g=t[0],$=e.location,y=e.history,w=e.setTimeout,C=e.clearTimeout,x={};m.isMock=!1;var S=0,E=[];m.$$completeOutstandingRequest=o,m.$$incOutstandingRequestCount=function(){S++},m.notifyWhenNoOutstandingRequests=function(e){a(A,function(e){e()}),0===S?e():E.push(e)};var T,A=[];m.addPollFn=function(e){return v(T)&&l(100,w),A.push(e),e};var R,k,N=$.href,P=t.find("base"),U=null;f(),k=R,m.url=function(t,n,r){if(v(r)&&(r=null),$!==e.location&&($=e.location),y!==e.history&&(y=e.history),t){var a=k===r;if(N===t&&(!i.history||a))return m;var o=N&&Cn(N)===Cn(t);return N=t,k=r,!i.history||o&&a?((!o||U)&&(U=t),n?$.replace(t):o?$.hash=s(t):$.href=t):(y[n?"replaceState":"pushState"](r,"",t),f(),k=R),m}return U||$.href.replace(/%27/g,"'")},m.state=function(){return R};var D=[],M=!1,I=null;m.onUrlChange=function(t){return M||(i.history&&ni(e).on("popstate",u),ni(e).on("hashchange",u),M=!0),D.push(t),t},m.$$checkUrlChange=d,m.baseHref=function(){var e=P.attr("href");return e?e.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var O={},L="",H=m.baseHref();m.cookies=function(e,t){var i,a,o,s,l;if(!e){if(g.cookie!==L)for(L=g.cookie,a=L.split("; "),O={},s=0;s<a.length;s++)o=a[s],l=o.indexOf("="),l>0&&(e=p(o.substring(0,l)),O[e]===n&&(O[e]=p(o.substring(l+1))));return O}t===n?g.cookie=encodeURIComponent(e)+"=;path="+H+";expires=Thu, 01 Jan 1970 00:00:00 GMT":b(t)&&(i=(g.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path="+H).length+1,i>4096&&r.warn("Cookie '"+e+"' possibly not set or overflowed because it was too large ("+i+" > 4096 bytes)!"))},m.defer=function(e,t){var n;return S++,n=w(function(){delete x[n],o(e)},t||0),x[n]=!0,n},m.defer.cancel=function(e){return x[e]?(delete x[e],C(e),o(h),!0):!1}}function Kt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new Gt(e,r,t,n)}]}function Yt(){this.$get=function(){function e(e,n){function i(e){e!=d&&(p?p==e&&(p=e.n):p=e,a(e.n,e.p),a(e,d),d=e,d.n=null)}function a(e,t){e!=t&&(e&&(e.p=t),t&&(t.n=e))}if(e in t)throw r("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var o=0,s=f({},n,{id:e}),l={},u=n&&n.capacity||Number.MAX_VALUE,c={},d=null,p=null;return t[e]={put:function(e,t){if(u<Number.MAX_VALUE){var n=c[e]||(c[e]={key:e});i(n)}if(!v(t))return e in l||o++,l[e]=t,o>u&&this.remove(p.key),t},get:function(e){if(u<Number.MAX_VALUE){var t=c[e];if(!t)return;i(t)}return l[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=c[e];if(!t)return;t==d&&(d=t.p),t==p&&(p=t.n),a(t.n,t.p),delete c[e]}delete l[e],o--},removeAll:function(){l={},o=0,c={},d=p=null},destroy:function(){l=null,s=null,c=null,delete t[e]},info:function(){return f({},s,{size:o})}}}var t={};return e.info=function(){var e={};return a(t,function(t,n){e[n]=t.info()}),e},e.get=function(e){return t[e]},e}}function Jt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function Qt(e,r){function i(e,t){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,r={};return a(e,function(e,i){var a=e.match(n);if(!a)throw Qi("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,i,e);r[i]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||i}}),r}var o={},s="Directive",u=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,c=/(([\w\-]+)(?:\:([^;]+))?;?)/,d=D("ngSrc,ngSrcset,src,srcset"),v=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,w=/^(on[a-z]+|formaction)$/;this.directive=function S(t,n){return ot(t,"directive"),b(t)?(it(n,"directiveFactory"),o.hasOwnProperty(t)||(o[t]=[],e.factory(t+s,["$injector","$exceptionHandler",function(e,n){var r=[];return a(o[t],function(a,o){try{var s=e.invoke(a);x(s)?s={compile:g(s)}:!s.compile&&s.link&&(s.compile=g(s.link)),s.priority=s.priority||0,s.index=o,s.name=s.name||t,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",y(s.scope)&&(s.$$isolateBindings=i(s.scope,s.name)),r.push(s)}catch(l){n(l)}}),r}])),o[t].push(n)):a(t,l(S)),this},this.aHrefSanitizationWhitelist=function(e){return $(e)?(r.aHrefSanitizationWhitelist(e),this):r.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(r.imgSrcSanitizationWhitelist(e),this):r.imgSrcSanitizationWhitelist()};var C=!0;this.debugInfoEnabled=function(e){return $(e)?(C=e,this):C},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(e,r,i,l,g,$,S,E,A,R,k){function N(e,t){try{e.addClass(t)}catch(n){}}function P(e,t,n,r,i){e instanceof ni||(e=ni(e)),a(e,function(t,n){t.nodeType==Ci&&t.nodeValue.match(/\S+/)&&(e[n]=ni(t).wrap("<span></span>").parent()[0])});var o=D(e,t,e,n,r,i);P.$$addScopeClass(e);var s=null;return function(t,n,r){it(t,"scope"),r=r||{};var i=r.parentBoundTranscludeFn,a=r.transcludeControllers,l=r.futureParentElement;i&&i.$$boundTransclude&&(i=i.$$boundTransclude),s||(s=U(l));var u;if(u="html"!==s?ni(Z(s,ni("<div>").append(e).html())):n?Fi.clone.call(e):e,a)for(var c in a)u.data("$"+c+"Controller",a[c].instance);return P.$$addScopeInfo(u,t),n&&n(u,t),o&&o(t,u,u,i),u}}function U(e){var t=e&&e[0];return t&&"foreignobject"!==M(t)&&t.toString().match(/SVG/)?"svg":"html"}function D(e,t,r,i,a,o){function s(e,r,i,a){var o,s,l,u,c,f,d,p,g;if(h){var v=r.length;for(g=new Array(v),c=0;c<m.length;c+=3)d=m[c],g[d]=r[d]}else g=r;for(c=0,f=m.length;f>c;)l=g[m[c++]],o=m[c++],s=m[c++],o?(o.scope?(u=e.$new(),P.$$addScopeInfo(ni(l),u)):u=e,p=o.transcludeOnThisElement?O(e,o.transclude,a,o.elementTranscludeOnThisElement):!o.templateOnThisElement&&a?a:!a&&t?O(e,t):null,o(s,u,l,i,p)):s&&s(e,l.childNodes,n,a)}for(var l,u,c,f,d,p,h,m=[],g=0;g<e.length;g++)l=new ot,u=L(e[g],[],l,0===g?i:n,a),c=u.length?B(u,e[g],l,t,r,null,[],[],o):null,c&&c.scope&&P.$$addScopeClass(l.$$element),d=c&&c.terminal||!(f=e[g].childNodes)||!f.length?null:D(f,c?(c.transcludeOnThisElement||!c.templateOnThisElement)&&c.transclude:t),(c||d)&&(m.push(g,c,d),p=!0,h=h||c),o=null;return p?s:null}function O(e,t,n){var r=function(r,i,a,o,s){return r||(r=e.$new(!1,s),r.$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:a,futureParentElement:o})};return r}function L(e,t,n,r,i){var a,o,s=e.nodeType,l=n.$attr;switch(s){case bi:V(t,Zt(M(e)),"E",r,i);for(var f,d,p,h,m,g,v=e.attributes,$=0,w=v&&v.length;w>$;$++){var C=!1,x=!1;f=v[$],d=f.name,m=hi(f.value),h=Zt(d),(g=ft.test(h))&&(d=d.replace(Zi,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var S=h.replace(/(Start|End)$/,"");W(S)&&h===S+"Start"&&(C=d,x=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),p=Zt(d.toLowerCase()),l[p]=d,(g||!n.hasOwnProperty(p))&&(n[p]=m,Ot(e,p)&&(n[p]=!0)),et(e,t,m,p,g),V(t,p,"A",r,i,C,x)}if(o=e.className,y(o)&&(o=o.animVal),b(o)&&""!==o)for(;a=c.exec(o);)p=Zt(a[2]),V(t,p,"C",r,i)&&(n[p]=hi(a[3])),o=o.substr(a.index+a[0].length);break;case Ci:Q(t,e.nodeValue);break;case xi:try{a=u.exec(e.nodeValue),a&&(p=Zt(a[1]),V(t,p,"M",r,i)&&(n[p]=hi(a[2])))}catch(E){}}return t.sort(Y),t}function H(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t)){do{if(!e)throw Qi("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType==bi&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0)}else r.push(e);return ni(r)}function j(e,t,n){return function(r,i,a,o,s){return i=H(i[0],t,n),e(r,i,a,o,s)}}function B(e,o,s,l,u,c,f,d,p){function h(e,t,n,r){e&&(n&&(e=j(e,n,r)),e.require=E.require,e.directiveName=A,(M===E||E.$$isolateScope)&&(e=rt(e,{isolateScope:!0})),f.push(e)),t&&(n&&(t=j(t,n,r)),t.require=E.require,t.directiveName=A,(M===E||E.$$isolateScope)&&(t=rt(t,{isolateScope:!0})),d.push(t))}function m(e,t,n,r){var i,o,s="data",l=!1,u=n;if(b(t)){if(o=t.match(v),t=t.substring(o[0].length),o[3]&&(o[1]?o[3]=null:o[1]=o[3]),"^"===o[1]?s="inheritedData":"^^"===o[1]&&(s="inheritedData",u=n.parent()),"?"===o[2]&&(l=!0),i=null,r&&"data"===s&&(i=r[t])&&(i=i.instance),i=i||u[s]("$"+t+"Controller"),!i&&!l)throw Qi("ctreq","Controller '{0}', required by directive '{1}', can't be found!",t,e);return i||null}return pi(t)&&(i=[],a(t,function(t){i.push(m(e,t,n,r))})),i}function w(e,t,i,l,u){function c(e,t,r){var i;return T(e)||(r=t,t=e,e=n),W&&(i=w),r||(r=W?x.parent():x),u(e,t,i,r,k)}var p,h,v,y,b,w,C,x,E;if(o===i?(E=s,x=s.$$element):(x=ni(i),E=new ot(x,s)),M&&(b=t.$new(!0)),u&&(C=c,C.$$boundTransclude=u),D&&(S={},w={},a(D,function(e){var n,r={$scope:e===M||e.$$isolateScope?b:t,$element:x,$attrs:E,$transclude:C};y=e.controller,"@"==y&&(y=E[e.name]),n=$(y,r,!0,e.controllerAs),w[e.name]=n,W||x.data("$"+e.name+"Controller",n.instance),S[e.name]=n})),M){P.$$addScopeInfo(x,b,!0,!(I&&(I===M||I===M.$$originalDirective))),P.$$addScopeClass(x,!0);var A=S&&S[M.name],R=b;A&&A.identifier&&M.bindToController===!0&&(R=A.instance),a(b.$$isolateBindings=M.$$isolateBindings,function(e,n){var i,a,o,s,l=e.attrName,u=e.optional,c=e.mode;switch(c){case"@":E.$observe(l,function(e){R[n]=e}),E.$$observers[l].$$scope=t,E[l]&&(R[n]=r(E[l])(t));break;case"=":if(u&&!E[l])return;a=g(E[l]),s=a.literal?_:function(e,t){return e===t||e!==e&&t!==t},o=a.assign||function(){throw i=R[n]=a(t),Qi("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",E[l],M.name)},i=R[n]=a(t);var f=function(e){return s(e,R[n])||(s(e,i)?o(t,e=R[n]):R[n]=e),i=e};f.$stateful=!0;var d;d=e.collection?t.$watchCollection(E[l],f):t.$watch(g(E[l],f),null,a.literal),b.$on("$destroy",d);break;case"&":a=g(E[l]),R[n]=function(e){return a(t,e)}}})}for(S&&(a(S,function(e){e()}),S=null),p=0,h=f.length;h>p;p++)v=f[p],at(v,v.isolateScope?b:t,x,E,v.require&&m(v.directiveName,v.require,x,w),C);var k=t;for(M&&(M.template||null===M.templateUrl)&&(k=b),e&&e(k,i.childNodes,n,u),p=d.length-1;p>=0;p--)v=d[p],at(v,v.isolateScope?b:t,x,E,v.require&&m(v.directiveName,v.require,x,w),C)}p=p||{};for(var C,S,E,A,R,k,N,U=-Number.MAX_VALUE,D=p.controllerDirectives,M=p.newIsolateScopeDirective,I=p.templateDirective,O=p.nonTlbTranscludeDirective,B=!1,V=!1,W=p.hasElementTranscludeDirective,Y=s.$$element=ni(o),Q=c,X=l,et=0,nt=e.length;nt>et;et++){E=e[et];var it=E.$$start,st=E.$$end;if(it&&(Y=H(o,it,st)),R=n,U>E.priority)break;if((N=E.scope)&&(E.templateUrl||(y(N)?(J("new/isolated scope",M||C,E,Y),M=E):J("new/isolated scope",M,E,Y)),C=C||E),A=E.name,!E.templateUrl&&E.controller&&(N=E.controller,D=D||{},J("'"+A+"' controller",D[A],E,Y),D[A]=E),(N=E.transclude)&&(B=!0,E.$$tlb||(J("transclusion",O,E,Y),O=E),"element"==N?(W=!0,U=E.priority,R=Y,Y=s.$$element=ni(t.createComment(" "+A+": "+s[A]+" ")),o=Y[0],tt(u,F(R),o),X=P(R,l,U,Q&&Q.name,{nonTlbTranscludeDirective:O})):(R=ni(wt(o)).contents(),Y.empty(),X=P(R,l))),E.template)if(V=!0,J("template",I,E,Y),I=E,N=x(E.template)?E.template(Y,s):E.template,N=ct(N),E.replace){if(Q=E,R=gt(N)?[]:en(Z(E.templateNamespace,hi(N))),o=R[0],1!=R.length||o.nodeType!==bi)throw Qi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",A,"");tt(u,Y,o);var lt={$attr:{}},ut=L(o,[],lt),ft=e.splice(et+1,e.length-(et+1));M&&q(ut),e=e.concat(ut).concat(ft),G(s,lt),nt=e.length}else Y.html(N);if(E.templateUrl)V=!0,J("template",I,E,Y),I=E,E.replace&&(Q=E),w=K(e.splice(et,e.length-et),Y,s,u,B&&X,f,d,{controllerDirectives:D,newIsolateScopeDirective:M,templateDirective:I,nonTlbTranscludeDirective:O}),nt=e.length;else if(E.compile)try{k=E.compile(Y,s,X),x(k)?h(null,k,it,st):k&&h(k.pre,k.post,it,st)}catch(dt){i(dt,z(Y))}E.terminal&&(w.terminal=!0,U=Math.max(U,E.priority))}return w.scope=C&&C.scope===!0,w.transcludeOnThisElement=B,w.elementTranscludeOnThisElement=W,w.templateOnThisElement=V,w.transclude=X,p.hasElementTranscludeDirective=W,w}function q(e){for(var t=0,n=e.length;n>t;t++)e[t]=p(e[t],{$$isolateScope:!0})}function V(t,r,a,l,u,c,f){if(r===u)return null;var d=null;if(o.hasOwnProperty(r))for(var h,m=e.get(r+s),g=0,v=m.length;v>g;g++)try{h=m[g],(l===n||l>h.priority)&&-1!=h.restrict.indexOf(a)&&(c&&(h=p(h,{$$start:c,$$end:f})),t.push(h),d=h)
}catch($){i($)}return d}function W(t){if(o.hasOwnProperty(t))for(var n,r=e.get(t+s),i=0,a=r.length;a>i;i++)if(n=r[i],n.multiElement)return!0;return!1}function G(e,t){var n=t.$attr,r=e.$attr,i=e.$$element;a(e,function(r,i){"$"!=i.charAt(0)&&(t[i]&&t[i]!==r&&(r+=("style"===i?";":" ")+t[i]),e.$set(i,r,!0,n[i]))}),a(t,function(t,a){"class"==a?(N(i,t),e["class"]=(e["class"]?e["class"]+" ":"")+t):"style"==a?(i.attr("style",i.attr("style")+";"+t),e.style=(e.style?e.style+";":"")+t):"$"==a.charAt(0)||e.hasOwnProperty(a)||(e[a]=t,r[a]=n[a])})}function K(e,t,n,r,i,o,s,u){var c,f,d=[],h=t[0],m=e.shift(),g=p(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),v=x(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,$=m.templateNamespace;return t.empty(),l(v).then(function(l){var p,b,w,C;if(l=ct(l),m.replace){if(w=gt(l)?[]:en(Z($,hi(l))),p=w[0],1!=w.length||p.nodeType!==bi)throw Qi("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,v);b={$attr:{}},tt(r,t,p);var x=L(p,[],b);y(m.scope)&&q(x),e=x.concat(e),G(n,b)}else p=h,t.html(l);for(e.unshift(g),c=B(e,p,n,i,t,m,o,s,u),a(r,function(e,n){e==p&&(r[n]=t[0])}),f=D(t[0].childNodes,i);d.length;){var S=d.shift(),E=d.shift(),T=d.shift(),A=d.shift(),R=t[0];if(!S.$$destroyed){if(E!==h){var k=E.className;u.hasElementTranscludeDirective&&m.replace||(R=wt(p)),tt(T,ni(E),R),N(ni(R),k)}C=c.transcludeOnThisElement?O(S,c.transclude,A):A,c(f,S,R,r,C)}}d=null}),function(e,t,n,r,i){var a=i;t.$$destroyed||(d?d.push(t,n,r,a):(c.transcludeOnThisElement&&(a=O(t,c.transclude,i)),c(f,t,n,r,a)))}}function Y(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function J(e,t,n,r){if(t)throw Qi("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",t.name,n.name,e,z(r))}function Q(e,t){var n=r(t,!0);n&&e.push({priority:0,compile:function(e){var t=e.parent(),r=!!t.length;return r&&P.$$addBindingClass(t),function(e,t){var i=t.parent();r||P.$$addBindingClass(i),P.$$addBindingInfo(i,n.expressions),e.$watch(n,function(e){t[0].nodeValue=e})}}})}function Z(e,n){switch(e=Jr(e||"html")){case"svg":case"math":var r=t.createElement("div");return r.innerHTML="<"+e+">"+n+"</"+e+">",r.childNodes[0].childNodes;default:return n}}function X(e,t){if("srcdoc"==t)return A.HTML;var n=M(e);return"xlinkHref"==t||"form"==n&&"action"==t||"img"!=n&&("src"==t||"ngSrc"==t)?A.RESOURCE_URL:void 0}function et(e,t,n,i,a){var o=X(e,i);a=d[i]||a;var s=r(n,!0,o,a);if(s){if("multiple"===i&&"select"===M(e))throw Qi("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",z(e));t.push({priority:100,compile:function(){return{pre:function(e,t,l){var u=l.$$observers||(l.$$observers={});if(w.test(i))throw Qi("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var c=l[i];c!==n&&(s=c&&r(c,!0,o,a),n=c),s&&(l[i]=s(e),(u[i]||(u[i]=[])).$$inter=!0,(l.$$observers&&l.$$observers[i].$$scope||e).$watch(s,function(e,t){"class"===i&&e!=t?l.$updateClass(e,t):l.$set(i,e)}))}}}})}}function tt(e,n,r){var i,a,o=n[0],s=n.length,l=o.parentNode;if(e)for(i=0,a=e.length;a>i;i++)if(e[i]==o){e[i++]=r;for(var u=i,c=u+s-1,f=e.length;f>u;u++,c++)f>c?e[u]=e[c]:delete e[u];e.length-=s-1,e.context===o&&(e.context=r);break}l&&l.replaceChild(r,o);var d=t.createDocumentFragment();d.appendChild(o),ni(r).data(ni(o).data()),ri?(di=!0,ri.cleanData([o])):delete ni.cache[o[ni.expando]];for(var p=1,h=n.length;h>p;p++){var m=n[p];ni(m).remove(),d.appendChild(m),delete n[p]}n[0]=r,n.length=1}function rt(e,t){return f(function(){return e.apply(null,arguments)},e,t)}function at(e,t,n,r,a,o){try{e(t,n,r,a,o)}catch(s){i(s,z(n))}}var ot=function(e,t){if(t){var n,r,i,a=Object.keys(t);for(n=0,r=a.length;r>n;n++)i=a[n],this[i]=t[i]}else this.$attr={};this.$$element=e};ot.prototype={$normalize:Zt,$addClass:function(e){e&&e.length>0&&R.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&R.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=Xt(e,t);n&&n.length&&R.addClass(this.$$element,n);var r=Xt(t,e);r&&r.length&&R.removeClass(this.$$element,r)},$set:function(e,t,r,o){var s,l=this.$$element[0],u=Ot(l,e),c=Lt(l,e),f=e;if(u?(this.$$element.prop(e,t),o=u):c&&(this[c]=t,f=c),this[e]=t,o?this.$attr[e]=o:(o=this.$attr[e],o||(this.$attr[e]=o=nt(e,"-"))),s=M(this.$$element),"a"===s&&"href"===e||"img"===s&&"src"===e)this[e]=t=k(t,"src"===e);else if("img"===s&&"srcset"===e){for(var d="",p=hi(t),h=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,m=/\s/.test(p)?h:/(,)/,g=p.split(m),v=Math.floor(g.length/2),$=0;v>$;$++){var y=2*$;d+=k(hi(g[y]),!0),d+=" "+hi(g[y+1])}var b=hi(g[2*$]).split(/\s/);d+=k(hi(b[0]),!0),2===b.length&&(d+=" "+hi(b[1])),this[e]=t=d}r!==!1&&(null===t||t===n?this.$$element.removeAttr(o):this.$$element.attr(o,t));var w=this.$$observers;w&&a(w[f],function(e){try{e(t)}catch(n){i(n)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ut()),i=r[e]||(r[e]=[]);return i.push(t),S.$evalAsync(function(){!i.$$inter&&n.hasOwnProperty(e)&&t(n[e])}),function(){I(i,t)}}};var st=r.startSymbol(),lt=r.endSymbol(),ct="{{"==st||"}}"==lt?m:function(e){return e.replace(/\{\{/g,st).replace(/}}/g,lt)},ft=/^ngAttr[A-Z]/;return P.$$addBindingInfo=C?function(e,t){var n=e.data("$binding")||[];pi(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:h,P.$$addBindingClass=C?function(e){N(e,"ng-binding")}:h,P.$$addScopeInfo=C?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:h,P.$$addScopeClass=C?function(e,t){N(e,t?"ng-isolate-scope":"ng-scope")}:h,P}]}function Zt(e){return mt(e.replace(Zi,""))}function Xt(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var a=0;a<r.length;a++){for(var o=r[a],s=0;s<i.length;s++)if(o==i[s])continue e;n+=(n.length>0?" ":"")+o}return n}function en(e){e=ni(e);var t=e.length;if(1>=t)return e;for(;t--;){var n=e[t];n.nodeType===xi&&oi.call(e,t,1)}return e}function tn(){var e={},t=!1,i=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(t,n){ot(t,"controller"),y(t)?f(e,t):e[t]=n},this.allowGlobals=function(){t=!0},this.$get=["$injector","$window",function(a,o){function s(e,t,n,i){if(!e||!y(e.$scope))throw r("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,t);e.$scope[t]=n}return function(r,l,u,c){var d,p,h,m;if(u=u===!0,c&&b(c)&&(m=c),b(r)){if(p=r.match(i),!p)throw Xi("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",r);h=p[1],m=m||p[3],r=e.hasOwnProperty(h)?e[h]:st(l.$scope,h,!0)||(t?st(o,h,!0):n),at(r,h,!0)}if(u){var g=(pi(r)?r[r.length-1]:r).prototype;return d=Object.create(g||null),m&&s(l,m,d,h||r.name),f(function(){return a.invoke(r,d,l,h),d},{instance:d,identifier:m})}return d=a.instantiate(r,l,h),m&&s(l,m,d,h||r.name),d}}]}function nn(){this.$get=["$window",function(e){return ni(e.document)}]}function rn(){this.$get=["$log",function(e){return function(){e.error.apply(e,arguments)}}]}function an(e,t){if(b(e)){var n=e.replace(ia,"").trim();if(n){var r=t("Content-Type");(r&&0===r.indexOf(ea)||on(n))&&(e=V(n))}}return e}function on(e){var t=e.match(na);return t&&ra[t[0]].test(e)}function sn(e){var t,n,r,i=ut();return e?(a(e.split("\n"),function(e){r=e.indexOf(":"),t=Jr(hi(e.substr(0,r))),n=hi(e.substr(r+1)),t&&(i[t]=i[t]?i[t]+", "+n:n)}),i):i}function ln(e){var t=y(e)?e:n;return function(n){if(t||(t=sn(e)),n){var r=t[Jr(n)];return void 0===r&&(r=null),r}return t}}function un(e,t,n,r){return x(r)?r(e,t,n):(a(r,function(r){e=r(e,t,n)}),e)}function cn(e){return e>=200&&300>e}function fn(){var e=this.defaults={transformResponse:[an],transformRequest:[function(e){return!y(e)||A(e)||k(e)||R(e)?e:q(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L(ta),put:L(ta),patch:L(ta)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},t=!1;this.useApplyAsync=function(e){return $(e)?(t=!!e,this):t};var i=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(o,l,u,c,d,p){function h(t){function i(e){var t=f({},e);return t.data=e.data?un(e.data,e.headers,e.status,l.transformResponse):e.data,cn(e.status)?t:d.reject(t)}function o(e){var t,n={};return a(e,function(e,r){x(e)?(t=e(),null!=t&&(n[r]=t)):n[r]=e}),n}function s(t){var n,r,i,a=e.headers,s=f({},t.headers);a=f({},a.common,a[Jr(t.method)]);e:for(n in a){r=Jr(n);for(i in s)if(Jr(i)===r)continue e;s[n]=a[n]}return o(s)}if(!ci.isObject(t))throw r("$http")("badreq","Http request configuration must be an object.  Received: {0}",t);var l=f({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},t);l.headers=s(t),l.method=Zr(l.method);var u=function(t){var r=t.headers,o=un(t.data,ln(r),n,t.transformRequest);return v(o)&&a(r,function(e,t){"content-type"===Jr(t)&&delete r[t]}),v(t.withCredentials)&&!v(e.withCredentials)&&(t.withCredentials=e.withCredentials),w(t,o).then(i,i)},c=[u,n],p=d.when(l);for(a(T,function(e){(e.request||e.requestError)&&c.unshift(e.request,e.requestError),(e.response||e.responseError)&&c.push(e.response,e.responseError)});c.length;){var h=c.shift(),m=c.shift();p=p.then(h,m)}return p.success=function(e){return at(e,"fn"),p.then(function(t){e(t.data,t.status,t.headers,l)}),p},p.error=function(e){return at(e,"fn"),p.then(null,function(t){e(t.data,t.status,t.headers,l)}),p},p}function m(){a(arguments,function(e){h[e]=function(t,n){return h(f(n||{},{method:e,url:t}))}})}function g(){a(arguments,function(e){h[e]=function(t,n,r){return h(f(r||{},{method:e,url:t,data:n}))}})}function w(r,i){function a(e,n,r,i){function a(){s(n,e,r,i)}p&&(cn(e)?p.put(C,[e,n,sn(r),i]):p.remove(C)),t?c.$applyAsync(a):(a(),c.$$phase||c.$apply())}function s(e,t,n,i){t=t>=-1?t:0,(cn(t)?g.resolve:g.reject)({data:e,status:t,headers:ln(n),config:r,statusText:i})}function u(e){s(e.data,e.status,L(e.headers()),e.statusText)}function f(){var e=h.pendingRequests.indexOf(r);-1!==e&&h.pendingRequests.splice(e,1)}var p,m,g=d.defer(),b=g.promise,w=r.headers,C=S(r.url,r.params);if(h.pendingRequests.push(r),b.then(f,f),!r.cache&&!e.cache||r.cache===!1||"GET"!==r.method&&"JSONP"!==r.method||(p=y(r.cache)?r.cache:y(e.cache)?e.cache:E),p&&(m=p.get(C),$(m)?P(m)?m.then(u,u):pi(m)?s(m[1],m[0],L(m[2]),m[3]):s(m,200,{},"OK"):p.put(C,b)),v(m)){var x=or(r.url)?l.cookies()[r.xsrfCookieName||e.xsrfCookieName]:n;x&&(w[r.xsrfHeaderName||e.xsrfHeaderName]=x),o(r.method,C,i,a,w,r.timeout,r.withCredentials,r.responseType)}return b}function S(e,t){if(!t)return e;var n=[];return s(t,function(e,t){null===e||v(e)||(pi(e)||(e=[e]),a(e,function(e){y(e)&&(e=C(e)?e.toISOString():q(e)),n.push(J(t)+"="+J(e))}))}),n.length>0&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e}var E=u("$http"),T=[];return a(i,function(e){T.unshift(b(e)?p.get(e):p.invoke(e))}),h.pendingRequests=[],m("get","delete","head","jsonp"),g("post","put","patch"),h.defaults=e,h}]}function dn(){return new e.XMLHttpRequest}function pn(){this.$get=["$browser","$window","$document",function(e,t,n){return hn(e,dn,e.defer,t.angular.callbacks,n[0])}]}function hn(e,t,r,i,o){function s(e,t,n){var r=o.createElement("script"),a=null;return r.type="text/javascript",r.src=e,r.async=!0,a=function(e){Ni(r,"load",a),Ni(r,"error",a),o.body.removeChild(r),r=null;var s=-1,l="unknown";e&&("load"!==e.type||i[t].called||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},ki(r,"load",a),ki(r,"error",a),o.body.appendChild(r),a}return function(o,l,u,c,f,d,p,m){function g(){b&&b(),w&&w.abort()}function v(t,i,a,o,s){S!==n&&r.cancel(S),b=w=null,t(i,a,o,s),e.$$completeOutstandingRequest(h)}if(e.$$incOutstandingRequestCount(),l=l||e.url(),"jsonp"==Jr(o)){var y="_"+(i.counter++).toString(36);i[y]=function(e){i[y].data=e,i[y].called=!0};var b=s(l.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(e,t){v(c,e,i[y].data,"",t),i[y]=h})}else{var w=t();w.open(o,l,!0),a(f,function(e,t){$(e)&&w.setRequestHeader(t,e)}),w.onload=function(){var e=w.statusText||"",t="response"in w?w.response:w.responseText,n=1223===w.status?204:w.status;0===n&&(n=t?200:"file"==ar(l).protocol?404:0),v(c,n,t,w.getAllResponseHeaders(),e)};var C=function(){v(c,-1,null,null,"")};if(w.onerror=C,w.onabort=C,p&&(w.withCredentials=!0),m)try{w.responseType=m}catch(x){if("json"!==m)throw x}w.send(u||null)}if(d>0)var S=r(g,d);else P(d)&&d.then(g)}}function mn(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function a(e){return"\\\\\\"+e}function o(a,o,d,p){function h(n){return n.replace(u,e).replace(c,t)}function m(e){try{return e=k(e),p&&!$(e)?e:N(e)}catch(t){var n=aa("interr","Can't interpolate: {0}\n{1}",a,t.toString());r(n)}}p=!!p;for(var g,y,b,w=0,C=[],S=[],E=a.length,T=[],A=[];E>w;){if(-1==(g=a.indexOf(e,w))||-1==(y=a.indexOf(t,g+s))){w!==E&&T.push(h(a.substring(w)));break}w!==g&&T.push(h(a.substring(w,g))),b=a.substring(g+s,y),C.push(b),S.push(n(b,m)),w=y+l,A.push(T.length),T.push("")}if(d&&T.length>1)throw aa("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a);if(!o||C.length){var R=function(e){for(var t=0,n=C.length;n>t;t++){if(p&&v(e[t]))return;T[A[t]]=e[t]}return T.join("")},k=function(e){return d?i.getTrusted(d,e):i.valueOf(e)},N=function(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=q(e)}return e};return f(function(e){var t=0,n=C.length,i=new Array(n);try{for(;n>t;t++)i[t]=S[t](e);return R(i)}catch(o){var s=aa("interr","Can't interpolate: {0}\n{1}",a,o.toString());r(s)}},{exp:a,expressions:C,$$watchDelegate:function(e,t,n){var r;return e.$watchGroup(S,function(n,i){var a=R(n);x(t)&&t.call(this,a,n!==i?r:a,e),r=a},n)}})}}var s=e.length,l=t.length,u=new RegExp(e.replace(/./g,a),"g"),c=new RegExp(t.replace(/./g,a),"g");return o.startSymbol=function(){return e},o.endSymbol=function(){return t},o}]}function gn(){this.$get=["$rootScope","$window","$q","$$q",function(e,t,n,r){function i(i,o,s,l){var u=t.setInterval,c=t.clearInterval,f=0,d=$(l)&&!l,p=(d?r:n).defer(),h=p.promise;return s=$(s)?s:0,h.then(null,null,i),h.$$intervalId=u(function(){p.notify(f++),s>0&&f>=s&&(p.resolve(f),c(h.$$intervalId),delete a[h.$$intervalId]),d||e.$apply()},o),a[h.$$intervalId]=p,h}var a={};return i.cancel=function(e){return e&&e.$$intervalId in a?(a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0):!1},i}]}function vn(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(e){return 1===e?"one":"other"}}}}function $n(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=Y(t[n]);return t.join("/")}function yn(e,t){var n=ar(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=d(n.port)||sa[n.protocol]||null}function bn(e,t){var n="/"!==e.charAt(0);n&&(e="/"+e);var r=ar(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=G(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!=t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function wn(e,t){return 0===t.indexOf(e)?t.substr(e.length):void 0}function Cn(e){var t=e.indexOf("#");return-1==t?e:e.substr(0,t)}function xn(e){return e.replace(/(#.+)|#$/,"$1")}function Sn(e){return e.substr(0,Cn(e).lastIndexOf("/")+1)}function En(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Tn(e,t,r){this.$$html5=!0,r=r||"",yn(e,this),this.$$parse=function(e){var n=wn(t,e);if(!b(n))throw la("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);bn(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=K(this.$$search),n=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=$n(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1)},this.$$parseLinkUrl=function(i,a){if(a&&"#"===a[0])return this.hash(a.slice(1)),!0;var o,s,l;return(o=wn(e,i))!==n?(s=o,l=(o=wn(r,o))!==n?t+(wn("/",o)||o):e+s):(o=wn(t,i))!==n?l=t+o:t==i+"/"&&(l=t),l&&this.$$parse(l),!!l}}function An(e,t,n){yn(e,this),this.$$parse=function(r){function i(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return 0===t.indexOf(n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}var a,o=wn(e,r)||wn(t,r);v(o)||"#"!==o.charAt(0)?this.$$html5?a=o:(a="",v(o)&&(e=r,this.replace())):(a=wn(n,o),v(a)&&(a=o)),bn(a,this),this.$$path=i(this.$$path,a,e),this.$$compose()},this.$$compose=function(){var t=K(this.$$search),r=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=$n(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:"")},this.$$parseLinkUrl=function(t){return Cn(e)==Cn(t)?(this.$$parse(t),!0):!1}}function Rn(e,t,n){this.$$html5=!0,An.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var a,o;return e==Cn(r)?a=r:(o=wn(t,r))?a=e+n+o:t===r+"/"&&(a=t),a&&this.$$parse(a),!!a},this.$$compose=function(){var t=K(this.$$search),r=this.$$hash?"#"+Y(this.$$hash):"";this.$$url=$n(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url}}function kn(e){return function(){return this[e]}}function Nn(e,t){return function(n){return v(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function Pn(){var e="",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return $(t)?(e=t,this):e},this.html5Mode=function(e){return N(e)?(t.enabled=e,this):y(e)?(N(e.enabled)&&(t.enabled=e.enabled),N(e.requireBase)&&(t.requireBase=e.requireBase),N(e.rewriteLinks)&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,a,o){function s(e,t,n){var i=u.url(),a=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(o){throw u.url(i),u.$$state=a,o}}function l(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,c,f,d=r.baseHref(),p=r.url();if(t.enabled){if(!d&&t.requireBase)throw la("nobase","$location in HTML5 mode requires a <base> tag to be present!");f=En(p)+(d||"/"),c=i.history?Tn:Rn}else f=Cn(p),c=An;var h=Sn(f);u=new c(f,h,"#"+e),u.$$parseLinkUrl(p,p),u.$$state=r.state();var m=/^\s*(javascript|mailto):/i;a.on("click",function(e){if(t.rewriteLinks&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!=e.which&&2!=e.button){for(var i=ni(e.target);"a"!==M(i[0]);)if(i[0]===a[0]||!(i=i.parent())[0])return;var s=i.prop("href"),l=i.attr("href")||i.attr("xlink:href");y(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=ar(s.animVal).href),m.test(s)||!s||i.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(s,l)&&(e.preventDefault(),u.absUrl()!=r.url()&&(n.$apply(),o.angular["ff-684208-preventDefault"]=!0))}}),xn(u.absUrl())!=xn(p)&&r.url(u.absUrl(),!0);var g=!0;return r.onUrlChange(function(e,t){return v(wn(h,e))?void(o.location.href=e):(n.$evalAsync(function(){var r,i=u.absUrl(),a=u.$$state;u.$$parse(e),u.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,a).defaultPrevented,u.absUrl()===e&&(r?(u.$$parse(i),u.$$state=a,s(i,!1,a)):(g=!1,l(i,a)))}),void(n.$$phase||n.$digest()))}),n.$watch(function(){var e=xn(r.url()),t=xn(u.absUrl()),a=r.state(),o=u.$$replace,c=e!==t||u.$$html5&&i.history&&a!==u.$$state;(g||c)&&(g=!1,n.$evalAsync(function(){var t=u.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,u.$$state,a).defaultPrevented;u.absUrl()===t&&(r?(u.$$parse(e),u.$$state=a):(c&&s(t,o,a===u.$$state?null:u.$$state),l(e,a)))})),u.$$replace=!1}),u}]}function Un(){var e=!0,t=this;this.debugEnabled=function(t){return $(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||h,o=!1;try{o=!!i.apply}catch(s){}return o?function(){var e=[];return a(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function Dn(e,t){if("__defineGetter__"===e||"__defineSetter__"===e||"__lookupGetter__"===e||"__lookupSetter__"===e||"__proto__"===e)throw ca("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",t);return e}function Mn(e,t){if(e+="",!b(e))throw ca("iseccst","Cannot convert object to primitive value! Expression: {0}",t);return e}function In(e,t){if(e){if(e.constructor===e)throw ca("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e.window===e)throw ca("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",t);if(e.children&&(e.nodeName||e.prop&&e.attr&&e.find))throw ca("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",t);if(e===Object)throw ca("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",t)}return e}function On(e,t){if(e){if(e.constructor===e)throw ca("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",t);if(e===fa||e===da||e===pa)throw ca("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",t)}}function Ln(e){return e.constant}function _n(e,t,n,r,i){In(e,i),In(t,i);for(var a,o=n.split("."),s=0;o.length>1;s++){a=Dn(o.shift(),i);var l=0===s&&t&&t[a]||e[a];l||(l={},e[a]=l),e=In(l,i)}return a=Dn(o.shift(),i),In(e[a],i),e[a]=r,r}function Hn(e){return"constructor"==e}function Fn(e,t,r,i,a,o,s){Dn(e,o),Dn(t,o),Dn(r,o),Dn(i,o),Dn(a,o);var l=function(e){return In(e,o)},u=s||Hn(e)?l:m,c=s||Hn(t)?l:m,f=s||Hn(r)?l:m,d=s||Hn(i)?l:m,p=s||Hn(a)?l:m;return function(o,s){var l=s&&s.hasOwnProperty(e)?s:o;return null==l?l:(l=u(l[e]),t?null==l?n:(l=c(l[t]),r?null==l?n:(l=f(l[r]),i?null==l?n:(l=d(l[i]),a?null==l?n:l=p(l[a]):l):l):l):l)}}function jn(e,t){return function(n,r){return e(n,r,In,t)}}function Bn(e,t,r){var i=t.expensiveChecks,o=i?ba:ya,s=o[e];if(s)return s;var l=e.split("."),u=l.length;if(t.csp)s=6>u?Fn(l[0],l[1],l[2],l[3],l[4],r,i):function(e,t){var a,o=0;do a=Fn(l[o++],l[o++],l[o++],l[o++],l[o++],r,i)(e,t),t=n,e=a;while(u>o);return a};else{var c="";i&&(c+="s = eso(s, fe);\nl = eso(l, fe);\n");var f=i;a(l,function(e,t){Dn(e,r);var n=(t?"s":'((l&&l.hasOwnProperty("'+e+'"))?l:s)')+"."+e;(i||Hn(e))&&(n="eso("+n+", fe)",f=!0),c+="if(s == null) return undefined;\ns="+n+";\n"}),c+="return s;";var d=new Function("s","l","eso","fe",c);d.toString=g(c),f&&(d=jn(d,r)),s=d}return s.sharedGetter=!0,s.assign=function(t,n,r){return _n(t,r,e,n,e)},o[e]=s,s}function qn(e){return x(e.valueOf)?e.valueOf():wa.call(e)}function Vn(){var e=ut(),t=ut();this.$get=["$filter","$sniffer",function(n,r){function i(e){var t=e;return e.sharedGetter&&(t=function(t,n){return e(t,n)},t.literal=e.literal,t.constant=e.constant,t.assign=e.assign),t}function o(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n];i.constant||(i.inputs?o(i.inputs,t):-1===t.indexOf(i)&&t.push(i))}return t}function s(e,t){return null==e||null==t?e===t:"object"==typeof e&&(e=qn(e),"object"==typeof e)?!1:e===t||e!==e&&t!==t}function l(e,t,n,r){var i,a=r.$$inputs||(r.$$inputs=o(r.inputs,[]));if(1===a.length){var l=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,l)||(i=r(e),l=t&&qn(t)),i},t,n)}for(var u=[],c=0,f=a.length;f>c;c++)u[c]=s;return e.$watch(function(e){for(var t=!1,n=0,o=a.length;o>n;n++){var l=a[n](e);(t||(t=!s(l,u[n])))&&(u[n]=l&&qn(l))}return t&&(i=r(e)),i},t,n)}function u(e,t,n,r){var i,a;return i=e.$watch(function(e){return r(e)},function(e,n,r){a=e,x(t)&&t.apply(this,arguments),$(e)&&r.$$postDigest(function(){$(a)&&i()})},n)}function c(e,t,n,r){function i(e){var t=!0;return a(e,function(e){$(e)||(t=!1)}),t}var o,s;return o=e.$watch(function(e){return r(e)},function(e,n,r){s=e,x(t)&&t.call(this,e,n,r),i(e)&&r.$$postDigest(function(){i(s)&&o()})},n)}function f(e,t,n,r){var i;return i=e.$watch(function(e){return r(e)},function(){x(t)&&t.apply(this,arguments),i()},n)}function d(e,t){if(!t)return e;var n=e.$$watchDelegate,r=n!==c&&n!==u,i=r?function(n,r){var i=e(n,r);return t(i,n,r)}:function(n,r){var i=e(n,r),a=t(i,n,r);return $(i)?a:i};return e.$$watchDelegate&&e.$$watchDelegate!==l?i.$$watchDelegate=e.$$watchDelegate:t.$stateful||(i.$$watchDelegate=l,i.inputs=[e]),i}var p={csp:r.csp,expensiveChecks:!1},m={csp:r.csp,expensiveChecks:!0};return function(r,a,o){var s,g,v;switch(typeof r){case"string":v=r=r.trim();var $=o?t:e;if(s=$[v],!s){":"===r.charAt(0)&&":"===r.charAt(1)&&(g=!0,r=r.substring(2));var y=o?m:p,b=new va(y),w=new $a(b,n,y);s=w.parse(r),s.constant?s.$$watchDelegate=f:g?(s=i(s),s.$$watchDelegate=s.literal?c:u):s.inputs&&(s.$$watchDelegate=l),$[v]=s}return d(s,a);case"function":return d(r,a);default:return d(h,a)}}}]}function zn(){this.$get=["$rootScope","$exceptionHandler",function(e,t){return Gn(function(t){e.$evalAsync(t)},t)}]}function Wn(){this.$get=["$browser","$exceptionHandler",function(e,t){return Gn(function(t){e.defer(t)},t)}]}function Gn(e,t){function i(e,t,n){function r(t){return function(n){i||(i=!0,t.call(e,n))}}var i=!1;return[r(t),r(n)]}function o(){this.$$state={status:0}}function s(e,t){return function(n){t.call(e,n)}}function l(e){var r,i,a;a=e.pending,e.processScheduled=!1,e.pending=n;for(var o=0,s=a.length;s>o;++o){i=a[o][0],r=a[o][e.status];try{x(r)?i.resolve(r(e.value)):1===e.status?i.resolve(e.value):i.reject(e.value)}catch(l){i.reject(l),t(l)}}}function u(t){!t.processScheduled&&t.pending&&(t.processScheduled=!0,e(function(){l(t)}))}function c(){this.promise=new o,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}function f(e){var t=new c,n=0,r=pi(e)?[]:{};return a(e,function(e,i){n++,v(e).then(function(e){r.hasOwnProperty(i)||(r[i]=e,--n||t.resolve(r))},function(e){r.hasOwnProperty(i)||t.reject(e)})}),0===n&&t.resolve(r),t.promise}var d=r("$q",TypeError),p=function(){return new c};o.prototype={then:function(e,t,n){var r=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&u(this.$$state),r.promise},"catch":function(e){return this.then(null,e)},"finally":function(e,t){return this.then(function(t){return g(t,!0,e)},function(t){return g(t,!1,e)},t)}},c.prototype={resolve:function(e){this.promise.$$state.status||(e===this.promise?this.$$reject(d("qcycle","Expected promise to be resolved with value other than itself '{0}'",e)):this.$$resolve(e))},$$resolve:function(e){var n,r;r=i(this,this.$$resolve,this.$$reject);try{(y(e)||x(e))&&(n=e&&e.then),x(n)?(this.promise.$$state.status=-1,n.call(e,r[0],r[1],this.notify)):(this.promise.$$state.value=e,this.promise.$$state.status=1,u(this.promise.$$state))}catch(a){r[1](a),t(a)}},reject:function(e){this.promise.$$state.status||this.$$reject(e)},$$reject:function(e){this.promise.$$state.value=e,this.promise.$$state.status=2,u(this.promise.$$state)},notify:function(n){var r=this.promise.$$state.pending;this.promise.$$state.status<=0&&r&&r.length&&e(function(){for(var e,i,a=0,o=r.length;o>a;a++){i=r[a][0],e=r[a][3];try{i.notify(x(e)?e(n):n)}catch(s){t(s)}}})}};var h=function(e){var t=new c;return t.reject(e),t.promise},m=function(e,t){var n=new c;return t?n.resolve(e):n.reject(e),n.promise},g=function(e,t,n){var r=null;try{x(n)&&(r=n())}catch(i){return m(i,!1)}return P(r)?r.then(function(){return m(e,t)},function(e){return m(e,!1)}):m(e,t)},v=function(e,t,n,r){var i=new c;return i.resolve(e),i.promise.then(t,n,r)},$=function b(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}if(!x(e))throw d("norslvr","Expected resolverFn, got '{0}'",e);if(!(this instanceof b))return new b(e);var r=new c;return e(t,n),r.promise};return $.defer=p,$.reject=h,$.when=v,$.all=f,$}function Kn(){this.$get=["$window","$timeout",function(e,t){function n(){for(var e=0;e<c.length;e++){var t=c[e];t&&(c[e]=null,t())}u=c.length=0}function r(e){var t=c.length;return u++,c.push(e),0===t&&(l=s(n)),function(){t>=0&&(c[t]=null,t=null,0===--u&&l&&(l(),l=null,c.length=0))}}var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame,a=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,o=!!i,s=o?function(e){var t=i(e);return function(){a(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};r.supported=o;var l,u=0,c=[];return r}]}function Yn(){function e(e){function t(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=u(),this.$$ChildScope=null}return t.prototype=e,t}var t=10,n=r("$rootScope"),o=null,s=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(r,l,c,f){function d(e){e.currentScope.$$destroyed=!0}function p(){this.$id=u(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function m(e){if(S.$$phase)throw n("inprog","{0} already in progress",S.$$phase);S.$$phase=e}function g(){S.$$phase=null}function $(e,t,n){do e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n];while(e=e.$parent)}function b(){}function w(){for(;A.length;)try{A.shift()()}catch(e){l(e)}s=null}function C(){null===s&&(s=f.defer(function(){S.$apply(w)}))}p.prototype={constructor:p,$new:function(t,n){var r;return n=n||this,t?(r=new p,r.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!=this)&&r.$on("$destroy",d),r},$watch:function(e,t,n){var r=c(e);if(r.$$watchDelegate)return r.$$watchDelegate(this,t,n,r);var i=this,a=i.$$watchers,s={fn:t,last:b,get:r,exp:e,eq:!!n};return o=null,x(t)||(s.fn=h),a||(a=i.$$watchers=[]),a.unshift(s),function(){I(a,s),o=null}},$watchGroup:function(e,t){function n(){l=!1,u?(u=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),o=[],s=this,l=!1,u=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(i,i,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,a){i[0]=e,r[0]=n,t(i,e===n?i:r,a)}):(a(e,function(e,t){var a=s.$watch(e,function(e,a){i[t]=e,r[t]=a,l||(l=!0,s.$evalAsync(n))});o.push(a)}),function(){for(;o.length;)o.shift()()})},$watchCollection:function(e,t){function n(e){a=e;var t,n,r,s,l;if(!v(a)){if(y(a))if(i(a)){o!==p&&(o=p,g=o.length=0,f++),t=a.length,g!==t&&(f++,o.length=g=t);for(var u=0;t>u;u++)l=o[u],s=a[u],r=l!==l&&s!==s,r||l===s||(f++,o[u]=s)}else{o!==h&&(o=h={},g=0,f++),t=0;for(n in a)a.hasOwnProperty(n)&&(t++,s=a[n],l=o[n],n in o?(r=l!==l&&s!==s,r||l===s||(f++,o[n]=s)):(g++,o[n]=s,f++));if(g>t){f++;for(n in o)a.hasOwnProperty(n)||(g--,delete o[n])}}else o!==a&&(o=a,f++);return f}}function r(){if(m?(m=!1,t(a,a,l)):t(a,s,l),u)if(y(a))if(i(a)){s=new Array(a.length);
for(var e=0;e<a.length;e++)s[e]=a[e]}else{s={};for(var n in a)Qr.call(a,n)&&(s[n]=a[n])}else s=a}n.$stateful=!0;var a,o,s,l=this,u=t.length>1,f=0,d=c(e,n),p=[],h={},m=!0,g=0;return this.$watch(d,r)},$digest:function(){var e,r,i,a,u,c,d,p,h,v,$=t,y=this,C=[];m("$digest"),f.$$checkUrlChange(),this===S&&null!==s&&(f.defer.cancel(s),w()),o=null;do{for(c=!1,p=y;E.length;){try{v=E.shift(),v.scope.$eval(v.expression,v.locals)}catch(A){l(A)}o=null}e:do{if(a=p.$$watchers)for(u=a.length;u--;)try{if(e=a[u])if((r=e.get(p))===(i=e.last)||(e.eq?_(r,i):"number"==typeof r&&"number"==typeof i&&isNaN(r)&&isNaN(i))){if(e===o){c=!1;break e}}else c=!0,o=e,e.last=e.eq?O(r,null):r,e.fn(r,i===b?r:i,p),5>$&&(h=4-$,C[h]||(C[h]=[]),C[h].push({msg:x(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:r,oldVal:i}))}catch(A){l(A)}if(!(d=p.$$childHead||p!==y&&p.$$nextSibling))for(;p!==y&&!(d=p.$$nextSibling);)p=p.$parent}while(p=d);if((c||E.length)&&!$--)throw g(),n("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",t,C)}while(c||E.length);for(g();T.length;)try{T.shift()()}catch(A){l(A)}},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==S){for(var t in this.$$listenerCount)$(this,this.$$listenerCount[t],t);e.$$childHead==this&&(e.$$childHead=this.$$nextSibling),e.$$childTail==this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=h,this.$on=this.$watch=this.$watchGroup=function(){return h},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(e,t){return c(e)(this,t)},$evalAsync:function(e,t){S.$$phase||E.length||f.defer(function(){E.length&&S.$digest()}),E.push({scope:this,expression:e,locals:t})},$$postDigest:function(e){T.push(e)},$apply:function(e){try{return m("$apply"),this.$eval(e)}catch(t){l(t)}finally{g();try{S.$digest()}catch(t){throw l(t),t}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&A.push(t),C()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++;while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,$(i,1,e))}},$emit:function(e){var t,n,r,i=[],a=this,o=!1,s={name:e,targetScope:a,stopPropagation:function(){o=!0},preventDefault:function(){s.defaultPrevented=!0},defaultPrevented:!1},u=H([s],arguments,1);do{for(t=a.$$listeners[e]||i,s.currentScope=a,n=0,r=t.length;r>n;n++)if(t[n])try{t[n].apply(null,u)}catch(c){l(c)}else t.splice(n,1),n--,r--;if(o)return s.currentScope=null,s;a=a.$parent}while(a);return s.currentScope=null,s},$broadcast:function(e){var t=this,n=t,r=t,i={name:e,targetScope:t,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1};if(!t.$$listenerCount[e])return i;for(var a,o,s,u=H([i],arguments,1);n=r;){for(i.currentScope=n,a=n.$$listeners[e]||[],o=0,s=a.length;s>o;o++)if(a[o])try{a[o].apply(null,u)}catch(c){l(c)}else a.splice(o,1),o--,s--;if(!(r=n.$$listenerCount[e]&&n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(r=n.$$nextSibling);)n=n.$parent}return i.currentScope=null,i}};var S=new p,E=S.$$asyncQueue=[],T=S.$$postDigestQueue=[],A=S.$$applyAsyncQueue=[];return S}]}function Jn(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return $(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return $(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,a=r?t:e;return i=ar(n).href,""===i||i.match(a)?n:"unsafe:"+i}}}function Qn(e){if("self"===e)return e;if(b(e)){if(e.indexOf("***")>-1)throw Ca("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=mi(e).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+e+"$")}if(S(e))return new RegExp("^"+e.source+"$");throw Ca("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Zn(e){var t=[];return $(e)&&a(e,function(e){t.push(Qn(e))}),t}function Xn(){this.SCE_CONTEXTS=xa;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Zn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Zn(e)),t},this.$get=["$injector",function(r){function i(e,t){return"self"===e?or(t):!!e.exec(t.href)}function a(n){var r,a,o=ar(n.toString()),s=!1;for(r=0,a=e.length;a>r;r++)if(i(e[r],o)){s=!0;break}if(s)for(r=0,a=t.length;a>r;r++)if(i(t[r],o)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function s(e,t){var r=d.hasOwnProperty(e)?d[e]:null;if(!r)throw Ca("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||t===n||""===t)return t;if("string"!=typeof t)throw Ca("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new r(t)}function l(e){return e instanceof f?e.$$unwrapTrustedValue():e}function u(e,t){if(null===t||t===n||""===t)return t;var r=d.hasOwnProperty(e)?d[e]:null;if(r&&t instanceof r)return t.$$unwrapTrustedValue();if(e===xa.RESOURCE_URL){if(a(t))return t;throw Ca("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===xa.HTML)return c(t);throw Ca("unsafe","Attempting to use an unsafe value in a safe context.")}var c=function(){throw Ca("unsafe","Attempting to use an unsafe value in a safe context.")};r.has("$sanitize")&&(c=r.get("$sanitize"));var f=o(),d={};return d[xa.HTML]=o(f),d[xa.CSS]=o(f),d[xa.URL]=o(f),d[xa.JS]=o(f),d[xa.RESOURCE_URL]=o(d[xa.URL]),{trustAs:s,getTrusted:u,valueOf:l}}]}function er(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&8>ti)throw Ca("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=L(xa);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=m),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var i=r.parseAs,o=r.getTrusted,s=r.trustAs;return a(xa,function(e,t){var n=Jr(t);r[mt("parse_as_"+n)]=function(t){return i(e,t)},r[mt("get_trusted_"+n)]=function(t){return o(e,t)},r[mt("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function tr(){this.$get=["$window","$document",function(e,t){var n,r,i={},a=d((/android (\d+)/.exec(Jr((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),s=t[0]||{},l=/^(Moz|webkit|ms)(?=[A-Z])/,u=s.body&&s.body.style,c=!1,f=!1;if(u){for(var p in u)if(r=l.exec(p)){n=r[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in u&&"webkit"),c=!!("transition"in u||n+"Transition"in u),f=!!("animation"in u||n+"Animation"in u),!a||c&&f||(c=b(s.body.style.webkitTransition),f=b(s.body.style.webkitAnimation))}return{history:!(!e.history||!e.history.pushState||4>a||o),hasEvent:function(e){if("input"===e&&11>=ti)return!1;if(v(i[e])){var t=s.createElement("div");i[e]="on"+e in t}return i[e]},csp:gi(),vendorPrefix:n,transitions:c,animations:f,android:a}}]}function nr(){this.$get=["$templateCache","$http","$q","$sce",function(e,t,n,r){function i(a,o){function s(e){if(!o)throw Qi("tpload","Failed to load template: {0}",a);return n.reject(e)}i.totalPendingRequests++,b(a)&&e.get(a)||(a=r.getTrustedResourceUrl(a));var l=t.defaults&&t.defaults.transformResponse;pi(l)?l=l.filter(function(e){return e!==an}):l===an&&(l=null);var u={cache:e,transformResponse:l};return t.get(a,u)["finally"](function(){i.totalPendingRequests--}).then(function(e){return e.data},s)}return i.totalPendingRequests=0,i}]}function rr(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=e.getElementsByClassName("ng-binding"),i=[];return a(r,function(e){var r=ci.element(e).data("$binding");r&&a(r,function(r){if(n){var a=new RegExp("(^|\\s)"+mi(t)+"(\\s|\\||$)");a.test(r)&&i.push(e)}else-1!=r.indexOf(t)&&i.push(e)})}),i},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var a=n?"=":"*=",o="["+r[i]+"model"+a+'"'+t+'"]',s=e.querySelectorAll(o);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function ir(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function a(a,s,l){var u,c=$(l)&&!l,f=(c?r:n).defer(),d=f.promise;return u=t.defer(function(){try{f.resolve(a())}catch(t){f.reject(t),i(t)}finally{delete o[d.$$timeoutId]}c||e.$apply()},s),d.$$timeoutId=u,o[u]=f,d}var o={};return a.cancel=function(e){return e&&e.$$timeoutId in o?(o[e.$$timeoutId].reject("canceled"),delete o[e.$$timeoutId],t.defer.cancel(e.$$timeoutId)):!1},a}]}function ar(e){var t=e;return ti&&(Sa.setAttribute("href",t),t=Sa.href),Sa.setAttribute("href",t),{href:Sa.href,protocol:Sa.protocol?Sa.protocol.replace(/:$/,""):"",host:Sa.host,search:Sa.search?Sa.search.replace(/^\?/,""):"",hash:Sa.hash?Sa.hash.replace(/^#/,""):"",hostname:Sa.hostname,port:Sa.port,pathname:"/"===Sa.pathname.charAt(0)?Sa.pathname:"/"+Sa.pathname}}function or(e){var t=b(e)?ar(e):e;return t.protocol===Ea.protocol&&t.host===Ea.host}function sr(){this.$get=g(e)}function lr(e){function t(r,i){if(y(r)){var o={};return a(r,function(e,n){o[n]=t(n,e)}),o}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",dr),t("date",Er),t("filter",ur),t("json",Tr),t("limitTo",Ar),t("lowercase",Na),t("number",pr),t("orderBy",Rr),t("uppercase",Pa)}function ur(){return function(e,t,n){if(!pi(e))return e;var r,i,a=null!==t?typeof t:"null";switch(a){case"function":r=t;break;case"boolean":case"null":case"number":case"string":i=!0;case"object":r=cr(t,n,i);break;default:return e}return e.filter(r)}}function cr(e,t,n){var r,i=y(e)&&"$"in e;return t===!0?t=_:x(t)||(t=function(e,t){return v(e)?!1:null===e||null===t?e===t:y(e)||y(t)?!1:(e=Jr(""+e),t=Jr(""+t),-1!==e.indexOf(t))}),r=function(r){return i&&!y(r)?fr(r,e.$,t,!1):fr(r,e,t,n)}}function fr(e,t,n,r,i){var a=null!==e?typeof e:"null",o=null!==t?typeof t:"null";if("string"===o&&"!"===t.charAt(0))return!fr(e,t.substring(1),n,r);if(pi(e))return e.some(function(e){return fr(e,t,n,r)});switch(a){case"object":var s;if(r){for(s in e)if("$"!==s.charAt(0)&&fr(e[s],t,n,!0))return!0;return i?!1:fr(e,t,n,!1)}if("object"===o){for(s in t){var l=t[s];if(!x(l)&&!v(l)){var u="$"===s,c=u?e:e[s];if(!fr(c,l,n,u,u))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function dr(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return v(n)&&(n=t.CURRENCY_SYM),v(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:hr(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function pr(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:hr(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function hr(e,t,n,r,i){if(!isFinite(e)||y(e))return"";var a=0>e;e=Math.abs(e);var o=e+"",s="",l=[],u=!1;if(-1!==o.indexOf("e")){var c=o.match(/([\d\.]+)e(-?)(\d+)/);c&&"-"==c[2]&&c[3]>i+1?e=0:(s=o,u=!0)}if(u)i>0&&1>e&&(s=e.toFixed(i),e=parseFloat(s));else{var f=(o.split(Ta)[1]||"").length;v(i)&&(i=Math.min(Math.max(t.minFrac,f),t.maxFrac)),e=+(Math.round(+(e.toString()+"e"+i)).toString()+"e"+-i);var d=(""+e).split(Ta),p=d[0];d=d[1]||"";var h,m=0,g=t.lgSize,$=t.gSize;if(p.length>=g+$)for(m=p.length-g,h=0;m>h;h++)(m-h)%$===0&&0!==h&&(s+=n),s+=p.charAt(h);for(h=m;h<p.length;h++)(p.length-h)%g===0&&0!==h&&(s+=n),s+=p.charAt(h);for(;d.length<i;)d+="0";i&&"0"!==i&&(s+=r+d.substr(0,i))}return 0===e&&(a=!1),l.push(a?t.negPre:t.posPre,s,a?t.negSuf:t.posSuf),l.join("")}function mr(e,t,n){var r="";for(0>e&&(r="-",e=-e),e=""+e;e.length<t;)e="0"+e;return n&&(e=e.substr(e.length-t)),r+e}function gr(e,t,n,r){return n=n||0,function(i){var a=i["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12==n&&(a=12),mr(a,t,r)}}function vr(e,t){return function(n,r){var i=n["get"+e](),a=Zr(t?"SHORT"+e:e);return r[a][i]}}function $r(e){var t=-1*e.getTimezoneOffset(),n=t>=0?"+":"";return n+=mr(Math[t>0?"floor":"ceil"](t/60),2)+mr(Math.abs(t%60),2)}function yr(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(4>=t?5:12)-t)}function br(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function wr(e){return function(t){var n=yr(t.getFullYear()),r=br(t),i=+r-+n,a=1+Math.round(i/6048e5);return mr(a,e)}}function Cr(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function xr(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function Sr(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function Er(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,a=0,o=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=d(t[9]+t[10]),a=d(t[9]+t[11])),o.call(r,d(t[1]),d(t[2])-1,d(t[3]));var l=d(t[4]||0)-i,u=d(t[5]||0)-a,c=d(t[6]||0),f=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,l,u,c,f),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var o,s,l="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,b(n)&&(n=ka.test(n)?d(n):t(n)),w(n)&&(n=new Date(n)),!C(n))return n;for(;r;)s=Ra.exec(r),s?(u=H(u,s,1),r=u.pop()):(u.push(r),r=null);return i&&"UTC"===i&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),a(u,function(t){o=Aa[t],l+=o?o(n,e.DATETIME_FORMATS):t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function Tr(){return function(e,t){return v(t)&&(t=2),q(e,t)}}function Ar(){return function(e,t){return w(e)&&(e=e.toString()),pi(e)||b(e)?(t=1/0===Math.abs(Number(t))?Number(t):d(t),t?t>0?e.slice(0,t):e.slice(t):b(e)?"":[]):e}}function Rr(e){return function(t,n,r){function a(e,t){for(var r=0;r<n.length;r++){var i=n[r](e,t);if(0!==i)return i}return 0}function o(e,t){return t?function(t,n){return e(n,t)}:e}function s(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function l(e){return null===e?"null":"function"==typeof e.valueOf&&(e=e.valueOf(),s(e))?e:"function"==typeof e.toString&&(e=e.toString(),s(e))?e:""}function u(e,t){var n=typeof e,r=typeof t;return n===r&&"object"===n&&(e=l(e),t=l(t)),n===r?("string"===n&&(e=e.toLowerCase(),t=t.toLowerCase()),e===t?0:t>e?-1:1):r>n?-1:1}return i(t)?(n=pi(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(t){var n=!1,r=t||m;if(b(t)){if(("+"==t.charAt(0)||"-"==t.charAt(0))&&(n="-"==t.charAt(0),t=t.substring(1)),""===t)return o(u,n);if(r=e(t),r.constant){var i=r();return o(function(e,t){return u(e[i],t[i])},n)}}return o(function(e,t){return u(r(e),r(t))},n)}),ai.call(t).sort(o(a,r))):t}}function kr(e){return x(e)&&(e={link:e}),e.restrict=e.restrict||"AC",g(e)}function Nr(e,t){e.$name=t}function Pr(e,t,r,i,o){var s=this,l=[],u=s.$$parentForm=e.parent().controller("form")||Ma;s.$error={},s.$$success={},s.$pending=n,s.$name=o(t.name||t.ngForm||"")(r),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,u.$addControl(s),s.$rollbackViewValue=function(){a(l,function(e){e.$rollbackViewValue()})},s.$commitViewValue=function(){a(l,function(e){e.$commitViewValue()})},s.$addControl=function(e){ot(e.$name,"input"),l.push(e),e.$name&&(s[e.$name]=e)},s.$$renameControl=function(e,t){var n=e.$name;s[n]===e&&delete s[n],s[t]=e,e.$name=t},s.$removeControl=function(e){e.$name&&s[e.$name]===e&&delete s[e.$name],a(s.$pending,function(t,n){s.$setValidity(n,null,e)}),a(s.$error,function(t,n){s.$setValidity(n,null,e)}),a(s.$$success,function(t,n){s.$setValidity(n,null,e)}),I(l,e)},Wr({ctrl:this,$element:e,set:function(e,t,n){var r=e[t];if(r){var i=r.indexOf(n);-1===i&&r.push(n)}else e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(I(r,n),0===r.length&&delete e[t])},parentForm:u,$animate:i}),s.$setDirty=function(){i.removeClass(e,vo),i.addClass(e,$o),s.$dirty=!0,s.$pristine=!1,u.$setDirty()},s.$setPristine=function(){i.setClass(e,vo,$o+" "+Ia),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,a(l,function(e){e.$setPristine()})},s.$setUntouched=function(){a(l,function(e){e.$setUntouched()})},s.$setSubmitted=function(){i.addClass(e,Ia),s.$submitted=!0,u.$setSubmitted()}}function Ur(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function Dr(e,t,n,r,i,a){Mr(e,t,n,r,i,a),Ur(r)}function Mr(e,t,n,r,i,a){var o=Jr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,l()})}var l=function(e){if(u&&(a.defer.cancel(u),u=null),!s){var i=t.val(),l=e&&e.type;"password"===o||n.ngTrim&&"false"===n.ngTrim||(i=hi(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,l)}};if(i.hasEvent("input"))t.on("input",l);else{var u,c=function(e,t,n){u||(u=a.defer(function(){u=null,t&&t.value===n||l(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||t>15&&19>t||t>=37&&40>=t||c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",l),r.$render=function(){t.val(r.$isEmpty(r.$viewValue)?"":r.$viewValue)}}function Ir(e,t){if(C(e))return e;if(b(e)){za.lastIndex=0;var n=za.exec(e);if(n){var r=+n[1],i=+n[2],a=0,o=0,s=0,l=0,u=yr(r),c=7*(i-1);return t&&(a=t.getHours(),o=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(r,0,u.getDate()+c,a,o,s,l)}}return 0/0}function Or(e,t){return function(n,r){var i,o;if(C(n))return n;if(b(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ha.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),o=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},a(i,function(e,n){n<t.length&&(o[t[n]]=+e)}),new Date(o.yyyy,o.MM-1,o.dd,o.HH,o.mm,o.ss||0,1e3*o.sss||0)}return 0/0}}function Lr(e,t,r,i){return function(a,o,s,l,u,c,f){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function p(e){return $(e)?C(e)?e:r(e):n}_r(a,o,s,l),Mr(a,o,s,l,u,c);var h,m=l&&l.$options&&l.$options.timezone;if(l.$$parserName=e,l.$parsers.push(function(e){if(l.$isEmpty(e))return null;if(t.test(e)){var i=r(e,h);return"UTC"===m&&i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),i}return n}),l.$formatters.push(function(e){if(e&&!C(e))throw Co("datefmt","Expected `{0}` to be a date",e);if(d(e)){if(h=e,h&&"UTC"===m){var t=6e4*h.getTimezoneOffset();h=new Date(h.getTime()+t)}return f("date")(e,i,m)}return h=null,""}),$(s.min)||s.ngMin){var g;l.$validators.min=function(e){return!d(e)||v(g)||r(e)>=g},s.$observe("min",function(e){g=p(e),l.$validate()})}if($(s.max)||s.ngMax){var y;l.$validators.max=function(e){return!d(e)||v(y)||r(e)<=y},s.$observe("max",function(e){y=p(e),l.$validate()})}}}function _r(e,t,r,i){var a=t[0],o=i.$$hasNativeValidators=y(a.validity);o&&i.$parsers.push(function(e){var r=t.prop(Yr)||{};return r.badInput&&!r.typeMismatch?n:e})}function Hr(e,t,r,i,a,o){if(_r(e,t,r,i),Mr(e,t,r,i,a,o),i.$$parserName="number",i.$parsers.push(function(e){return i.$isEmpty(e)?null:Ba.test(e)?parseFloat(e):n}),i.$formatters.push(function(e){if(!i.$isEmpty(e)){if(!w(e))throw Co("numfmt","Expected `{0}` to be a number",e);e=e.toString()}return e}),$(r.min)||r.ngMin){var s;i.$validators.min=function(e){return i.$isEmpty(e)||v(s)||e>=s},r.$observe("min",function(e){$(e)&&!w(e)&&(e=parseFloat(e,10)),s=w(e)&&!isNaN(e)?e:n,i.$validate()})}if($(r.max)||r.ngMax){var l;i.$validators.max=function(e){return i.$isEmpty(e)||v(l)||l>=e},r.$observe("max",function(e){$(e)&&!w(e)&&(e=parseFloat(e,10)),l=w(e)&&!isNaN(e)?e:n,i.$validate()})}}function Fr(e,t,n,r,i,a){Mr(e,t,n,r,i,a),Ur(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||Fa.test(n)}}function jr(e,t,n,r,i,a){Mr(e,t,n,r,i,a),Ur(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||ja.test(n)}}function Br(e,t,n,r){v(n.name)&&t.attr("name",u());var i=function(e){t[0].checked&&r.$setViewValue(n.value,e&&e.type)};t.on("click",i),r.$render=function(){var e=n.value;t[0].checked=e==r.$viewValue},n.$observe("value",r.$render)}function qr(e,t,n,r,i){var a;if($(r)){if(a=e(r),!a.constant)throw Co("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return a(t)}return i}function Vr(e,t,n,r,i,a,o,s){var l=qr(s,e,"ngTrueValue",n.ngTrueValue,!0),u=qr(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return e===!1},r.$formatters.push(function(e){return _(e,l)}),r.$parsers.push(function(e){return e?l:u})}function zr(e,t){return e="ngClass"+e,["$animate",function(n){function r(e,t){var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],a=0;a<t.length;a++)if(i==t[a])continue e;n.push(i)}return n}function i(e){if(pi(e))return e;if(b(e))return e.split(" ");if(y(e)){var t=[];return a(e,function(e,n){e&&(t=t.concat(n.split(" ")))}),t}return e}return{restrict:"AC",link:function(o,s,l){function u(e){var t=f(e,1);l.$addClass(t)}function c(e){var t=f(e,-1);l.$removeClass(t)}function f(e,t){var n=s.data("$classCounts")||{},r=[];return a(e,function(e){(t>0||n[e])&&(n[e]=(n[e]||0)+t,n[e]===+(t>0)&&r.push(e))}),s.data("$classCounts",n),r.join(" ")}function d(e,t){var i=r(t,e),a=r(e,t);i=f(i,1),a=f(a,-1),i&&i.length&&n.addClass(s,i),a&&a.length&&n.removeClass(s,a)}function p(e){if(t===!0||o.$index%2===t){var n=i(e||[]);if(h){if(!_(e,h)){var r=i(h);d(r,n)}}else u(n)}h=L(e)}var h;o.$watch(l[e],p,!0),l.$observe("class",function(){p(o.$eval(l[e]))}),"ngClass"!==e&&o.$watch("$index",function(n,r){var a=1&n;if(a!==(1&r)){var s=i(o.$eval(l[e]));a===t?u(s):c(s)}})}}}]}function Wr(e){function t(e,t,l){t===n?r("$pending",e,l):i("$pending",e,l),N(t)?t?(f(s.$error,e,l),c(s.$$success,e,l)):(c(s.$error,e,l),f(s.$$success,e,l)):(f(s.$error,e,l),f(s.$$success,e,l)),s.$pending?(a(wo,!0),s.$valid=s.$invalid=n,o("",null)):(a(wo,!1),s.$valid=Gr(s.$error),s.$invalid=!s.$valid,o("",s.$valid));var u;u=s.$pending&&s.$pending[e]?n:s.$error[e]?!1:s.$$success[e]?!0:null,o(e,u),d.$setValidity(e,u,s)}function r(e,t,n){s[e]||(s[e]={}),c(s[e],t,n)}function i(e,t,r){s[e]&&f(s[e],t,r),Gr(s[e])&&(s[e]=n)}function a(e,t){t&&!u[e]?(p.addClass(l,e),u[e]=!0):!t&&u[e]&&(p.removeClass(l,e),u[e]=!1)}function o(e,t){e=e?"-"+nt(e,"-"):"",a(mo+e,t===!0),a(go+e,t===!1)}var s=e.ctrl,l=e.$element,u={},c=e.set,f=e.unset,d=e.parentForm,p=e.$animate;u[go]=!(u[mo]=l.hasClass(mo)),s.$setValidity=t}function Gr(e){if(e)for(var t in e)return!1;return!0}var Kr=/^\/(.+)\/([a-z]*)$/,Yr="validity",Jr=function(e){return b(e)?e.toLowerCase():e},Qr=Object.prototype.hasOwnProperty,Zr=function(e){return b(e)?e.toUpperCase():e},Xr=function(e){return b(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},ei=function(e){return b(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Jr=Xr,Zr=ei);var ti,ni,ri,ii,ai=[].slice,oi=[].splice,si=[].push,li=Object.prototype.toString,ui=r("ng"),ci=e.angular||(e.angular={}),fi=0;ti=t.documentMode,h.$inject=[],m.$inject=[];var di,pi=Array.isArray,hi=function(e){return b(e)?e.trim():e},mi=function(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},gi=function(){if($(gi.isActive_))return gi.isActive_;var e=!(!t.querySelector("[ng-csp]")&&!t.querySelector("[data-ng-csp]"));if(!e)try{new Function("")}catch(n){e=!0}return gi.isActive_=e},vi=["ng-","data-ng-","ng:","x-ng-"],$i=/[A-Z]/g,yi=!1,bi=1,wi=2,Ci=3,xi=8,Si=9,Ei=11,Ti={full:"1.3.20",major:1,minor:3,dot:20,codeName:"shallow-translucence"};bt.expando="ng339";var Ai=bt.cache={},Ri=1,ki=function(e,t,n){e.addEventListener(t,n,!1)},Ni=function(e,t,n){e.removeEventListener(t,n,!1)};bt._data=function(e){return this.cache[e[this.expando]]||{}};var Pi=/([\:\-\_]+(.))/g,Ui=/^moz([A-Z])/,Di={mouseleave:"mouseout",mouseenter:"mouseover"},Mi=r("jqLite"),Ii=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Oi=/<|&#?\w+;/,Li=/<([\w:]+)/,_i=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Hi={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Hi.optgroup=Hi.option,Hi.tbody=Hi.tfoot=Hi.colgroup=Hi.caption=Hi.thead,Hi.th=Hi.td;var Fi=bt.prototype={ready:function(n){function r(){i||(i=!0,n())}var i=!1;"complete"===t.readyState?setTimeout(r):(this.on("DOMContentLoaded",r),bt(e).on("load",r))},toString:function(){var e=[];return a(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return ni(e>=0?this[e]:this[this.length+e])},length:0,push:si,sort:[].sort,splice:[].splice},ji={};a("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){ji[Jr(e)]=e});var Bi={};a("input,select,option,textarea,button,form,details".split(","),function(e){Bi[e]=!0});var qi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};a({data:Tt,removeData:St},function(e,t){bt[t]=e}),a({data:Tt,inheritedData:Ut,scope:function(e){return ni.data(e,"$scope")||Ut(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return ni.data(e,"$isolateScope")||ni.data(e,"$isolateScopeNoTemplate")},controller:Pt,injector:function(e){return Ut(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:At,css:function(e,t,n){return t=mt(t),$(n)?void(e.style[t]=n):e.style[t]},attr:function(e,t,r){var i=e.nodeType;if(i!==Ci&&i!==wi&&i!==xi){var a=Jr(t);if(ji[a]){if(!$(r))return e[t]||(e.attributes.getNamedItem(t)||h).specified?a:n;r?(e[t]=!0,e.setAttribute(t,a)):(e[t]=!1,e.removeAttribute(a))}else if($(r))e.setAttribute(t,r);else if(e.getAttribute){var o=e.getAttribute(t,2);return null===o?n:o}}},prop:function(e,t,n){return $(n)?void(e[t]=n):e[t]},text:function(){function e(e,t){if(v(t)){var n=e.nodeType;return n===bi||n===Ci?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(v(t)){if(e.multiple&&"select"===M(e)){var n=[];return a(e.options,function(e){e.selected&&n.push(e.value||e.text)}),0===n.length?null:n}return e.value}e.value=t},html:function(e,t){return v(t)?e.innerHTML:(Ct(e,!0),void(e.innerHTML=t))},empty:Dt},function(e,t){bt.prototype[t]=function(t,r){var i,a,o=this.length;if(e!==Dt&&(2==e.length&&e!==At&&e!==Pt?t:r)===n){if(y(t)){for(i=0;o>i;i++)if(e===Tt)e(this[i],t);else for(a in t)e(this[i],a,t[a]);return this}for(var s=e.$dv,l=s===n?Math.min(o,1):o,u=0;l>u;u++){var c=e(this[u],t,r);s=s?s+c:c}return s}for(i=0;o>i;i++)e(this[i],t,r);return this}}),a({removeData:St,on:function Yo(e,t,n,r){if($(r))throw Mi("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(vt(e)){var i=Et(e,!0),a=i.events,o=i.handle;o||(o=i.handle=_t(e,a));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length;l--;){t=s[l];var u=a[t];u||(a[t]=[],"mouseenter"===t||"mouseleave"===t?Yo(e,Di[t],function(e){var n=this,r=e.relatedTarget;(!r||r!==n&&!n.contains(r))&&o(e,t)}):"$destroy"!==t&&ki(e,t,o),u=a[t]),u.push(n)}}},off:xt,one:function(e,t,n){e=ni(e),e.on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Ct(e),a(new bt(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return a(e.childNodes,function(e){e.nodeType===bi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===bi||n===Ei){t=new bt(t);for(var r=0,i=t.length;i>r;r++){var a=t[r];e.appendChild(a)}}},prepend:function(e,t){if(e.nodeType===bi){var n=e.firstChild;a(new bt(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){t=ni(t).eq(0).clone()[0];var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)},remove:Mt,detach:function(e){Mt(e,!0)},after:function(e,t){var n=e,r=e.parentNode;t=new bt(t);for(var i=0,a=t.length;a>i;i++){var o=t[i];r.insertBefore(o,n.nextSibling),n=o}},addClass:kt,removeClass:Rt,toggleClass:function(e,t,n){t&&a(t.split(" "),function(t){var r=n;v(r)&&(r=!At(e,t)),(r?kt:Rt)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Ei?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:wt,triggerHandler:function(e,t,n){var r,i,o,s=t.type||t,l=Et(e),u=l&&l.events,c=u&&u[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:h,type:s,target:e},t.type&&(r=f(r,t)),i=L(c),o=n?[r].concat(n):[r],a(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,o)}))}},function(e,t){bt.prototype[t]=function(t,n,r){for(var i,a=0,o=this.length;o>a;a++)v(i)?(i=e(this[a],t,n,r),$(i)&&(i=ni(i))):Nt(i,e(this[a],t,n,r));return $(i)?i:this},bt.prototype.bind=bt.prototype.on,bt.prototype.unbind=bt.prototype.off}),jt.prototype={put:function(e,t){this[Ft(e,this.nextUid)]=t},get:function(e){return this[Ft(e,this.nextUid)]},remove:function(e){var t=this[e=Ft(e,this.nextUid)];return delete this[e],t}};var Vi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,zi=/,/,Wi=/^\s*(_?)(\S+?)\1\s*$/,Gi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ki=r("$injector");Vt.$$annotate=qt;var Yi=r("$animate"),Ji=["$provide",function(e){this.$$selectors={},this.register=function(t,n){var r=t+"-animation";if(t&&"."!=t.charAt(0))throw Yi("notcsel","Expecting class selector starting with '.' got '{0}'.",t);this.$$selectors[t.substr(1)]=r,e.factory(r,n)},this.classNameFilter=function(e){return 1===arguments.length&&(this.$$classNameFilter=e instanceof RegExp?e:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(e,t,n){function r(t){var r,i=e.defer();return i.promise.$$cancelFn=function(){r&&r()},n.$$postDigest(function(){r=t(function(){i.resolve()})}),i.promise}function i(e,t){var n=[],r=[],i=ut();return a((e.attr("class")||"").split(/\s+/),function(e){i[e]=!0}),a(t,function(e,t){var a=i[t];e===!1&&a?r.push(t):e!==!0||a||n.push(t)}),n.length+r.length>0&&[n.length?n:null,r.length?r:null]}function o(e,t,n){for(var r=0,i=t.length;i>r;++r){var a=t[r];e[a]=n}}function s(){return u||(u=e.defer(),t(function(){u.resolve(),u=null})),u.promise}function l(e,t){if(ci.isObject(t)){var n=f(t.from||{},t.to||{});e.css(n)}}var u;return{animate:function(e,t,n){return l(e,{from:t,to:n}),s()},enter:function(e,t,n,r){return l(e,r),n?n.after(e):t.prepend(e),s()},leave:function(e,t){return l(e,t),e.remove(),s()},move:function(e,t,n,r){return this.enter(e,t,n,r)},addClass:function(e,t,n){return this.setClass(e,t,[],n)},$$addClassImmediately:function(e,t,n){return e=ni(e),t=b(t)?t:pi(t)?t.join(" "):"",a(e,function(e){kt(e,t)}),l(e,n),s()},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},$$removeClassImmediately:function(e,t,n){return e=ni(e),t=b(t)?t:pi(t)?t.join(" "):"",a(e,function(e){Rt(e,t)
}),l(e,n),s()},setClass:function(e,t,n,a){var s=this,l="$$animateClasses",u=!1;e=ni(e);var c=e.data(l);c?a&&c.options&&(c.options=ci.extend(c.options||{},a)):(c={classes:{},options:a},u=!0);var f=c.classes;return t=pi(t)?t:t.split(" "),n=pi(n)?n:n.split(" "),o(f,t,!0),o(f,n,!1),u&&(c.promise=r(function(t){var n=e.data(l);if(e.removeData(l),n){var r=i(e,n.classes);r&&s.$$setClassImmediately(e,r[0],r[1],n.options)}t()}),e.data(l,c)),c.promise},$$setClassImmediately:function(e,t,n,r){return t&&this.$$addClassImmediately(e,t),n&&this.$$removeClassImmediately(e,n),l(e,r),s()},enabled:h,cancel:h}}]}],Qi=r("$compile");Qt.$inject=["$provide","$$sanitizeUriProvider"];var Zi=/^((?:x|data)[\:\-_])/i,Xi=r("$controller"),ea="application/json",ta={"Content-Type":ea+";charset=utf-8"},na=/^\[|^\{(?!\{)/,ra={"[":/]$/,"{":/}$/},ia=/^\)\]\}',?\n/,aa=r("$interpolate"),oa=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,sa={http:80,https:443,ftp:21},la=r("$location"),ua={$$html5:!1,$$replace:!1,absUrl:kn("$$absUrl"),url:function(e){if(v(e))return this.$$url;var t=oa.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:kn("$$protocol"),host:kn("$$host"),port:kn("$$port"),path:Nn("$$path",function(e){return e=null!==e?e.toString():"","/"==e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(b(e)||w(e))e=e.toString(),this.$$search=G(e);else{if(!y(e))throw la("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");e=O(e,{}),a(e,function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:v(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:Nn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};a([Rn,An,Tn],function(e){e.prototype=Object.create(ua),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Tn||!this.$$html5)throw la("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=v(t)?null:t,this}});var ca=r("$parse"),fa=Function.prototype.call,da=Function.prototype.apply,pa=Function.prototype.bind,ha=ut();a({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(e,t){e.constant=e.literal=e.sharedGetter=!0,ha[t]=e}),ha["this"]=function(e){return e},ha["this"].sharedGetter=!0;var ma=f(ut(),{"+":function(e,t,r,i){return r=r(e,t),i=i(e,t),$(r)?$(i)?r+i:r:$(i)?i:n},"-":function(e,t,n,r){return n=n(e,t),r=r(e,t),($(n)?n:0)-($(r)?r:0)},"*":function(e,t,n,r){return n(e,t)*r(e,t)},"/":function(e,t,n,r){return n(e,t)/r(e,t)},"%":function(e,t,n,r){return n(e,t)%r(e,t)},"===":function(e,t,n,r){return n(e,t)===r(e,t)},"!==":function(e,t,n,r){return n(e,t)!==r(e,t)},"==":function(e,t,n,r){return n(e,t)==r(e,t)},"!=":function(e,t,n,r){return n(e,t)!=r(e,t)},"<":function(e,t,n,r){return n(e,t)<r(e,t)},">":function(e,t,n,r){return n(e,t)>r(e,t)},"<=":function(e,t,n,r){return n(e,t)<=r(e,t)},">=":function(e,t,n,r){return n(e,t)>=r(e,t)},"&&":function(e,t,n,r){return n(e,t)&&r(e,t)},"||":function(e,t,n,r){return n(e,t)||r(e,t)},"!":function(e,t,n){return!n(e,t)},"=":!0,"|":!0}),ga={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},va=function(e){this.options=e};va.prototype={constructor:va,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=ma[t],a=ma[n],o=ma[r];if(i||a||o){var s=o?r:a?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(e){return e>="0"&&"9">=e&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"	"===e||"\n"===e||""===e||" "===e},isIdent:function(e){return e>="a"&&"z">=e||e>="A"&&"Z">=e||"_"===e||"$"===e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=$(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw ca("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Jr(this.text.charAt(this.index));if("."==n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"==n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"==e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!=e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){for(var e=this.index;this.index<this.text.length;){var t=this.text.charAt(this.index);if(!this.isIdent(t)&&!this.isNumber(t))break;this.index++}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var a=this.text.charAt(this.index);if(r+=a,i){if("u"===a){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+o+"]"),this.index+=4,n+=String.fromCharCode(parseInt(o,16))}else{var s=ga[a];n+=s||a}i=!1}else if("\\"===a)i=!0;else{if(a===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=a}this.index++}this.throwError("Unterminated quote",t)}};var $a=function(e,t,n){this.lexer=e,this.$filter=t,this.options=n};$a.ZERO=f(function(){return 0},{sharedGetter:!0,constant:!0}),$a.prototype={constructor:$a,parse:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.peek().identifier&&this.peek().text in ha?e=ha[this.consume().text]:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t,n;t=this.expect("(","[",".");)"("===t.text?(e=this.functionCall(e,n),n=null):"["===t.text?(n=e,e=this.objectIndex(e)):"."===t.text?(n=e,e=this.fieldAccess(e)):this.throwError("IMPOSSIBLE");return e},throwError:function(e,t){throw ca("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},peekToken:function(){if(0===this.tokens.length)throw ca("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var a=this.tokens[e],o=a.text;if(o===t||o===n||o===r||o===i||!t&&!n&&!r&&!i)return a}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return i?(this.tokens.shift(),i):!1},consume:function(e){if(0===this.tokens.length)throw ca("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},unaryFn:function(e,t){var n=ma[e];return f(function(e,r){return n(e,r,t)},{constant:t.constant,inputs:[t]})},binaryFn:function(e,t,n,r){var i=ma[t];return f(function(t,r){return i(t,r,e,n)},{constant:e.constant&&n.constant,inputs:!r&&[e,n]})},identifier:function(){for(var e=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)e+=this.consume().text+this.consume().text;return Bn(e,this.options,this.text)},constant:function(){var e=this.consume().value;return f(function(){return e},{constant:!0,literal:!0})},statements:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.filterChain()),!this.expect(";"))return 1===e.length?e[0]:function(t,n){for(var r,i=0,a=e.length;a>i;i++)r=e[i](t,n);return r}},filterChain:function(){for(var e,t=this.expression();e=this.expect("|");)t=this.filter(t);return t},filter:function(e){var t,r,i=this.$filter(this.consume().text);if(this.peek(":"))for(t=[],r=[];this.expect(":");)t.push(this.expression());var a=[e].concat(t||[]);return f(function(a,o){var s=e(a,o);if(r){r[0]=s;for(var l=t.length;l--;)r[l+1]=t[l](a,o);return i.apply(n,r)}return i(s)},{constant:!i.$stateful&&a.every(Ln),inputs:!i.$stateful&&a})},expression:function(){return this.assignment()},assignment:function(){var e,t,n=this.ternary();return(t=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,t.index)+"] can not be assigned to",t),e=this.ternary(),f(function(t,r){return n.assign(t,e(t,r),r)},{inputs:[n,e]})):n},ternary:function(){var e,t,n=this.logicalOR();if((t=this.expect("?"))&&(e=this.assignment(),this.consume(":"))){var r=this.assignment();return f(function(t,i){return n(t,i)?e(t,i):r(t,i)},{constant:n.constant&&e.constant&&r.constant})}return n},logicalOR:function(){for(var e,t=this.logicalAND();e=this.expect("||");)t=this.binaryFn(t,e.text,this.logicalAND(),!0);return t},logicalAND:function(){for(var e,t=this.equality();e=this.expect("&&");)t=this.binaryFn(t,e.text,this.equality(),!0);return t},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=this.binaryFn(t,e.text,this.relational());return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=this.binaryFn(t,e.text,this.additive());return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=this.binaryFn(t,e.text,this.multiplicative());return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=this.binaryFn(t,e.text,this.unary());return t},unary:function(){var e;return this.expect("+")?this.primary():(e=this.expect("-"))?this.binaryFn($a.ZERO,e.text,this.unary()):(e=this.expect("!"))?this.unaryFn(e.text,this.unary()):this.primary()},fieldAccess:function(e){var t=this.identifier();return f(function(r,i,a){var o=a||e(r,i);return null==o?n:t(o)},{assign:function(n,r,i){var a=e(n,i);return a||e.assign(n,a={},i),t.assign(a,r)}})},objectIndex:function(e){var t=this.text,r=this.expression();return this.consume("]"),f(function(i,a){var o,s=e(i,a),l=Mn(r(i,a),t);return Dn(l,t),s?o=In(s[l],t):n},{assign:function(n,i,a){var o=Dn(Mn(r(n,a),t),t),s=In(e(n,a),t);return s||e.assign(n,s={},a),s[o]=i}})},functionCall:function(e,t){var r=[];if(")"!==this.peekToken().text)do r.push(this.expression());while(this.expect(","));this.consume(")");var i=this.text,a=r.length?[]:null;return function(o,s){var l=t?t(o,s):$(t)?n:o,u=e(o,s,l)||h;if(a)for(var c=r.length;c--;)a[c]=In(r[c](o,s),i);In(l,i),On(u,i);var f=u.apply?u.apply(l,a):u(a[0],a[1],a[2],a[3],a[4]);return a&&(a.length=0),In(f,i)}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),f(function(t,n){for(var r=[],i=0,a=e.length;a>i;i++)r.push(e[i](t,n));return r},{literal:!0,constant:e.every(Ln),inputs:e})},object:function(){var e=[],t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?e.push(n.value):n.identifier?e.push(n.text):this.throwError("invalid key",n),this.consume(":"),t.push(this.expression())}while(this.expect(","));return this.consume("}"),f(function(n,r){for(var i={},a=0,o=t.length;o>a;a++)i[e[a]]=t[a](n,r);return i},{literal:!0,constant:t.every(Ln),inputs:t})}};var ya=ut(),ba=ut(),wa=Object.prototype.valueOf,Ca=r("$sce"),xa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Qi=r("$compile"),Sa=t.createElement("a"),Ea=ar(e.location.href);lr.$inject=["$provide"],dr.$inject=["$locale"],pr.$inject=["$locale"];var Ta=".",Aa={yyyy:gr("FullYear",4),yy:gr("FullYear",2,0,!0),y:gr("FullYear",1),MMMM:vr("Month"),MMM:vr("Month",!0),MM:gr("Month",2,1),M:gr("Month",1,1),dd:gr("Date",2),d:gr("Date",1),HH:gr("Hours",2),H:gr("Hours",1),hh:gr("Hours",2,-12),h:gr("Hours",1,-12),mm:gr("Minutes",2),m:gr("Minutes",1),ss:gr("Seconds",2),s:gr("Seconds",1),sss:gr("Milliseconds",3),EEEE:vr("Day"),EEE:vr("Day",!0),a:Cr,Z:$r,ww:wr(2),w:wr(1),G:xr,GG:xr,GGG:xr,GGGG:Sr},Ra=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,ka=/^\-?\d+$/;Er.$inject=["$locale"];var Na=g(Jr),Pa=g(Zr);Rr.$inject=["$parse"];var Ua=g({restrict:"E",compile:function(e,t){return t.href||t.xlinkHref||t.name?void 0:function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===li.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),Da={};a(ji,function(e,t){if("multiple"!=e){var n=Zt("ng-"+t);Da[n]=function(){return{restrict:"A",priority:100,link:function(e,r,i){e.$watch(i[n],function(e){i.$set(t,!!e)})}}}}}),a(qi,function(e,t){Da[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"==r.ngPattern.charAt(0)){var i=r.ngPattern.match(Kr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),a(["src","srcset","href"],function(e){var t=Zt("ng-"+e);Da[t]=function(){return{priority:99,link:function(n,r,i){var a=e,o=e;"href"===e&&"[object SVGAnimatedString]"===li.call(r.prop("href"))&&(o="xlinkHref",i.$attr[o]="xlink:href",a=null),i.$observe(t,function(t){return t?(i.$set(o,t),void(ti&&a&&r.prop(a,i[o]))):void("href"===e&&i.$set(o,null))})}}}});var Ma={$addControl:h,$$renameControl:Nr,$removeControl:h,$setValidity:h,$setDirty:h,$setPristine:h,$setSubmitted:h},Ia="ng-submitted";Pr.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Oa=function(e){return["$timeout",function(t){var r={name:"form",restrict:e?"EAC":"E",controller:Pr,compile:function(r,i){r.addClass(vo).addClass(mo);var a=i.name?"name":e&&i.ngForm?"ngForm":!1;return{pre:function(e,r,i,o){if(!("action"in i)){var s=function(t){e.$apply(function(){o.$commitViewValue(),o.$setSubmitted()}),t.preventDefault()};ki(r[0],"submit",s),r.on("$destroy",function(){t(function(){Ni(r[0],"submit",s)},0,!1)})}var l=o.$$parentForm;a&&(_n(e,null,o.$name,o,o.$name),i.$observe(a,function(t){o.$name!==t&&(_n(e,null,o.$name,n,o.$name),l.$$renameControl(o,t),_n(e,null,o.$name,o,o.$name))})),r.on("$destroy",function(){l.$removeControl(o),a&&_n(e,null,i[a],n,o.$name),f(o,Ma)})}}}};return r}]},La=Oa(),_a=Oa(!0),Ha=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Fa=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,ja=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ba=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,qa=/^(\d{4})-(\d{2})-(\d{2})$/,Va=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,za=/^(\d{4})-W(\d\d)$/,Wa=/^(\d{4})-(\d\d)$/,Ga=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Ka={text:Dr,date:Lr("date",qa,Or(qa,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Lr("datetimelocal",Va,Or(Va,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Lr("time",Ga,Or(Ga,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Lr("week",za,Ir,"yyyy-Www"),month:Lr("month",Wa,Or(Wa,["yyyy","MM"]),"yyyy-MM"),number:Hr,url:Fr,email:jr,radio:Br,checkbox:Vr,hidden:h,button:h,submit:h,reset:h,file:h},Ya=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,a,o,s){s[0]&&(Ka[Jr(o.type)]||Ka.text)(i,a,o,s[0],t,e,n,r)}}}}],Ja=/^(true|false|\d+)$/,Qa=function(){return{restrict:"A",priority:100,compile:function(e,t){return Ja.test(t.ngValue)?function(e,t,n){n.$set("value",e.$eval(n.ngValue))}:function(e,t,n){e.$watch(n.ngValue,function(e){n.$set("value",e)})}}}},Za=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,r,i){e.$$addBindingInfo(r,i.ngBind),r=r[0],t.$watch(i.ngBind,function(e){r.textContent=e===n?"":e})}}}}],Xa=["$interpolate","$compile",function(e,t){return{compile:function(r){return t.$$addBindingClass(r),function(r,i,a){var o=e(i.attr(a.$attr.ngBindTemplate));t.$$addBindingInfo(i,o.expressions),i=i[0],a.$observe("ngBindTemplate",function(e){i.textContent=e===n?"":e})}}}}],eo=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var a=t(i.ngBindHtml),o=t(i.ngBindHtml,function(e){return(e||"").toString()});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(o,function(){r.html(e.getTrustedHtml(a(t))||"")})}}}}],to=g({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),no=zr("",!0),ro=zr("Odd",0),io=zr("Even",1),ao=kr({compile:function(e,t){t.$set("ngCloak",n),e.removeClass("ng-cloak")}}),oo=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],so={},lo={blur:!0,focus:!0};a("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=Zt("ng-"+e);so[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,a){var o=n(a[t],null,!0);return function(t,n){n.on(e,function(n){var i=function(){o(t,{$event:n})};lo[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var uo=["$animate",function(e){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,a,o){var s,l,u;n.$watch(i.ngIf,function(n){n?l||o(function(n,a){l=a,n[n.length++]=t.createComment(" end ngIf: "+i.ngIf+" "),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=lt(s.clone),e.leave(u).then(function(){u=null}),s=null))})}}}],co=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ci.noop,compile:function(r,i){var a=i.ngInclude||i.src,o=i.onload||"",s=i.autoscroll;return function(r,i,l,u,c){var f,d,p,h=0,m=function(){d&&(d.remove(),d=null),f&&(f.$destroy(),f=null),p&&(n.leave(p).then(function(){d=null}),d=p,p=null)};r.$watch(a,function(a){var l=function(){!$(s)||s&&!r.$eval(s)||t()},d=++h;a?(e(a,!0).then(function(e){if(d===h){var t=r.$new();u.template=e;var s=c(t,function(e){m(),n.enter(e,null,i).then(l)});f=t,p=s,f.$emit("$includeContentLoaded",a),r.$eval(o)}},function(){d===h&&(m(),r.$emit("$includeContentError",a))}),r.$emit("$includeContentRequested",a)):(m(),u.template=null)})}}}}],fo=["$compile",function(e){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,a){return/SVG/.test(r[0].toString())?(r.empty(),void e($t(a.template,t).childNodes)(n,function(e){r.append(e)},{futureParentElement:r})):(r.html(a.template),void e(r.contents())(n))}}}],po=kr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),ho=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,r,i){var o=t.attr(r.$attr.ngList)||", ",s="false"!==r.ngTrim,l=s?hi(o):o,u=function(e){if(!v(e)){var t=[];return e&&a(e.split(l),function(e){e&&t.push(s?hi(e):e)}),t}};i.$parsers.push(u),i.$formatters.push(function(e){return pi(e)?e.join(o):n}),i.$isEmpty=function(e){return!e||!e.length}}}},mo="ng-valid",go="ng-invalid",vo="ng-pristine",$o="ng-dirty",yo="ng-untouched",bo="ng-touched",wo="ng-pending",Co=r("ngModel"),xo=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(e,t,r,i,o,s,l,u,c,f){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=f(r.name||"",!1)(e);var d,p=o(r.ngModel),m=p.assign,g=p,y=m,b=null,C=this;this.$$setOptions=function(e){if(C.$options=e,e&&e.getterSetter){var t=o(r.ngModel+"()"),n=o(r.ngModel+"($$$p)");g=function(e){var n=p(e);return x(n)&&(n=t(e)),n},y=function(e){x(p(e))?n(e,{$$$p:C.$modelValue}):m(e,C.$modelValue)}}else if(!p.assign)throw Co("nonassign","Expression '{0}' is non-assignable. Element: {1}",r.ngModel,z(i))},this.$render=h,this.$isEmpty=function(e){return v(e)||""===e||null===e||e!==e};var S=i.inheritedData("$formController")||Ma,E=0;Wr({ctrl:this,$element:i,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]},parentForm:S,$animate:s}),this.$setPristine=function(){C.$dirty=!1,C.$pristine=!0,s.removeClass(i,$o),s.addClass(i,vo)},this.$setDirty=function(){C.$dirty=!0,C.$pristine=!1,s.removeClass(i,vo),s.addClass(i,$o),S.$setDirty()},this.$setUntouched=function(){C.$touched=!1,C.$untouched=!0,s.setClass(i,yo,bo)},this.$setTouched=function(){C.$touched=!0,C.$untouched=!1,s.setClass(i,bo,yo)},this.$rollbackViewValue=function(){l.cancel(b),C.$viewValue=C.$$lastCommittedViewValue,C.$render()},this.$validate=function(){if(!w(C.$modelValue)||!isNaN(C.$modelValue)){var e=C.$$lastCommittedViewValue,t=C.$$rawModelValue,r=C.$valid,i=C.$modelValue,a=C.$options&&C.$options.allowInvalid;C.$$runValidators(t,e,function(e){a||r===e||(C.$modelValue=e?t:n,C.$modelValue!==i&&C.$$writeModelToScope())})}},this.$$runValidators=function(e,t,r){function i(){var e=C.$$parserName||"parse";return d!==n?(d||(a(C.$validators,function(e,t){l(t,null)}),a(C.$asyncValidators,function(e,t){l(t,null)})),l(e,d),d):(l(e,null),!0)}function o(){var n=!0;return a(C.$validators,function(r,i){var a=r(e,t);n=n&&a,l(i,a)}),n?!0:(a(C.$asyncValidators,function(e,t){l(t,null)}),!1)}function s(){var r=[],i=!0;a(C.$asyncValidators,function(a,o){var s=a(e,t);if(!P(s))throw Co("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",s);l(o,n),r.push(s.then(function(){l(o,!0)},function(){i=!1,l(o,!1)}))}),r.length?c.all(r).then(function(){u(i)},h):u(!0)}function l(e,t){f===E&&C.$setValidity(e,t)}function u(e){f===E&&r(e)}E++;var f=E;return i()&&o()?void s():void u(!1)},this.$commitViewValue=function(){var e=C.$viewValue;l.cancel(b),(C.$$lastCommittedViewValue!==e||""===e&&C.$$hasNativeValidators)&&(C.$$lastCommittedViewValue=e,C.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function t(){C.$modelValue!==o&&C.$$writeModelToScope()}var r=C.$$lastCommittedViewValue,i=r;if(d=v(i)?n:!0)for(var a=0;a<C.$parsers.length;a++)if(i=C.$parsers[a](i),v(i)){d=!1;break}w(C.$modelValue)&&isNaN(C.$modelValue)&&(C.$modelValue=g(e));var o=C.$modelValue,s=C.$options&&C.$options.allowInvalid;C.$$rawModelValue=i,s&&(C.$modelValue=i,t()),C.$$runValidators(i,C.$$lastCommittedViewValue,function(e){s||(C.$modelValue=e?i:n,t())})},this.$$writeModelToScope=function(){y(e,C.$modelValue),a(C.$viewChangeListeners,function(e){try{e()}catch(n){t(n)}})},this.$setViewValue=function(e,t){C.$viewValue=e,(!C.$options||C.$options.updateOnDefault)&&C.$$debounceViewValueCommit(t)},this.$$debounceViewValueCommit=function(t){var n,r=0,i=C.$options;i&&$(i.debounce)&&(n=i.debounce,w(n)?r=n:w(n[t])?r=n[t]:w(n["default"])&&(r=n["default"])),l.cancel(b),r?b=l(function(){C.$commitViewValue()},r):u.$$phase?C.$commitViewValue():e.$apply(function(){C.$commitViewValue()})},e.$watch(function(){var t=g(e);if(t!==C.$modelValue&&(C.$modelValue===C.$modelValue||t===t)){C.$modelValue=C.$$rawModelValue=t,d=n;for(var r=C.$formatters,i=r.length,a=t;i--;)a=r[i](a);C.$viewValue!==a&&(C.$viewValue=C.$$lastCommittedViewValue=a,C.$render(),C.$$runValidators(t,a,h))}return t})}],So=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:xo,priority:1,compile:function(t){return t.addClass(vo).addClass(yo).addClass(mo),{pre:function(e,t,n,r){var i=r[0],a=r[1]||Ma;i.$$setOptions(r[2]&&r[2].$options),a.$addControl(i),n.$observe("name",function(e){i.$name!==e&&a.$$renameControl(i,e)}),e.$on("$destroy",function(){a.$removeControl(i)})},post:function(t,n,r,i){var a=i[0];a.$options&&a.$options.updateOn&&n.on(a.$options.updateOn,function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){a.$touched||(e.$$phase?t.$evalAsync(a.$setTouched):t.$apply(a.$setTouched))})}}}}}],Eo=/(\s+|^)default(\s+|$)/,To=function(){return{restrict:"A",controller:["$scope","$attrs",function(e,t){var r=this;this.$options=e.$eval(t.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=hi(this.$options.updateOn.replace(Eo,function(){return r.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Ao=kr({terminal:!0,priority:1e3}),Ro=["$locale","$interpolate",function(e,t){var n=/{}/g,r=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(i,o,s){function l(e){o.text(e||"")}var u,c=s.count,f=s.$attr.when&&o.attr(s.$attr.when),d=s.offset||0,p=i.$eval(f)||{},h={},m=t.startSymbol(),g=t.endSymbol(),v=m+c+"-"+d+g,$=ci.noop;a(s,function(e,t){var n=r.exec(t);if(n){var i=(n[1]?"-":"")+Jr(n[2]);p[i]=o.attr(s.$attr[t])}}),a(p,function(e,r){h[r]=t(e.replace(n,v))}),i.$watch(c,function(t){var n=parseFloat(t),r=isNaN(n);r||n in p||(n=e.pluralCat(n-d)),n===u||r&&isNaN(u)||($(),$=i.$watch(h[n],l),u=n)})}}}],ko=["$parse","$animate",function(e,o){var s="$$NG_REMOVED",l=r("ngRepeat"),u=function(e,t,n,r,i,a,o){e[n]=r,i&&(e[i]=a),e.$index=t,e.$first=0===t,e.$last=t===o-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t))},c=function(e){return e.clone[0]},f=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(r,d){var p=d.ngRepeat,h=t.createComment(" end ngRepeat: "+p+" "),m=p.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw l("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",p);var g=m[1],v=m[2],$=m[3],y=m[4];if(m=g.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!m)throw l("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",g);var b=m[3]||m[1],w=m[2];if($&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test($)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test($)))throw l("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",$);var C,x,S,E,T={$id:Ft};return y?C=e(y):(S=function(e,t){return Ft(t)},E=function(e){return e}),function(e,t,r,d,m){C&&(x=function(t,n,r){return w&&(T[w]=t),T[b]=n,T.$index=r,C(e,T)});var g=ut();e.$watchCollection(v,function(r){var d,v,y,C,T,A,R,k,N,P,U,D,M=t[0],I=ut();if($&&(e[$]=r),i(r))N=r,k=x||S;else{k=x||E,N=[];for(var O in r)r.hasOwnProperty(O)&&"$"!=O.charAt(0)&&N.push(O);N.sort()}for(C=N.length,U=new Array(C),d=0;C>d;d++)if(T=r===N?d:N[d],A=r[T],R=k(T,A,d),g[R])P=g[R],delete g[R],I[R]=P,U[d]=P;else{if(I[R])throw a(U,function(e){e&&e.scope&&(g[e.id]=e)}),l("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",p,R,A);U[d]={id:R,scope:n,clone:n},I[R]=!0}for(var L in g){if(P=g[L],D=lt(P.clone),o.leave(D),D[0].parentNode)for(d=0,v=D.length;v>d;d++)D[d][s]=!0;P.scope.$destroy()}for(d=0;C>d;d++)if(T=r===N?d:N[d],A=r[T],P=U[d],P.scope){y=M;do y=y.nextSibling;while(y&&y[s]);c(P)!=y&&o.move(lt(P.clone),null,ni(M)),M=f(P),u(P.scope,d,b,A,w,T,C)}else m(function(e,t){P.scope=t;var n=h.cloneNode(!1);e[e.length++]=n,o.enter(e,null,ni(M)),M=n,P.clone=e,I[P.id]=P,u(P.scope,d,b,A,w,T,C)});g=I})}}}}],No="ng-hide",Po="ng-hide-animate",Uo=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,No,{tempClasses:Po})})}}}],Do=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,No,{tempClasses:Po})})}}}],Mo=kr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&a(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),Io=["$animate",function(e){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,o){var s=i.ngSwitch||i.on,l=[],u=[],c=[],f=[],d=function(e,t){return function(){e.splice(t,1)}};n.$watch(s,function(n){var r,i;for(r=0,i=c.length;i>r;++r)e.cancel(c[r]);for(c.length=0,r=0,i=f.length;i>r;++r){var s=lt(u[r].clone);f[r].$destroy();var p=c[r]=e.leave(s);p.then(d(c,r))}u.length=0,f.length=0,(l=o.cases["!"+n]||o.cases["?"])&&a(l,function(n){n.transclude(function(r,i){f.push(i);var a=n.element;r[r.length++]=t.createComment(" end ngSwitchWhen: ");var o={clone:r};u.push(o),e.enter(r,a.parent(),a)})})})}}}],Oo=kr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["!"+n.ngSwitchWhen]=r.cases["!"+n.ngSwitchWhen]||[],r.cases["!"+n.ngSwitchWhen].push({transclude:i,element:t})}}),Lo=kr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),_o=kr({restrict:"EAC",link:function(e,t,n,i,a){if(!a)throw r("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",z(t));a(function(e){t.empty(),t.append(e)})}}),Ho=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"==n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],Fo=r("ngOptions"),jo=g({restrict:"A",terminal:!0}),Bo=["$compile","$parse",function(e,r){var i=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,s={$setViewValue:h};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(e,t,n){var r,i,a=this,o={},l=s;a.databound=n.ngModel,a.init=function(e,t,n){l=e,r=t,i=n},a.addOption=function(t,n){ot(t,'"option value"'),o[t]=!0,l.$viewValue==t&&(e.val(t),i.parent()&&i.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},a.removeOption=function(e){this.hasOption(e)&&(delete o[e],l.$viewValue===e&&this.renderUnknownOption(e))},a.renderUnknownOption=function(t){var n="? "+Ft(t)+" ?";i.val(n),e.prepend(i),e.val(n),i.prop("selected",!0)},a.hasOption=function(e){return o.hasOwnProperty(e)},t.$on("$destroy",function(){a.renderUnknownOption=h})}],link:function(s,l,u,c){function f(e,t,n,r){n.$render=function(){var e=n.$viewValue;r.hasOption(e)?(S.parent()&&S.remove(),t.val(e),""===e&&h.prop("selected",!0)):null==e&&h?t.val(""):r.renderUnknownOption(e)},t.on("change",function(){e.$apply(function(){S.parent()&&S.remove(),n.$setViewValue(t.val())})})}function d(e,t,n){var r;n.$render=function(){var e=new jt(n.$viewValue);a(t.find("option"),function(t){t.selected=$(e.get(t.value))})},e.$watch(function(){_(r,n.$viewValue)||(r=L(n.$viewValue),n.$render())}),t.on("change",function(){e.$apply(function(){var e=[];a(t.find("option"),function(t){t.selected&&e.push(t.value)}),n.$setViewValue(e)})})}function p(t,s,l){function u(e,n,r){return _[A]=r,N&&(_[N]=n),e(t,_)
}function c(){t.$apply(function(){var e,n=D(t)||[];if(v)e=[],a(s.val(),function(t){t=I?O[t]:t,e.push(f(t,n[t]))});else{var r=I?O[s.val()]:s.val();e=f(r,n[r])}l.$setViewValue(e),S()})}function f(e,t){if("?"===e)return n;if(""===e)return null;var r=k?k:U;return u(r,e,t)}function d(){var e,n=D(t);if(n&&pi(n)){e=new Array(n.length);for(var r=0,i=n.length;i>r;r++)e[r]=u(T,r,n[r]);return e}if(n){e={};for(var a in n)n.hasOwnProperty(a)&&(e[a]=u(T,a,n[a]))}return e}function p(e){var t;if(v)if(I&&pi(e)){t=new jt([]);for(var n=0;n<e.length;n++)t.put(u(I,null,e[n]),!0)}else t=new jt(e);else I&&(e=u(I,null,e));return function(n,r){var i;return i=I?I:k?k:U,v?$(t.remove(u(i,n,r))):e===u(i,n,r)}}function h(){w||(t.$$postDigest(S),w=!0)}function g(e,t,n){e[t]=e[t]||0,e[t]+=n?1:-1}function S(){w=!1;var e,n,r,i,c,f,d,h,y,S,E,A,R,k,U,M,H,F={"":[]},j=[""],B=l.$viewValue,q=D(t)||[],V=N?o(q):q,z={},W=p(B),G=!1;for(O={},A=0;S=V.length,S>A;A++)d=A,N&&(d=V[A],"$"===d.charAt(0))||(h=q[d],e=u(P,d,h)||"",(n=F[e])||(n=F[e]=[],j.push(e)),R=W(d,h),G=G||R,M=u(T,d,h),M=$(M)?M:"",H=I?I(t,_):N?V[A]:A,I&&(O[H]=d),n.push({id:H,label:M,selected:R}));for(v||(b||null===B?F[""].unshift({id:"",label:"",selected:!G}):G||F[""].unshift({id:"?",label:"",selected:!0})),E=0,y=j.length;y>E;E++){for(e=j[E],n=F[e],L.length<=E?(i={element:x.clone().attr("label",e),label:n.label},c=[i],L.push(c),s.append(i.element)):(c=L[E],i=c[0],i.label!=e&&i.element.attr("label",i.label=e)),k=null,A=0,S=n.length;S>A;A++)r=n[A],(f=c[A+1])?(k=f.element,f.label!==r.label&&(g(z,f.label,!1),g(z,r.label,!0),k.text(f.label=r.label),k.prop("label",f.label)),f.id!==r.id&&k.val(f.id=r.id),k[0].selected!==r.selected&&(k.prop("selected",f.selected=r.selected),ti&&k.prop("selected",f.selected))):(""===r.id&&b?U=b:(U=C.clone()).val(r.id).prop("selected",r.selected).attr("selected",r.selected).prop("label",r.label).text(r.label),c.push(f={element:U,label:r.label,id:r.id,selected:r.selected}),g(z,r.label,!0),k?k.after(U):i.element.append(U),k=U);for(A++;c.length>A;)r=c.pop(),g(z,r.label,!1),r.element.remove()}for(;L.length>E;){for(n=L.pop(),A=1;A<n.length;++A)g(z,n[A].label,!1);n[0].element.remove()}a(z,function(e,t){e>0?m.addOption(t):0>e&&m.removeOption(t)})}var E;if(!(E=y.match(i)))throw Fo("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",y,z(s));var T=r(E[2]||E[1]),A=E[4]||E[6],R=/ as /.test(E[0])&&E[1],k=R?r(R):null,N=E[5],P=r(E[3]||""),U=r(E[2]?E[1]:A),D=r(E[7]),M=E[8],I=M?r(E[8]):null,O={},L=[[{element:s,label:""}]],_={};b&&(e(b)(t),b.removeClass("ng-scope"),b.remove()),s.empty(),s.on("change",c),l.$render=S,t.$watchCollection(D,h),t.$watchCollection(d,h),v&&t.$watchCollection(function(){return l.$modelValue},h)}if(c[1]){for(var h,m=c[0],g=c[1],v=u.multiple,y=u.ngOptions,b=!1,w=!1,C=ni(t.createElement("option")),x=ni(t.createElement("optgroup")),S=C.clone(),E=0,T=l.children(),A=T.length;A>E;E++)if(""===T[E].value){h=b=T.eq(E);break}m.init(g,b,S),v&&(g.$isEmpty=function(e){return!e||0===e.length}),y?p(s,l,g):v?d(s,l,g):f(s,l,g,m)}}}}],qo=["$interpolate",function(e){var t={addOption:h,removeOption:h};return{restrict:"E",priority:100,compile:function(n,r){if(v(r.value)){var i=e(n.text(),!0);i||r.$set("value",n.text())}return function(e,n,r){var a="$selectController",o=n.parent(),s=o.data(a)||o.parent().data(a);s&&s.databound||(s=t),i?e.$watch(i,function(e,t){r.$set("value",e),t!==e&&s.removeOption(t),s.addOption(e,n)}):s.addOption(r.value,n),n.on("$destroy",function(){s.removeOption(r.value)})}}}}],Vo=g({restrict:"E",terminal:!1}),zo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},Wo=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,i,a){if(a){var o,s=i.ngPattern||i.pattern;i.$observe("pattern",function(e){if(b(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw r("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",s,e,z(t));o=e||n,a.$validate()}),a.$validators.pattern=function(e,t){return a.$isEmpty(t)||v(o)||o.test(t)}}}}},Go=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=d(e);i=isNaN(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return 0>i||r.$isEmpty(t)||t.length<=i}}}}},Ko=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=d(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};return e.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(rt(),pt(ci),void ni(t).ready(function(){Z(t,X)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(e,t){"use strict";function n(){function e(e,n){return t.extend(Object.create(e),n)}function n(e,t){var n=t.caseInsensitiveMatch,r={originalPath:e,regexp:e},i=r.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,n,r){var a="?"===r?r:null,o="*"===r?r:null;return i.push({name:n,optional:!!a}),t=t||"",""+(a?"":t)+"(?:"+(a?t:"")+(o&&"(.+?)"||"([^/]+)")+(a||"")+")"+(a||"")}).replace(/([\/$\*])/g,"\\$1"),r.regexp=new RegExp("^"+e+"$",n?"i":""),r}var r={};this.when=function(e,i){var a=t.copy(i);if(t.isUndefined(a.reloadOnSearch)&&(a.reloadOnSearch=!0),t.isUndefined(a.caseInsensitiveMatch)&&(a.caseInsensitiveMatch=this.caseInsensitiveMatch),r[e]=t.extend(a,e&&n(e,a)),e){var o="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";r[o]=t.extend({redirectTo:e},n(o,a))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(n,i,a,o,l,u,c){function f(e,t){var n=t.keys,r={};if(!t.regexp)return null;var i=t.regexp.exec(e);if(!i)return null;for(var a=1,o=i.length;o>a;++a){var s=n[a-1],l=i[a];s&&l&&(r[s.name]=l)}return r}function d(e){var r=y.current;g=h(),v=g&&r&&g.$$route===r.$$route&&t.equals(g.pathParams,r.pathParams)&&!g.reloadOnSearch&&!$,v||!r&&!g||n.$broadcast("$routeChangeStart",g,r).defaultPrevented&&e&&e.preventDefault()}function p(){var e=y.current,r=g;v?(e.params=r.params,t.copy(e.params,a),n.$broadcast("$routeUpdate",e)):(r||e)&&($=!1,y.current=r,r&&r.redirectTo&&(t.isString(r.redirectTo)?i.path(m(r.redirectTo,r.params)).search(r.params).replace():i.url(r.redirectTo(r.pathParams,i.path(),i.search())).replace()),o.when(r).then(function(){if(r){var e,n,i=t.extend({},r.resolve);return t.forEach(i,function(e,n){i[n]=t.isString(e)?l.get(e):l.invoke(e,null,null,n)}),t.isDefined(e=r.template)?t.isFunction(e)&&(e=e(r.params)):t.isDefined(n=r.templateUrl)&&(t.isFunction(n)&&(n=n(r.params)),t.isDefined(n)&&(r.loadedTemplateUrl=c.valueOf(n),e=u(n))),t.isDefined(e)&&(i.$template=e),o.all(i)}}).then(function(i){r==y.current&&(r&&(r.locals=i,t.copy(r.params,a)),n.$broadcast("$routeChangeSuccess",r,e))},function(t){r==y.current&&n.$broadcast("$routeChangeError",r,e,t)}))}function h(){var n,a;return t.forEach(r,function(r){!a&&(n=f(i.path(),r))&&(a=e(r,{params:t.extend({},i.search(),n),pathParams:n}),a.$$route=r)}),a||r[null]&&e(r[null],{params:{},pathParams:{}})}function m(e,n){var r=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)r.push(e);else{var i=e.match(/(\w+)(?:[?*])?(.*)/),a=i[1];r.push(n[a]),r.push(i[2]||""),delete n[a]}}),r.join("")}var g,v,$=!1,y={routes:r,reload:function(){$=!0,n.$evalAsync(function(){d(),p()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw s("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),i.path(m(this.current.$$route.originalPath,e)),i.search(e)}};return n.$on("$locationChangeStart",d),n.$on("$locationChangeSuccess",p),y}]}function r(){this.$get=function(){return{}}}function i(e,n,r){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(i,a,o,s,l){function u(){p&&(r.cancel(p),p=null),f&&(f.$destroy(),f=null),d&&(p=r.leave(d),p.then(function(){p=null}),d=null)}function c(){var o=e.current&&e.current.locals,s=o&&o.$template;if(t.isDefined(s)){var c=i.$new(),p=e.current,g=l(c,function(e){r.enter(e,null,d||a).then(function(){!t.isDefined(h)||h&&!i.$eval(h)||n()}),u()});d=g,f=p.scope=c,f.$emit("$viewContentLoaded"),f.$eval(m)}else u()}var f,d,p,h=o.autoscroll,m=o.onload||"";i.$on("$routeChangeSuccess",c),c()}}}function a(e,t,n){return{restrict:"ECA",priority:-400,link:function(r,i){var a=n.current,o=a.locals;i.html(o.$template);var s=e(i.contents());if(a.controller){o.$scope=r;var l=t(a.controller,o);a.controllerAs&&(r[a.controllerAs]=l),i.data("$ngControllerController",l),i.children().data("$ngControllerController",l)}s(r)}}}var o=t.module("ngRoute",["ng"]).provider("$route",n),s=t.$$minErr("ngRoute");o.provider("$routeParams",r),o.directive("ngView",i),o.directive("ngView",a),i.$inject=["$route","$anchorScroll","$animate"],a.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t,n){"use strict";t.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(e,r){function i(){var e,i,a,l;for(e in s)c(o[e])&&(r.cookies(e,n),delete s[e]);for(e in o)i=o[e],t.isString(i)||(i=""+i,o[e]=i),i!==s[e]&&(r.cookies(e,i),s[e]=i,l=!0);if(l){a=r.cookies();for(e in o)o[e]!==a[e]&&(c(a[e])?(delete o[e],delete s[e]):o[e]=s[e]=a[e])}}var a,o={},s={},l=!1,u=t.copy,c=t.isUndefined;return r.addPollFn(function(){var t=r.cookies();a!=t&&(a=t,u(t,s),u(t,o),l&&e.$apply())})(),l=!0,e.$watch(i),o}]).factory("$cookieStore",["$cookies",function(e){return{get:function(n){var r=e[n];return r?t.fromJson(r):r},put:function(n,r){e[n]=t.toJson(r)},remove:function(t){delete e[t]}}}])}(window,window.angular),function(e,t,n){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var e="$$ngAnimateChildren";return function(n,r,i){var a=i.ngAnimateChildren;t.isString(a)&&0===a.length?r.data(e,!0):n.$watch(a,function(t){r.data(e,!!t)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var n=t[0].body;return function(t){return e(function(){t(n.offsetWidth)})}}]).config(["$provide","$animateProvider",function(r,i){function a(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType==g)return n}}function o(e){return e&&t.element(e)}function s(e){return t.element(a(e))}function l(e,t){return a(e)==a(t)}var u,c=t.noop,f=t.forEach,d=i.$$selectors,p=t.isArray,h=t.isString,m=t.isObject,g=1,v="$$ngAnimateState",$="$$ngAnimateChildren",y="ng-animate",b={running:!0};r.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,n,r,g,w,C,x,S,E,T){function A(e,t){var n=e.data(v)||{};return t&&(n.running=!0,n.structural=!0,e.data(v,n)),n.disabled||n.running&&n.structural}function R(e){var t,r=n.defer();return r.promise.$$cancelFn=function(){t&&t()},x.$$postDigest(function(){t=e(function(){r.resolve()})}),r.promise}function k(e){return m(e)?(e.tempClasses&&h(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e):void 0}function N(e,t,n){n=n||{};var r={};f(n,function(e,t){f(t.split(" "),function(t){r[t]=e})});var i=Object.create(null);f((e.attr("class")||"").split(/\s+/),function(e){i[e]=!0});var a=[],o=[];return f(t&&t.classes||[],function(e,t){var n=i[t],s=r[t]||{};e===!1?(n||"addClass"==s.event)&&o.push(t):e===!0&&(n&&"removeClass"!=s.event||a.push(t))}),a.length+o.length>0&&[a.join(" "),o.join(" ")]}function P(e){if(e){var t=[],n={},i=e.substr(1).split(".");(g.transitions||g.animations)&&t.push(r.get(d[""]));for(var a=0;a<i.length;a++){var o=i[a],s=d[o];s&&!n[o]&&(t.push(r.get(s)),n[o]=!0)}return t}}function U(e,n,r,i){function a(e,t){var n=e[t],r=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];return n||r?("leave"==t&&(r=n,n=null),C.push({event:t,fn:n}),y.push({event:t,fn:r}),!0):void 0}function o(t,n,a){function o(e){if(n){if((n[e]||c)(),++d<s.length)return;n=null}a()}var s=[];f(t,function(e){e.fn&&s.push(e)});var d=0;f(s,function(t,a){var s=function(){o(a)};switch(t.event){case"setClass":n.push(t.fn(e,l,u,s,i));break;case"animate":n.push(t.fn(e,r,i.from,i.to,s));break;case"addClass":n.push(t.fn(e,l||r,s,i));break;case"removeClass":n.push(t.fn(e,u||r,s,i));break;default:n.push(t.fn(e,s,i))}}),n&&0===n.length&&a()}var s=e[0];if(s){i&&(i.to=i.to||{},i.from=i.from||{});var l,u;p(r)&&(l=r[0],u=r[1],l?u?r=l+" "+u:(r=l,n="addClass"):(r=u,n="removeClass"));var d="setClass"==n,h=d||"addClass"==n||"removeClass"==n||"animate"==n,m=e.attr("class"),g=m+" "+r;if(F(g)){var v=c,$=[],y=[],b=c,w=[],C=[],x=(" "+g).replace(/\s+/g,".");return f(P(x),function(e){var t=a(e,n);!t&&d&&(a(e,"addClass"),a(e,"removeClass"))}),{node:s,event:n,className:r,isClassBased:h,isSetClassOperation:d,applyStyles:function(){i&&e.css(t.extend(i.from||{},i.to||{}))},before:function(e){v=e,o(y,$,function(){v=c,e()})},after:function(e){b=e,o(C,w,function(){b=c,e()})},cancel:function(){$&&(f($,function(e){(e||c)(!0)}),v(!0)),w&&(f(w,function(e){(e||c)(!0)}),b(!0))}}}}}function D(e,n,r,i,a,o,s,l){function d(t){var i="$animate:"+t;x&&x[i]&&x[i].length>0&&C(function(){r.triggerHandler(i,{event:e,className:n})})}function p(){d("before")}function h(){d("after")}function m(){d("close"),l()}function g(){g.hasBeenRun||(g.hasBeenRun=!0,o())}function $(){if(!$.hasBeenRun){w&&w.applyStyles(),$.hasBeenRun=!0,s&&s.tempClasses&&f(s.tempClasses,function(e){u.removeClass(r,e)});var t=r.data(v);t&&(w&&w.isClassBased?I(r,n):(C(function(){var t=r.data(v)||{};D==t.index&&I(r,n,e)}),r.data(v,t))),m()}}var b=c,w=U(r,e,n,s);if(!w)return g(),p(),h(),$(),b;e=w.event,n=w.className;var x=t.element._data(w.node);if(x=x&&x.events,i||(i=a?a.parent():r.parent()),O(r,i))return g(),p(),h(),$(),b;var S=r.data(v)||{},E=S.active||{},T=S.totalActive||0,A=S.last,R=!1;if(T>0){var k=[];if(w.isClassBased){if("setClass"==A.event)k.push(A),I(r,n);else if(E[n]){var N=E[n];N.event==e?R=!0:(k.push(N),I(r,n))}}else if("leave"==e&&E["ng-leave"])R=!0;else{for(var P in E)k.push(E[P]);S={},I(r,!0)}k.length>0&&f(k,function(e){e.cancel()})}if(!w.isClassBased||w.isSetClassOperation||"animate"==e||R||(R="addClass"==e==r.hasClass(n)),R)return g(),p(),h(),m(),b;E=S.active||{},T=S.totalActive||0,"leave"==e&&r.one("$destroy",function(){var e=t.element(this),n=e.data(v);if(n){var r=n.active["ng-leave"];r&&(r.cancel(),I(e,"ng-leave"))}}),u.addClass(r,y),s&&s.tempClasses&&f(s.tempClasses,function(e){u.addClass(r,e)});var D=_++;return T++,E[n]=w,r.data(v,{last:w,active:E,index:D,totalActive:T}),p(),w.before(function(t){var i=r.data(v);t=t||!i||!i.active[n]||w.isClassBased&&i.active[n].event!=e,g(),t===!0?$():(h(),w.after($))}),w.cancel}function M(e){var n=a(e);if(n){var r=t.isFunction(n.getElementsByClassName)?n.getElementsByClassName(y):n.querySelectorAll("."+y);f(r,function(e){e=t.element(e);var n=e.data(v);n&&n.active&&f(n.active,function(e){e.cancel()})})}}function I(e,t){if(l(e,w))b.disabled||(b.running=!1,b.structural=!1);else if(t){var n=e.data(v)||{},r=t===!0;!r&&n.active&&n.active[t]&&(n.totalActive--,delete n.active[t]),(r||!n.totalActive)&&(u.removeClass(e,y),e.removeData(v))}}function O(e,n){if(b.disabled)return!0;if(l(e,w))return b.running;var r,i,a;do{if(0===n.length)break;var o=l(n,w),s=o?b:n.data(v)||{};if(s.disabled)return!0;if(o&&(a=!0),r!==!1){var u=n.data($);t.isDefined(u)&&(r=u)}i=i||s.running||s.last&&!s.last.isClassBased}while(n=n.parent());return!a||!r&&i}u=T,w.data(v,b);var L=x.$watch(function(){return E.totalPendingRequests},function(e){0===e&&(L(),x.$$postDigest(function(){x.$$postDigest(function(){b.running=!1})}))}),_=0,H=i.classNameFilter(),F=H?function(e){return H.test(e)}:function(){return!0};return{animate:function(e,t,n,r,i){return r=r||"ng-inline-animate",i=k(i)||{},i.from=n?t:null,i.to=n?n:t,R(function(t){return D("animate",r,s(e),null,null,c,i,t)})},enter:function(n,r,i,a){return a=k(a),n=t.element(n),r=o(r),i=o(i),A(n,!0),e.enter(n,r,i),R(function(e){return D("enter","ng-enter",s(n),r,i,c,a,e)})},leave:function(n,r){return r=k(r),n=t.element(n),M(n),A(n,!0),R(function(t){return D("leave","ng-leave",s(n),null,null,function(){e.leave(n)},r,t)})},move:function(n,r,i,a){return a=k(a),n=t.element(n),r=o(r),i=o(i),M(n),A(n,!0),e.move(n,r,i),R(function(e){return D("move","ng-move",s(n),r,i,c,a,e)})},addClass:function(e,t,n){return this.setClass(e,t,[],n)},removeClass:function(e,t,n){return this.setClass(e,[],t,n)},setClass:function(n,r,i,o){o=k(o);var l="$$animateClasses";if(n=t.element(n),n=s(n),A(n))return e.$$setClassImmediately(n,r,i,o);var u,c=n.data(l),d=!!c;return c||(c={},c.classes={}),u=c.classes,r=p(r)?r:r.split(" "),f(r,function(e){e&&e.length&&(u[e]=!0)}),i=p(i)?i:i.split(" "),f(i,function(e){e&&e.length&&(u[e]=!1)}),d?(o&&c.options&&(c.options=t.extend(c.options||{},o)),c.promise):(n.data(l,c={classes:u,options:o}),c.promise=R(function(t){var r,i,o,s=a(n);if(s&&(r=n.data(l),n.removeData(l),o=n.parent(),i=s.parentNode),!i||i.$$NG_REMOVED||s.$$NG_REMOVED)return void t();var u=n.data(v)||{},c=N(n,r,u.active);return c?D("setClass",c,n,o,null,function(){c[0]&&e.$$addClassImmediately(n,c[0]),c[1]&&e.$$removeClassImmediately(n,c[1])},r.options,t):t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)I(t);else{var n=t.data(v)||{};n.disabled=!0,t.data(v,n)}break;case 1:b.disabled=!e;break;default:e=!b.disabled}return!!e}}}]),i.register("",["$window","$sniffer","$timeout","$$animateReflow",function(r,i,o,s){function l(){I||(I=s(function(){K=[],I=null,W={}}))}function d(e,t){I&&I(),K.push(t),I=s(function(){f(K,function(e){e()}),K=[],I=null,W={}})}function m(e,n){var r=a(e);e=t.element(r),Q.push(e);var i=Date.now()+n;J>=i||(o.cancel(Y),J=i,Y=o(function(){v(Q),Q=[]},n,!1))}function v(e){f(e,function(e){var t=e.data(B);t&&f(t.closeAnimationFns,function(e){e()})})}function $(e,t){var n=t?W[t]:null;if(!n){var i=0,a=0,o=0,s=0;f(e,function(e){if(e.nodeType==g){var t=r.getComputedStyle(e)||{},n=t[N+O];i=Math.max(y(n),i);var l=t[N+_];a=Math.max(y(l),a);{t[U+_]}s=Math.max(y(t[U+_]),s);var u=y(t[U+O]);u>0&&(u*=parseInt(t[U+H],10)||1),o=Math.max(u,o)}}),n={total:0,transitionDelay:a,transitionDuration:i,animationDelay:s,animationDuration:o},t&&(W[t]=n)}return n}function y(e){var t=0,n=h(e)?e.split(/\s*,\s*/):[];return f(n,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function b(e){var t=e.parent(),n=t.data(j);return n||(t.data(j,++G),n=G),n+"-"+a(e).getAttribute("class")}function w(e,t,n,r){var i=["ng-enter","ng-leave","ng-move"].indexOf(n)>=0,o=b(t),s=o+" "+n,l=W[s]?++W[s].total:0,c={};if(l>0){var f=n+"-stagger",d=o+" "+f,p=!W[d];p&&u.addClass(t,f),c=$(t,d),p&&u.removeClass(t,f)}u.addClass(t,n);var h=t.data(B)||{},m=$(t,s),g=m.transitionDuration,v=m.animationDuration;if(i&&0===g&&0===v)return u.removeClass(t,n),!1;var y=r||i&&g>0,w=v>0&&c.animationDelay>0&&0===c.animationDuration,C=h.closeAnimationFns||[];t.data(B,{stagger:c,cacheKey:s,running:h.running||0,itemIndex:l,blockTransition:y,closeAnimationFns:C});var E=a(t);return y&&(x(E,!0),r&&t.css(r)),w&&S(E,!0),!0}function C(e,t,n,r,i){function s(){t.off(_,l),u.removeClass(t,p),u.removeClass(t,h),O&&o.cancel(O),R(t,n);var e=a(t);for(var r in v)e.style.removeProperty(v[r])}function l(e){e.stopPropagation();var t=e.originalEvent||e,n=t.$manualTimeStamp||t.timeStamp||Date.now(),i=parseFloat(t.elapsedTime.toFixed(q));Math.max(n-L,0)>=U&&i>=k&&r()}var c=a(t),d=t.data(B);if(-1==c.getAttribute("class").indexOf(n)||!d)return void r();var p="",h="";f(n.split(" "),function(e,t){var n=(t>0?" ":"")+e;p+=n+"-active",h+=n+"-pending"});var g="",v=[],y=d.itemIndex,b=d.stagger,w=0;if(y>0){var C=0;b.transitionDelay>0&&0===b.transitionDuration&&(C=b.transitionDelay*y);var E=0;b.animationDelay>0&&0===b.animationDuration&&(E=b.animationDelay*y,v.push(M+"animation-play-state")),w=Math.round(100*Math.max(C,E))/100}w||(u.addClass(t,p),d.blockTransition&&x(c,!1));var T=d.cacheKey+" "+p,A=$(t,T),k=Math.max(A.transitionDuration,A.animationDuration);if(0===k)return u.removeClass(t,p),R(t,n),void r();!w&&i&&Object.keys(i).length>0&&(A.transitionDuration||(t.css("transition",A.animationDuration+"s linear all"),v.push("transition")),t.css(i));var N=Math.max(A.transitionDelay,A.animationDelay),U=N*z;if(v.length>0){var I=c.getAttribute("style")||"";";"!==I.charAt(I.length-1)&&(I+=";"),c.setAttribute("style",I+" "+g)}var O,L=Date.now(),_=D+" "+P,H=(N+k)*V,F=(w+H)*z;return w>0&&(u.addClass(t,h),O=o(function(){O=null,A.transitionDuration>0&&x(c,!1),A.animationDuration>0&&S(c,!1),u.addClass(t,p),u.removeClass(t,h),i&&(0===A.transitionDuration&&t.css("transition",A.animationDuration+"s linear all"),t.css(i),v.push("transition"))},w*z,!1)),t.on(_,l),d.closeAnimationFns.push(function(){s(),r()}),d.running++,m(t,F),s}function x(e,t){e.style[N+L]=t?"none":""}function S(e,t){e.style[U+F]=t?"paused":""}function E(e,t,n,r){return w(e,t,n,r)?function(e){e&&R(t,n)}:void 0}function T(e,t,n,r,i){return t.data(B)?C(e,t,n,r,i):(R(t,n),void r())}function A(e,t,n,r,i){var a=E(e,t,n,i.from);if(!a)return l(),void r();var o=a;return d(t,function(){o=T(e,t,n,r,i.to)}),function(e){(o||c)(e)}}function R(e,t){u.removeClass(e,t);var n=e.data(B);n&&(n.running&&n.running--,n.running&&0!==n.running||e.removeData(B))}function k(e,t){var n="";return e=p(e)?e:e.split(/\s+/),f(e,function(e,r){e&&e.length>0&&(n+=(r>0?" ":"")+e+t)}),n}var N,P,U,D,M="";e.ontransitionend===n&&e.onwebkittransitionend!==n?(M="-webkit-",N="WebkitTransition",P="webkitTransitionEnd transitionend"):(N="transition",P="transitionend"),e.onanimationend===n&&e.onwebkitanimationend!==n?(M="-webkit-",U="WebkitAnimation",D="webkitAnimationEnd animationend"):(U="animation",D="animationend");var I,O="Duration",L="Property",_="Delay",H="IterationCount",F="PlayState",j="$$ngAnimateKey",B="$$ngAnimateCSS3Data",q=3,V=1.5,z=1e3,W={},G=0,K=[],Y=null,J=0,Q=[];return{animate:function(e,t,n,r,i,a){return a=a||{},a.from=n,a.to=r,A("animate",e,t,i,a)},enter:function(e,t,n){return n=n||{},A("enter",e,"ng-enter",t,n)},leave:function(e,t,n){return n=n||{},A("leave",e,"ng-leave",t,n)},move:function(e,t,n){return n=n||{},A("move",e,"ng-move",t,n)},beforeSetClass:function(e,t,n,r,i){i=i||{};var a=k(n,"-remove")+" "+k(t,"-add"),o=E("setClass",e,a,i.from);return o?(d(e,r),o):(l(),void r())},beforeAddClass:function(e,t,n,r){r=r||{};var i=E("addClass",e,k(t,"-add"),r.from);return i?(d(e,n),i):(l(),void n())},beforeRemoveClass:function(e,t,n,r){r=r||{};var i=E("removeClass",e,k(t,"-remove"),r.from);return i?(d(e,n),i):(l(),void n())},setClass:function(e,t,n,r,i){i=i||{},n=k(n,"-remove"),t=k(t,"-add");var a=n+" "+t;return T("setClass",e,a,r,i.to)},addClass:function(e,t,n,r){return r=r||{},T("addClass",e,k(t,"-add"),n,r.to)},removeClass:function(e,t,n,r){return r=r||{},T("removeClass",e,k(t,"-remove"),n,r.to)}}}])}])}(window,window.angular),angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(e){return e}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","$http","$cacheFactory","$interpolate","$rootScope",function(e,t,n,r,i){function a(){i.$broadcast("gettextLanguageChanged")}var o,s="$$noContext",l='<span id="test" title="test" class="tested">test</span>',u=angular.element("<span>"+l+"</span>").html()!==l,c=function(e){return o.debug&&o.currentLanguage!==o.baseLanguage?o.debugPrefix+e:e},f=function(e){return o.showTranslatedMarkers?o.translatedMarkerPrefix+e+o.translatedMarkerSuffix:e};return o={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:n("strings"),setCurrentLanguage:function(e){this.currentLanguage=e,a()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(e,t){this.strings[e]||(this.strings[e]={});for(var n in t){var r=t[n];if(u&&(n=angular.element("<span>"+n+"</span>").html()),angular.isString(r)||angular.isArray(r)){var i={};i[s]=r,r=i}for(var o in r){var l=r[o];r[o]=angular.isArray(l)?l:[l]}this.strings[e][n]=r}a()},getStringForm:function(e,t,n){var r=this.strings[this.currentLanguage]||{},i=r[e]||{},a=i[n||s]||[];return a[t]},getString:function(e,t,n){return e=this.getStringForm(e,0,n)||c(e),e=t?r(e)(t):e,f(e)},getPlural:function(t,n,i,a,o){var s=e(this.currentLanguage,t);return n=this.getStringForm(n,s,o)||c(1===t?n:i),a&&(a.$count=t,n=r(n)(a)),f(n)},loadRemote:function(e){return t({method:"GET",url:e,cache:o.cache}).then(function(e){var t=e.data;for(var n in t)o.setStrings(n,t[n]);return e})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(e,t,n,r,i){function a(e,t,n){if(!e)throw new Error("You should add a "+t+" attribute whenever you add a "+n+" attribute.")}var o=function(){return String.prototype.trim?function(e){return"string"==typeof e?e.trim():e}:function(e){return"string"==typeof e?e.replace(/^\s*/,"").replace(/\s*$/,""):e}}(),s=parseInt((/msie (\d+)/.exec(angular.lowercase(i.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(i,l){a(!l.translatePlural||l.translateN,"translate-n","translate-plural"),a(!l.translateN||l.translatePlural,"translate-plural","translate-n");var u=o(i.html()),c=l.translatePlural,f=l.translateContext;return 8>=s&&"<!--IE fix-->"===u.slice(-13)&&(u=u.slice(0,-13)),{post:function(i,a,s){function l(){var t;c?(i=p||(p=i.$new()),i.$count=d(i),t=e.getPlural(i.$count,u,c,null,f)):t=e.getString(u,null,f);var s=a.contents();if(0!==s.length){if(t===o(s.html()))return void(h&&r(s)(i));var l=angular.element("<span>"+t+"</span>");r(l.contents())(i);var m=l.contents();n.enter(m,a),n.leave(s)}}var d=t(s.translateN),p=null,h=!0;s.translateN&&i.$watch(s.translateN,l),i.$on("gettextLanguageChanged",l),l(),h=!1}}}}}]),angular.module("gettext").filter("translate",["gettextCatalog",function(e){function t(t,n){return e.getString(t,null,n)}return t.$stateful=!0,t}]),angular.module("gettext").factory("gettextPlurals",function(){return function(e,t){switch(e){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return t%10!=1||t%100==11?1:0;case"jv":return 0!=t?1:0;case"mk":return 1==t||t%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return t>1?1:0;case"lv":return t%10==1&&t%100!=11?0:0!=t?1:2;case"lt":return t%10==1&&t%100!=11?0:t%10>=2&&(10>t%100||t%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return t%10==1&&t%100!=11?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2;case"mnk":return 0==t?0:1==t?1:2;case"ro":return 1==t?0:0==t||t%100>0&&20>t%100?1:2;case"pl":return 1==t?0:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?1:2;case"cs":case"sk":return 1==t?0:t>=2&&4>=t?1:2;case"sl":return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0;case"mt":return 1==t?0:0==t||t%100>1&&11>t%100?1:t%100>10&&20>t%100?2:3;case"gd":return 1==t||11==t?0:2==t||12==t?1:t>2&&20>t?2:3;case"cy":return 1==t?0:2==t?1:8!=t&&11!=t?2:3;case"kw":return 1==t?0:2==t?1:3==t?2:3;case"ga":return 1==t?0:2==t?1:7>t?2:11>t?3:4;case"ar":return 0==t?0:1==t?1:2==t?2:t%100>=3&&10>=t%100?3:t%100>=11?4:5;default:return 1!=t?1:0}}}),!function(e,t){function n(e){try{return 0!==angular.element(e).length}catch(t){return!1}}function r(e,t){if(!e||""===e||i.hasOwnProperty(e))throw"textAngular Error: A unique name is required for a Tool Definition";if(t.display&&(""===t.display||!n(t.display))||!t.display&&!t.buttontext&&!t.iconclass)throw'textAngular Error: Tool Definition for "'+e+'" does not have a valid display/iconclass/buttontext value';i[e]=t}t["true"]=e;var i={};angular.module("textAngularSetup",[]).constant("taRegisterTool",r).value("taTools",i).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(){},htmlEditorSetup:function(){}},defaultFileDropHandler:function(e,t){var n=new FileReader;return"image"===e.type.substring(0,5)?(n.onload=function(){""!==n.result&&t("insertImage",n.result,!0)},n.readAsDataURL(e),!0):!1}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(e){var t=angular.element("<iframe></iframe>"),n=e.prop("attributes");angular.forEach(n,function(e){t.attr(e.name,e.value)}),t.attr("src",t.attr("ta-insert-video")),e.replaceWith(t)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(e,t){return{imgOnSelectAction:function(e,t,n){var r=function(){n.updateTaBindtaTextElement(),n.hidePopover()};e.preventDefault(),n.displayElements.popover.css("width","375px");var i=n.displayElements.popoverContainer;i.empty();var a=angular.element('<div class="btn-group" style="padding-right: 6px;">'),o=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');o.on("click",function(e){e.preventDefault(),t.css({width:"100%",height:""}),r()});var s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');s.on("click",function(e){e.preventDefault(),t.css({width:"50%",height:""}),r()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');l.on("click",function(e){e.preventDefault(),t.css({width:"25%",height:""}),r()});var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');
u.on("click",function(e){e.preventDefault(),t.css({width:"",height:""}),r()}),a.append(o),a.append(s),a.append(l),a.append(u),i.append(a),a=angular.element('<div class="btn-group" style="padding-right: 6px;">');var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');c.on("click",function(e){e.preventDefault(),t.css("float","left"),t.css("cssFloat","left"),t.css("styleFloat","left"),r()});var f=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');f.on("click",function(e){e.preventDefault(),t.css("float","right"),t.css("cssFloat","right"),t.css("styleFloat","right"),r()});var d=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');d.on("click",function(e){e.preventDefault(),t.css("float",""),t.css("cssFloat",""),t.css("styleFloat",""),r()}),a.append(c),a.append(d),a.append(f),i.append(a),a=angular.element('<div class="btn-group">');var p=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');p.on("click",function(e){e.preventDefault(),t.remove(),r()}),a.append(p),i.append(a),n.showPopover(t),n.showResizeOverlay(t)},aOnSelectAction:function(n,r,i){n.preventDefault(),i.displayElements.popover.css("width","436px");var a=i.displayElements.popoverContainer;a.empty(),a.css("line-height","28px");var o=angular.element('<a href="'+r.attr("href")+'" target="_blank">'+r.attr("href")+"</a>");o.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),a.append(o);var s=angular.element('<div class="btn-group pull-right">'),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');l.on("click",function(n){n.preventDefault();var a=e.prompt(t.insertLink.dialogPrompt,r.attr("href"));a&&""!==a&&"http://"!==a&&(r.attr("href",a),i.updateTaBindtaTextElement()),i.hidePopover()}),s.append(l);var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');u.on("click",function(e){e.preventDefault(),r.replaceWith(r.contents()),i.updateTaBindtaTextElement(),i.hidePopover()}),s.append(u);var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+t.editLink.targetToggle.buttontext+"</button>");"_blank"===r.attr("target")&&c.addClass("active"),c.on("click",function(e){e.preventDefault(),r.attr("target","_blank"===r.attr("target")?"":"_blank"),c.toggleClass("active"),i.updateTaBindtaTextElement()}),s.append(c),a.append(s),i.showPopover(r)},extractYoutubeVideoId:function(e){var t=/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i,n=e.match(t);return n&&n[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(e,t,n,r,i,a,o){var s={};if(a("",s),o.forceTextAngularSanitize===!0&&"taSanitize"!==s.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");e("html",{iconclass:"fa fa-code",tooltiptext:n.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var l=function(e){return function(){return this.$editor().queryFormatBlockState(e)}},u=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(t){e(t.toLowerCase(),{buttontext:t.toUpperCase(),tooltiptext:n.heading.tooltip+t.charAt(1),action:u,activeState:l(t.toLowerCase())})}),e("p",{buttontext:"P",tooltiptext:n.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),e("pre",{buttontext:"pre",tooltiptext:n.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),e("ul",{iconclass:"fa fa-list-ul",tooltiptext:n.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),e("ol",{iconclass:"fa fa-list-ol",tooltiptext:n.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),e("quote",{iconclass:"fa fa-quote-right",tooltiptext:n.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),e("undo",{iconclass:"fa fa-undo",tooltiptext:n.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),e("redo",{iconclass:"fa fa-repeat",tooltiptext:n.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),e("bold",{iconclass:"fa fa-bold",tooltiptext:n.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),e("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:n.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="left"===e.css("text-align")||"left"===e.attr("align")||"right"!==e.css("text-align")&&"center"!==e.css("text-align")&&"justify"!==e.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),t=t||this.$editor().queryCommandState("justifyLeft")}}),e("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:n.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="right"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyRight")}}),e("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:n.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(e){var t=!1;return e&&(t="justify"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyFull")}}),e("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:n.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="center"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyCenter")}}),e("indent",{iconclass:"fa fa-indent",tooltiptext:n.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),e("outdent",{iconclass:"fa fa-outdent",tooltiptext:n.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),e("italics",{iconclass:"fa fa-italic",tooltiptext:n.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),e("underline",{iconclass:"fa fa-underline",tooltiptext:n.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),e("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:n.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),e("clear",{iconclass:"fa fa-ban",tooltiptext:n.clear.tooltip,action:function(e,t){var n;this.$editor().wrapSelection("removeFormat",null);var i=angular.element(r.getSelectionElement()),a=function(e){e=angular.element(e);var t=e;angular.forEach(e.children(),function(e){var n=angular.element("<p></p>");n.html(angular.element(e).html()),t.after(n),t=n}),e.remove()};if(angular.forEach(i.find("ul"),a),angular.forEach(i.find("ol"),a),"li"===i[0].tagName.toLowerCase()){var o=i[0].parentNode.childNodes,s=[],l=[],u=!1;for(n=0;n<o.length;n++)o[n]===i[0]?u=!0:u?l.push(o[n]):s.push(o[n]);var c=angular.element(i[0].parentNode),f=angular.element("<p></p>");if(f.html(angular.element(i[0]).html()),0===s.length||0===l.length)0===l.length?c.after(f):c[0].parentNode.insertBefore(f[0],c[0]),0===s.length&&0===l.length?c.remove():angular.element(i[0]).remove();else{var d=angular.element("<"+c[0].tagName+"></"+c[0].tagName+">"),p=angular.element("<"+c[0].tagName+"></"+c[0].tagName+">");for(n=0;n<s.length;n++)d.append(angular.element(s[n]));for(n=0;n<l.length;n++)p.append(angular.element(l[n]));c.after(p),c.after(f),c.after(d),c.remove()}r.setSelectionToElementEnd(f[0])}var h=this.$editor(),m=function(e){e=angular.element(e),e[0]!==h.displayElements.text[0]&&e.removeAttr("class"),angular.forEach(e.children(),m)};angular.forEach(i,m),"li"!==i[0].tagName.toLowerCase()&&"ol"!==i[0].tagName.toLowerCase()&&"ul"!==i[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),t()}}),e("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:n.insertImage.tooltip,action:function(){var e;return e=t.prompt(n.insertImage.dialogPrompt,"http://"),e&&""!==e&&"http://"!==e?this.$editor().wrapSelection("insertImage",e,!0):void 0},onElementSelect:{element:"img",action:i.imgOnSelectAction}}),e("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:n.insertVideo.tooltip,action:function(){var e;if(e=t.prompt(n.insertVideo.dialogPrompt,"https://"),e&&""!==e&&"https://"!==e&&(videoId=i.extractYoutubeVideoId(e),videoId)){var r="https://www.youtube.com/embed/"+videoId,a='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+r+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",a,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:i.imgOnSelectAction}}),e("insertLink",{tooltiptext:n.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var e;return e=t.prompt(n.insertLink.dialogPrompt,"http://"),e&&""!==e&&"http://"!==e?this.$editor().wrapSelection("createLink",e,!0):void 0},activeState:function(e){return e?"A"===e[0].tagName:!1},onElementSelect:{element:"a",action:i.aOnSelectAction}}),e("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerHTML||"",n=0;return""!==t.replace(/\s*<[^>]*?>\s*/g,"")&&(n=t.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=n,this.$editor().wordcount=n,!1}}),e("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=e[0].innerText||e[0].textContent,n=t.replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=n,this.$editor().charcount=n,!1}})}]),"undefined"!=typeof module&&"undefined"!=typeof e&&module.exports===e&&(module.exports="textAngular"),function(){"use strict";var t={ie:function(){for(var e,t=3,n=document.createElement("div"),r=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",r[0];);return t>4?t:e}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},n=!1;t.webkit&&(document.addEventListener("mousedown",function(e){var t=e||window.event,r=t.target;if(n&&null!==r){for(var i=!1,a=r;null!==a&&"html"!==a.tagName.toLowerCase()&&!i;)i="true"===a.contentEditable,a=a.parentNode;i||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),r.focus(),r.select&&r.select())}n=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var r=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,a=/^(ul|li|ol)$/i,o=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var s,l,u,c,f,d;if(t.ie>8||void 0===t.ie){for(var p=document.styleSheets,h=0;h<p.length;h++)if((0===p[h].media.length||p[h].media.mediaText.match(/(all|screen)/gi))&&p[h].href&&p[h].href.match(/textangular\.(min\.|)css/gi)){s=p[h];break}s||(s=function(){var e=document.createElement("style");return t.webkit&&e.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(e),e.sheet}()),l=function(e,t){return c(s,e,t)},c=function(e,t,n){var r,i;return e.cssRules?r=Math.max(e.cssRules.length-1,0):e.rules&&(r=Math.max(e.rules.length-1,0)),e.insertRule?e.insertRule(t+"{"+n+"}",r):e.addRule(t,n,r),s.rules?i=s.rules[r]:s.cssRules&&(i=s.cssRules[r]),i},d=function(e,t){var n,r;for(n=0;n<t.length;n++)if(t[n].cssText===e.cssText){r=n;break}return r},u=function(e){f(s,e)},f=function(e,t){var n=e.cssRules||e.rules;if(n&&0!==n.length){var r=d(t,n);e.removeRule?e.removeRule(r):e.deleteRule(r)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(e){return e?""===e?void 0===t.ie?"div":t.ie<=8?"P":"p":t.ie<=8?e.toUpperCase():e:t.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(e,t){return function(n){var r=angular.element("<div></div>");return r[0].innerHTML=n,angular.forEach(e,function(e){var n=[];e.selector&&""!==e.selector?n=r.find(e.selector):e.customAttribute&&""!==e.customAttribute&&(n=t.getByAttribute(r,e.customAttribute)),angular.forEach(n,function(t){t=angular.element(t),e.selector&&""!==e.selector&&e.customAttribute&&""!==e.customAttribute?void 0!==t.attr(e.customAttribute)&&e.renderLogic(t):e.renderLogic(t)})}),r[0].innerHTML}}]).factory("taFixChrome",function(){var e=function(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n,r,i=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,a="",o=0;t=i.exec(e);)n=t[3]||t[4],n&&n.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(n=n.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),r="<"+t[1].trim(),n.trim().length>0&&(r+=" style="+t[2].substring(0,1)+n+t[2].substring(0,1)),r+=t[5].trim()+">",a+=e.substring(o,t.index)+r,o=t.index+t[0].length);return a+=e.substring(o),o>0?a.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):e};return e}).factory("taSanitize",["$sanitize",function(e){function t(e,t){for(var n,r=0,i=0,a=/<[^>]*>/gi;n=a.exec(e);)if(i=n.index,"/"===n[0].substr(1,1)){if(0===r)break;r--}else r++;return t+e.substring(0,i)+angular.element(t)[0].outerHTML.substring(t.length)+e.substring(i)}function n(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var r,a,o,s,l,c,f=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,d="",p="",h=0;a=f.exec(e);){s=a[3]||a[4];var m=new RegExp(u,"i");if(angular.isString(s)&&m.test(s)){l="";for(var g=new RegExp(u,"ig");o=g.exec(s);)for(r=0;r<i.length;r++)o[2*r+2]&&(l+="<"+i[r].tag+">");c=n(e.substring(h,a.index)),p+=d.length>0?t(c,d):c,s=s.replace(new RegExp(u,"ig"),""),p+="<"+a[1].trim(),s.length>0&&(p+=' style="'+s+'"'),p+=a[5]+">",h=a.index+a[0].length,d=l}}return p+=d.length>0?t(e.substring(h),d):e.substring(h)}function r(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,r="",i=0;t=n.exec(e);){r+=e.substring(i,t.index),i=t.index+t[0].length;var a="<"+t[1]+t[5];/style=("([^"]+)"|'([^']+)')/gi.test(a)?a=a.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(t[3]||t[4])+';"'):a+=' style="text-align:'+(t[3]||t[4])+';"',a+=">",r+=a}return r+e.substring(i)}for(var i=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],a=[],o=0;o<i.length;o++){for(var s="("+i[o].property+":\\s*(",l=0;l<i[o].values.length;l++)l>0&&(s+="|"),s+=i[o].values[l];s+=");)",a.push(s)}var u="("+a.join("|")+")";return function(t,i,a){if(!a)try{t=n(t)}catch(o){}t=r(t);var s;try{s=e(t),a&&(s=t)}catch(o){s=i||""}var l,u=s.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),c=s.replace(/(&#(9|10);)*/gi,""),f=/<pre[^>]*>.*?<\/pre[^>]*>/gi,d=0,p=0;for(s="";null!==(l=f.exec(c))&&d<u.length;)s+=c.substring(p,l.index)+u[d],p=l.index+l[0].length,d++;return s+c.substring(p)}}]).factory("taToolExecuteAction",["$q","$log",function(e,t){return function(n){void 0!==n&&(this.$editor=function(){return n});var r,i=e.defer(),a=i.promise,o=this.$editor();try{r=this.action(i,o.startAction()),a["finally"](function(){o.endAction.call(o)})}catch(s){t.error(s)}(r||void 0===r)&&i.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(e,t,n){var i=function(t,n){var r,i,a=t.find("li");for(i=a.length-1;i>=0;i--)r=angular.element("<"+n+">"+a[i].innerHTML+"</"+n+">"),t.after(r);t.remove(),e.setSelectionToElementEnd(r[0])},o=function(t){/(<br(|\/)>)$/i.test(t.innerHTML.trim())?e.setSelectionBeforeElement(angular.element(t).find("br")[0]):e.setSelectionToElementEnd(t)},s=function(e,t){var n=angular.element("<"+t+">"+e[0].innerHTML+"</"+t+">");e.after(n),e.remove(),o(n.find("li")[0])},l=function(e,n,r){for(var i="",a=0;a<e.length;a++)i+="<"+t("li")+">"+e[a].innerHTML+"</"+t("li")+">";var s=angular.element("<"+r+">"+i+"</"+r+">");n.after(s),n.remove(),o(s.find("li")[0])};return function(o,u){return o=t(o),function(c,f,d,p){var h,m,g,v,$,y,b,w=angular.element("<"+o+">");try{b=e.getSelectionElement()}catch(C){}var x=angular.element(b);if(void 0!==b){var S=b.tagName.toLowerCase();if("insertorderedlist"===c.toLowerCase()||"insertunorderedlist"===c.toLowerCase()){var E=t("insertorderedlist"===c.toLowerCase()?"ol":"ul");if(S===E)return i(x,o);if("li"===S&&x.parent()[0].tagName.toLowerCase()===E&&1===x.parent().children().length)return i(x.parent(),o);if("li"===S&&x.parent()[0].tagName.toLowerCase()!==E&&1===x.parent().children().length)return s(x.parent(),E);if(S.match(r)&&!x.hasClass("ta-bind")){if("ol"===S||"ul"===S)return s(x,E);var T=!1;return angular.forEach(x.children(),function(e){e.tagName.match(r)&&(T=!0)}),T?l(x.children(),x,E):l([angular.element("<div>"+b.innerHTML+"</div>")[0]],x,E)}if(S.match(r)){if(v=e.getOnlySelectedElements(),0===v.length)m=angular.element("<"+E+"><li>"+b.innerHTML+"</li></"+E+">"),x.html(""),x.append(m);else{if(1===v.length&&("ol"===v[0].tagName.toLowerCase()||"ul"===v[0].tagName.toLowerCase()))return v[0].tagName.toLowerCase()===E?i(angular.element(v[0]),o):s(angular.element(v[0]),E);g="";var A=[];for(h=0;h<v.length;h++)if(3!==v[h].nodeType){var R=angular.element(v[h]);if("li"===v[h].tagName.toLowerCase())continue;g+="ol"===v[h].tagName.toLowerCase()||"ul"===v[h].tagName.toLowerCase()?R[0].innerHTML:"span"!==v[h].tagName.toLowerCase()||"ol"!==v[h].childNodes[0].tagName.toLowerCase()&&"ul"!==v[h].childNodes[0].tagName.toLowerCase()?"<"+t("li")+">"+R[0].innerHTML+"</"+t("li")+">":R[0].childNodes[0].innerHTML,A.unshift(R)}m=angular.element("<"+E+">"+g+"</"+E+">"),A.pop().replaceWith(m),angular.forEach(A,function(e){e.remove()})}return void e.setSelectionToElementEnd(m[0])}}else{if("formatblock"===c.toLowerCase()){for(y=d.toLowerCase().replace(/[<>]/gi,""),"default"===y.trim()&&(y=o,d="<"+o+">"),m="li"===S?x.parent():x;!m[0].tagName||!m[0].tagName.match(r)&&!m.parent().attr("contenteditable");)m=m.parent(),S=(m[0].tagName||"").toLowerCase();if(S===y){v=m.children();var k=!1;for(h=0;h<v.length;h++)k=k||v[h].tagName.match(r);k?(m.after(v),$=m.next(),m.remove(),m=$):(w.append(m[0].childNodes),m.after(w),m.remove(),m=w)}else if(m.parent()[0].tagName.toLowerCase()!==y||m.parent().hasClass("ta-bind"))if(S.match(a))m.wrap(d);else{for(v=e.getOnlySelectedElements(),0===v.length&&(v=[m[0]]),h=0;h<v.length;h++)if(3===v[h].nodeType||!v[h].tagName.match(r))for(;3===v[h].nodeType||!v[h].tagName||!v[h].tagName.match(r);)v[h]=v[h].parentNode;if(angular.element(v[0]).hasClass("ta-bind"))m=angular.element(d),m[0].innerHTML=v[0].innerHTML,v[0].innerHTML=m[0].outerHTML;else if("blockquote"===y){for(g="",h=0;h<v.length;h++)g+=v[h].outerHTML;for(m=angular.element(d),m[0].innerHTML=g,v[0].parentNode.insertBefore(m[0],v[0]),h=v.length-1;h>=0;h--)v[h].parentNode&&v[h].parentNode.removeChild(v[h])}else for(h=0;h<v.length;h++)m=angular.element(d),m[0].innerHTML=v[h].innerHTML,v[h].parentNode.insertBefore(m[0],v[h]),v[h].parentNode.removeChild(v[h])}else{var N=m.parent(),P=N.contents();for(h=0;h<P.length;h++)N.parent().hasClass("ta-bind")&&3===P[h].nodeType&&(w=angular.element("<"+o+">"),w[0].innerHTML=P[h].outerHTML,P[h]=w[0]),N.parent()[0].insertBefore(P[h],N[0]);N.remove()}return void e.setSelectionToElementEnd(m[0])}if("createlink"===c.toLowerCase()){var U='<a href="'+d+'" target="'+(p.a.target?p.a.target:"")+'">',D="</a>",M=e.getSelection();if(M.collapsed)e.insertHtml(U+d+D,u);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var I=angular.element(U+D)[0];rangy.getSelection().getRangeAt(0).surroundContents(I)}return}if("inserthtml"===c.toLowerCase())return void e.insertHtml(d,u)}}try{n[0].execCommand(c,f,d)}catch(C){}}}}]).service("taSelection",["$window","$document","taDOM",function(e,t,n){var i=t[0],a=e.rangy,s=function(e,t){return e.tagName&&e.tagName.match(/^br$/i)&&0===t&&!e.previousSibling?{element:e.parentNode,offset:0}:{element:e,offset:t}},l={getSelection:function(){var e=a.getSelection().getRangeAt(0),t=e.commonAncestorContainer,n={start:s(e.startContainer,e.startOffset),end:s(e.endContainer,e.endOffset),collapsed:e.collapsed};return t=3===t.nodeType?t.parentNode:t,n.container=t.parentNode===n.start.element||t.parentNode===n.end.element?t.parentNode:t,n},getOnlySelectedElements:function(){var e=a.getSelection().getRangeAt(0),t=e.commonAncestorContainer;return t=3===t.nodeType?t.parentNode:t,e.getNodes([1],function(e){return e.parentNode===t})},getSelectionElement:function(){return l.getSelection().container},setSelection:function(e,t,n){var r=a.createRange();r.setStart(e,t),r.setEnd(e,n),a.getSelection().setSingleRange(r)},setSelectionBeforeElement:function(e){var t=a.createRange();t.selectNode(e),t.collapse(!0),a.getSelection().setSingleRange(t)},setSelectionAfterElement:function(e){var t=a.createRange();t.selectNode(e),t.collapse(!1),a.getSelection().setSingleRange(t)},setSelectionToElementStart:function(e){var t=a.createRange();t.selectNodeContents(e),t.collapse(!0),a.getSelection().setSingleRange(t)},setSelectionToElementEnd:function(e){var t=a.createRange();t.selectNodeContents(e),t.collapse(!1),e.childNodes&&e.childNodes[e.childNodes.length-1]&&"br"===e.childNodes[e.childNodes.length-1].nodeName&&(t.startOffset=t.endOffset=t.startOffset-1),a.getSelection().setSingleRange(t)},insertHtml:function(e,t){var s,u,c,f,d,p,h,m=angular.element("<div>"+e+"</div>"),g=a.getSelection().getRangeAt(0),v=i.createDocumentFragment(),$=m[0].childNodes,y=!0;if($.length>0){for(f=[],c=0;c<$.length;c++)"p"===$[c].nodeName.toLowerCase()&&""===$[c].innerHTML.trim()||3===$[c].nodeType&&""===$[c].nodeValue.trim()||(y=y&&!r.test($[c].nodeName),f.push($[c]));for(var b=0;b<f.length;b++)p=v.appendChild(f[b]);!y&&g.collapsed&&/^(|<br(|\/)>)$/i.test(g.startContainer.innerHTML)&&g.selectNode(g.startContainer)}else y=!0,p=v=i.createTextNode(e);if(y)g.deleteContents();else if(g.collapsed&&g.startContainer!==t)if(g.startContainer.innerHTML&&g.startContainer.innerHTML.match(/^<[^>]*>$/i))s=g.startContainer,1===g.startOffset?(g.setStartAfter(s),g.setEndAfter(s)):(g.setStartBefore(s),g.setEndBefore(s));else{if(3===g.startContainer.nodeType&&g.startContainer.parentNode!==t)for(s=g.startContainer.parentNode,u=s.cloneNode(),n.splitNodes(s.childNodes,s,u,g.startContainer,g.startOffset);!o.test(s.nodeName);){angular.element(s).after(u),s=s.parentNode;var w=u;u=s.cloneNode(),n.splitNodes(s.childNodes,s,u,w)}else s=g.startContainer,u=s.cloneNode(),n.splitNodes(s.childNodes,s,u,void 0,void 0,g.startOffset);if(angular.element(s).after(u),g.setStartAfter(s),g.setEndAfter(s),/^(|<br(|\/)>)$/i.test(s.innerHTML.trim())&&(g.setStartBefore(s),g.setEndBefore(s),angular.element(s).remove()),/^(|<br(|\/)>)$/i.test(u.innerHTML.trim())&&angular.element(u).remove(),"li"===s.nodeName.toLowerCase()){for(h=i.createDocumentFragment(),d=0;d<v.childNodes.length;d++)m=angular.element("<li>"),n.transferChildNodes(v.childNodes[d],m[0]),n.transferNodeAttributes(v.childNodes[d],m[0]),h.appendChild(m[0]);v=h,p&&(p=v.childNodes[v.childNodes.length-1],p=p.childNodes[p.childNodes.length-1])}}else g.deleteContents();g.insertNode(v),p&&l.setSelectionToElementEnd(p)}};return l}]).service("taDOM",function(){var e={getByAttribute:function(t,n){var r=[],i=t.children();return i.length&&angular.forEach(i,function(t){r=r.concat(e.getByAttribute(angular.element(t),n))}),void 0!==t.attr(n)&&r.push(t),r},transferChildNodes:function(e,t){for(t.innerHTML="";e.childNodes.length>0;)t.appendChild(e.childNodes[0]);return t},splitNodes:function(t,n,r,i,a,o){if(!i&&isNaN(o))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var s=document.createDocumentFragment(),l=document.createDocumentFragment(),u=0;t.length>0&&(isNaN(o)||o!==u)&&t[0]!==i;)s.appendChild(t[0]),u++;for(!isNaN(a)&&a>=0&&t[0]&&(s.appendChild(document.createTextNode(t[0].nodeValue.substring(0,a))),t[0].nodeValue=t[0].nodeValue.substring(a));t.length>0;)l.appendChild(t[0]);e.transferChildNodes(s,n),e.transferChildNodes(l,r)},transferNodeAttributes:function(e,t){for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}};return e}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMaxText));if(isNaN(i))throw"Max text must be an integer";n.$observe("taMaxText",function(e){if(i=parseInt(e),isNaN(i))throw"Max text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMaxText=function(e){var t=angular.element("<div/>");return t.html(e),t.text().length<=i}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMinText));if(isNaN(i))throw"Min text must be an integer";n.$observe("taMinText",function(e){if(i=parseInt(e),isNaN(i))throw"Min text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMinText=function(e){var t=angular.element("<div/>");return t.html(e),!t.text().length||t.text().length>=i}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var e=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(t){return function(n){if(!n)return!0;var r,i=/(^[^<]|>)[^<]/i.exec(n);return i?r=i.index:(n=n.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,""),r=n.indexOf(">")),n=n.trim().substring(r,r+100),/^[^<>]+$/i.test(n)?!1:0===n.length||n===t||/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(n)?!0:/>\s*[^\s<]/i.test(n)||e.test(n)?!1:!0}}}]).directive("taButton",[function(){return{link:function(e,t){t.attr("unselectable","on"),t.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(e,i,a,s,c,f,d,p,h,g,v,$,y,b){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(f,w,C,x){function S(e){var t;return q.forEach(function(n){if(n.keyCode===e.keyCode){var r=(e.metaKey?F:0)+(e.ctrlKey?H:0)+(e.shiftKey?B:0)+(e.altKey?j:0);if(n.forbiddenModifiers&r)return;n.mustHaveModifiers.every(function(e){return r&e})&&(t=n.specialKey)}}),t}var E,T,A,R,k=x[0],N=x[1]||{},P=void 0!==w.attr("contenteditable")&&w.attr("contenteditable"),U=P||"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase(),D=!1,M=!1,I=!1,O=C.taUnsafeSanitizer||g.disableSanitizer,L=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,_=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,H=1,F=2,j=4,B=8,q=[{specialKey:"UndoKey",forbiddenModifiers:j+B,mustHaveModifiers:[F+H],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:j,mustHaveModifiers:[F+H,B],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:j+B,mustHaveModifiers:[F+H],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:F+B+j+H,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:F+j+H,mustHaveModifiers:[B],keyCode:9}];void 0===C.taDefaultWrap&&(C.taDefaultWrap="p"),""===C.taDefaultWrap?(A="",R=void 0===t.ie?"<div><br></div>":t.ie>=11?"<p><br></p>":t.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(A=void 0===t.ie||t.ie>=11?"<"+C.taDefaultWrap+"><br></"+C.taDefaultWrap+">":t.ie<=8?"<"+C.taDefaultWrap.toUpperCase()+"></"+C.taDefaultWrap.toUpperCase()+">":"<"+C.taDefaultWrap+"></"+C.taDefaultWrap+">",R=void 0===t.ie||t.ie>=11?"<"+C.taDefaultWrap+"><br></"+C.taDefaultWrap+">":t.ie<=8?"<"+C.taDefaultWrap.toUpperCase()+">&nbsp;</"+C.taDefaultWrap.toUpperCase()+">":"<"+C.taDefaultWrap+">&nbsp;</"+C.taDefaultWrap+">"),N.$options||(N.$options={});var V=v(R),z=function(e){if(V(e))return e;var t=angular.element("<div>"+e+"</div>");if(0===t.children().length)e="<"+C.taDefaultWrap+">"+e+"</"+C.taDefaultWrap+">";else{var n,i=t[0].childNodes,a=!1;for(n=0;n<i.length&&!(a=i[n].nodeName.toLowerCase().match(r));n++);if(a)for(e="",n=0;n<i.length;n++){var o=i[n],s=o.nodeName.toLowerCase();if("#comment"===s)e+="<!--"+o.nodeValue+"-->";else if("#text"===s){var l=o.textContent;e+=l.trim()?"<"+C.taDefaultWrap+">"+l+"</"+C.taDefaultWrap+">":l}else if(s.match(r))e+=o.outerHTML;else{var u=o.outerHTML||o.nodeValue;e+=""!==u.trim()?"<"+C.taDefaultWrap+">"+u+"</"+C.taDefaultWrap+">":u}}else e="<"+C.taDefaultWrap+">"+e+"</"+C.taDefaultWrap+">"}return e};C.taPaste&&(T=$(C.taPaste)),w.addClass("ta-bind");var W;f["$undoManager"+(C.id||"")]=k.$undoManager={_stack:[],_index:0,_max:1e3,push:function(e){return"undefined"==typeof e||null===e||"undefined"!=typeof this.current()&&null!==this.current()&&e===this.current()?e:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(e),W&&i.cancel(W),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,e)
},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(e){return 0>e||e>this._stack.length-1?void 0:(this._index=e,this.current())},current:function(){return this._stack[this._index]}};var G,K=f["$undoTaBind"+(C.id||"")]=function(){if(!D&&P){var e=k.$undoManager.undo();"undefined"!=typeof e&&null!==e&&(ct(e),Q(e,!1),G&&i.cancel(G),G=i(function(){w[0].focus(),d.setSelectionToElementEnd(w[0])},1))}},Y=f["$redoTaBind"+(C.id||"")]=function(){if(!D&&P){var e=k.$undoManager.redo();"undefined"!=typeof e&&null!==e&&(ct(e),Q(e,!1),G&&i.cancel(G),G=i(function(){w[0].focus(),d.setSelectionToElementEnd(w[0])},1))}},J=function(){if(P)return w[0].innerHTML;if(U)return w.val();throw"textAngular Error: attempting to update non-editable taBind"},Q=function(e,t,n){I=n||!1,("undefined"==typeof t||null===t)&&(t=!0&&P),("undefined"==typeof e||null===e)&&(e=J()),V(e)?(""!==k.$viewValue&&k.$setViewValue(""),t&&""!==k.$undoManager.current()&&k.$undoManager.push("")):(ut(),k.$viewValue!==e&&(k.$setViewValue(e),t&&k.$undoManager.push(e))),k.$render()};f["updateTaBind"+(C.id||"")]=function(){D||Q(void 0,void 0,!0)};var Z=function(t){return k.$oldViewValue=e(c(t),k.$oldViewValue,O)};if(w.attr("required")&&(k.$validators.required=function(e,t){return!V(e||t)}),k.$parsers.push(Z),k.$parsers.unshift(z),k.$formatters.push(Z),k.$formatters.unshift(z),k.$formatters.unshift(function(e){return k.$undoManager.push(e||"")}),U)if(f.events={},P){var X=!1,et=function(t){if(t&&t.trim().length){if(t.match(/class=["']*Mso(Normal|List)/i)){var n=t.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);n=n?n[1]:t,n=n.replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var r=angular.element("<div>"+n+"</div>"),a=angular.element("<div></div>"),o={element:null,lastIndent:[],lastLi:null,isUl:!1};o.lastIndent.peek=function(){var e=this.length;return e>0?this[e-1]:void 0};for(var s=function(e){o.isUl=e,o.element=angular.element(e?"<ul>":"<ol>"),o.lastIndent=[],o.lastIndent.peek=function(){var e=this.length;return e>0?this[e-1]:void 0},o.lastLevelMatch=null},l=0;l<=r[0].childNodes.length;l++)if(r[0].childNodes[l]&&"#text"!==r[0].childNodes[l].nodeName&&"p"===r[0].childNodes[l].tagName.toLowerCase()){var u=angular.element(r[0].childNodes[l]),c=(u.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(c){if(u[0].childNodes.length<2||u[0].childNodes[1].childNodes.length<1)continue;var p="bullet"===c[1].toLowerCase()||"number"!==c[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(u[0].childNodes[1].childNodes[0].innerHTML)),h=(u.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),m=parseFloat(h?h[1]:0),g=(u.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(g&&g[2]&&(m=parseInt(g[2])),g&&(!o.lastLevelMatch||g[1]!==o.lastLevelMatch[1])||!c[3]||"first"===c[3].toLowerCase()||null===o.lastIndent.peek()||o.isUl!==p&&o.lastIndent.peek()===m)s(p),a.append(o.element);else if(null!=o.lastIndent.peek()&&o.lastIndent.peek()<m)o.element=angular.element(p?"<ul>":"<ol>"),o.lastLi.append(o.element);else if(null!=o.lastIndent.peek()&&o.lastIndent.peek()>m){for(;null!=o.lastIndent.peek()&&o.lastIndent.peek()>m;)if("li"!==o.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(o.element.parent()[0].tagName.toLowerCase()))break;o.element=o.element.parent(),o.lastIndent.pop()}else o.element=o.element.parent();o.isUl="ul"===o.element[0].tagName.toLowerCase(),p!==o.isUl&&(s(p),a.append(o.element))}o.lastLevelMatch=g,m!==o.lastIndent.peek()&&o.lastIndent.push(m),o.lastLi=angular.element("<li>"),o.element.append(o.lastLi),o.lastLi.html(u.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),u.remove()}else s(!1),a.append(u)}var v=function(e){e=angular.element(e);for(var t=e[0].childNodes.length-1;t>=0;t--)e.after(e[0].childNodes[t]);e.remove()};angular.forEach(a.find("span"),function(e){e.removeAttribute("lang"),e.attributes.length<=0&&v(e)}),angular.forEach(a.find("font"),v),t=a.html()}else{if(t=t.replace(/<(|\/)meta[^>]*?>/gi,""),t.match(/<[^>]*?(ta-bind)[^>]*?>/)){if(t.match(/<[^>]*?(text-angular)[^>]*?>/)){var $=angular.element("<div>"+t+"</div>");$.find("textarea").remove();for(var b=y.getByAttribute($,"ta-bind"),C=0;C<b.length;C++){for(var x=b[C][0].parentNode.parentNode,S=0;S<b[C][0].childNodes.length;S++)x.parentNode.insertBefore(b[C][0].childNodes[S],x);x.parentNode.removeChild(x)}t=$.html().replace('<br class="Apple-interchange-newline">',"")}}else t.match(/^<span/)&&(t.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(t=t.replace(/<(|\/)span[^>]*?>/gi,"")));t=t.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(t)&&/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(t)===!1&&(t=t.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),t=t.replace(/^[ |\u00A0]+/gm,function(e){for(var t="",n=0;n<e.length;n++)t+="&nbsp;";return t}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),T&&(t=T(f,{$html:t})||t),t=e(t,"",O),d.insertHtml(t,w[0]),i(function(){k.$setViewValue(J()),X=!1,w.removeClass("processing-paste")},0)}else X=!1,w.removeClass("processing-paste")};w.on("paste",f.events.paste=function(e,t){if(t&&angular.extend(e,t),D||X)return e.stopPropagation(),e.preventDefault(),!1;X=!0,w.addClass("processing-paste");var n,r=(e.originalEvent||e).clipboardData;if(r&&r.getData&&r.types.length>0){for(var o="",l=0;l<r.types.length;l++)o+=" "+r.types[l];return/text\/html/i.test(o)?n=r.getData("text/html"):/text\/plain/i.test(o)&&(n=r.getData("text/plain")),et(n),e.stopPropagation(),e.preventDefault(),!1}var u=a.rangy.saveSelection(),c=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');s.find("body").append(c),c[0].focus(),i(function(){a.rangy.restoreSelection(u),et(c[0].innerHTML),w[0].focus(),c.remove()},0)}),w.on("cut",f.events.cut=function(e){D?e.preventDefault():i(function(){k.$setViewValue(J())},0)}),w.on("keydown",f.events.keydown=function(e,t){t&&angular.extend(e,t),e.specialKey=S(e);var n;if(g.keyMappings.forEach(function(t){e.specialKey===t.commandKeyCode&&(e.specialKey=void 0),t.testForKey(e)&&(n=t.commandKeyCode),("UndoKey"===t.commandKeyCode||"RedoKey"===t.commandKeyCode)&&(t.enablePropagation||e.preventDefault())}),"undefined"!=typeof n&&(e.specialKey=n),"undefined"==typeof e.specialKey||"UndoKey"===e.specialKey&&"RedoKey"===e.specialKey||(e.preventDefault(),b.sendKeyCommand(f,e)),!D&&("UndoKey"===e.specialKey&&(K(),e.preventDefault()),"RedoKey"===e.specialKey&&(Y(),e.preventDefault()),13===e.keyCode&&!e.shiftKey)){var r,i=d.getSelectionElement();if(!i.tagName.match(o))return;var a=angular.element(A);if(/^<br(|\/)>$/i.test(i.innerHTML.trim())&&"blockquote"===i.parentNode.tagName.toLowerCase()&&!i.nextSibling){r=angular.element(i);var s=r.parent();s.after(a),r.remove(),0===s.children().length&&s.remove(),d.setSelectionToElementStart(a[0]),e.preventDefault()}else/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(i.innerHTML.trim())&&"blockquote"===i.tagName.toLowerCase()&&(r=angular.element(i),r.after(a),r.remove(),d.setSelectionToElementStart(a[0]),e.preventDefault())}});var tt;if(w.on("keyup",f.events.keyup=function(e,t){if(t&&angular.extend(e,t),9===e.keyCode){var n=d.getSelection();return void(n.start.element===w[0]&&w.children().length&&d.setSelectionToElementStart(w.children()[0]))}if(W&&i.cancel(W),!D&&!L.test(e.keyCode)){if(""!==A&&13===e.keyCode&&!e.shiftKey){for(var r=d.getSelectionElement();!r.tagName.match(o)&&r!==w[0];)r=r.parentNode;if(r.tagName.toLowerCase()!==C.taDefaultWrap&&"li"!==r.tagName.toLowerCase()&&(""===r.innerHTML.trim()||"<br>"===r.innerHTML.trim())){var a=angular.element(A);angular.element(r).replaceWith(a),d.setSelectionToElementStart(a[0])}}var s=J();""!==A&&""===s.trim()?(ct(A),d.setSelectionToElementStart(w.children()[0])):"<"!==s.substring(0,1)&&""!==C.taDefaultWrap;var l=E!==e.keyCode&&_.test(e.keyCode);tt&&i.cancel(tt),tt=i(function(){Q(s,l,!0)},N.$options.debounce||400),l||(W=i(function(){k.$undoManager.push(s)},250)),E=e.keyCode}}),w.on("blur",f.events.blur=function(){M=!1,D?(I=!0,k.$render()):Q(void 0,void 0,!0)}),C.placeholder&&(t.ie>8||void 0===t.ie)){var nt;if(!C.id)throw"textAngular Error: An unique ID is required for placeholders to work";nt=l("#"+C.id+".placeholder-text:before",'content: "'+C.placeholder+'"'),f.$on("$destroy",function(){u(nt)})}w.on("focus",f.events.focus=function(){M=!0,w.removeClass("placeholder-text"),ut()}),w.on("mouseup",f.events.mouseup=function(){var e=d.getSelection();e.start.element===w[0]&&w.children().length&&d.setSelectionToElementStart(w.children()[0])}),w.on("mousedown",f.events.mousedown=function(e,t){t&&angular.extend(e,t),e.stopPropagation()})}else{w.on("change blur",f.events.change=f.events.blur=function(){D||k.$setViewValue(J())}),w.on("keydown",f.events.keydown=function(e,t){if(t&&angular.extend(e,t),9===e.keyCode){var n=this.selectionStart,r=this.selectionEnd,i=w.val();if(e.shiftKey){var a=i.lastIndexOf("\n",n),o=i.lastIndexOf("	",n);-1!==o&&o>=a&&(w.val(i.substring(0,o)+i.substring(o+1)),this.selectionStart=this.selectionEnd=n-1)}else w.val(i.substring(0,n)+"	"+i.substring(r)),this.selectionStart=this.selectionEnd=n+1;e.preventDefault()}});var rt=function(e,t){for(var n="",r=0;t>r;r++)n+=e;return n},it=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])},at=function(e,t){var n="",r=e.childNodes;return t++,n+=rt("	",t-1)+e.outerHTML.substring(0,4),it(r,function(e,r){var i=r.nodeName.toLowerCase();return"#comment"===i?void(n+="<!--"+r.nodeValue+"-->"):"#text"===i?void(n+=r.textContent):void(r.outerHTML&&(n+="ul"===i||"ol"===i?"\n"+at(r,t):"\n"+rt("	",t)+r.outerHTML))}),n+="\n"+rt("	",t-1)+e.outerHTML.substring(e.outerHTML.lastIndexOf("<"))};k.$formatters.unshift(function(e){var t=angular.element("<div>"+e+"</div>")[0].childNodes;return t.length>0&&(e="",it(t,function(t,n){var r=n.nodeName.toLowerCase();return"#comment"===r?void(e+="<!--"+n.nodeValue+"-->"):"#text"===r?void(e+=n.textContent):void(n.outerHTML&&(e.length>0&&(e+="\n"),e+="ul"===r||"ol"===r?""+at(n,0):""+n.outerHTML))})),e})}var ot,st=function(e){return f.$emit("ta-element-select",this),e.preventDefault(),!1},lt=function(e,t){if(t&&angular.extend(e,t),!m&&!D){m=!0;var n;n=e.originalEvent?e.originalEvent.dataTransfer:e.dataTransfer,f.$emit("ta-drop-event",this,e,n),i(function(){m=!1,Q(void 0,void 0,!0)},100)}},ut=f["reApplyOnSelectorHandlers"+(C.id||"")]=function(){D||angular.forEach(p,function(e){w.find(e).off("click",st).on("click",st)})},ct=function(e){w[0].innerHTML=e},ft=!1;k.$render=function(){if(!ft){ft=!0;var e=k.$viewValue||"";I||(P&&M&&(w.removeClass("placeholder-text"),ot&&i.cancel(ot),ot=i(function(){M||(w[0].focus(),d.setSelectionToElementEnd(w.children()[w.children().length-1])),ot=void 0},1)),P?(ct(C.placeholder?""===e?A:e:""===e?A:e),D?w.off("drop",lt):(ut(),w.on("drop",lt))):"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()?ct(h(e)):w.val(e)),P&&C.placeholder&&(""===e?M?w.removeClass("placeholder-text"):w.addClass("placeholder-text"):w.removeClass("placeholder-text")),ft=I=!1}},C.taReadonly&&(D=f.$eval(C.taReadonly),D?(w.addClass("ta-readonly"),("textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase())&&w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable")):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):P&&w.attr("contenteditable","true")),f.$watch(C.taReadonly,function(e,t){t!==e&&(e?(w.addClass("ta-readonly"),("textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase())&&w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable"),angular.forEach(p,function(e){w.find(e).on("click",st)}),w.off("drop",lt)):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):P&&w.attr("contenteditable","true"),angular.forEach(p,function(e){w.find(e).off("click",st)}),w.on("drop",lt)),D=e)})),P&&!D&&(angular.forEach(p,function(e){w.find(e).on("click",st)}),w.on("drop",lt),w.on("blur",function(){t.webkit&&(n=!0)}))}}}]);var m=!1,g=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);g.config([function(){angular.forEach(i,function(e,t){delete i[t]})}]),g.run([function(){if("function"==typeof define&&define.amd)define(function(e){window.rangy=e("rangy"),window.rangy.saveSelection=e("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof e)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),g.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(e,t,n,r,i,a,o,s,l,u,c,f){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(d,p,h,m){var g,v,$,y,b,w,C,x,S,E,T,A=h.serial?h.serial:Math.floor(1e16*Math.random());d._name=h.name?h.name:"textAngularEditor"+A;var R=function(e,n,r){t(function(){var t=function(){e.off(n,t),r.apply(this,arguments)};e.on(n,t)},100)};if(S=i(h.taDefaultWrap),angular.extend(d,angular.copy(n),{wrapSelection:function(e,t,n){"undo"===e.toLowerCase()?d["$undoTaBindtaTextElement"+A]():"redo"===e.toLowerCase()?d["$redoTaBindtaTextElement"+A]():(S(e,!1,t,d.defaultTagAttributes),n&&d["reApplyOnSelectorHandlerstaTextElement"+A](),d.displayElements.text[0].focus())},showHtml:d.$eval(h.taShowHtml)||!1}),h.taFocussedClass&&(d.classes.focussed=h.taFocussedClass),h.taTextEditorClass&&(d.classes.textEditor=h.taTextEditorClass),h.taHtmlEditorClass&&(d.classes.htmlEditor=h.taHtmlEditorClass),h.taDefaultTagAttributes)try{angular.extend(d.defaultTagAttributes,angular.fromJson(h.taDefaultTagAttributes))}catch(k){u.error(k)}h.taTextEditorSetup&&(d.setup.textEditorSetup=d.$parent.$eval(h.taTextEditorSetup)),h.taHtmlEditorSetup&&(d.setup.htmlEditorSetup=d.$parent.$eval(h.taHtmlEditorSetup)),d.fileDropHandler=h.taFileDrop?d.$parent.$eval(h.taFileDrop):d.defaultFileDropHandler,C=p[0].innerHTML,p[0].innerHTML="",d.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},d.displayElements.popover.append(d.displayElements.popoverArrow),d.displayElements.popover.append(d.displayElements.popoverContainer),d.displayElements.scrollWindow.append(d.displayElements.popover),d.displayElements.popover.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1}),d.showPopover=function(e){d.displayElements.popover.css("display","block"),d.reflowPopover(e),l.addClass(d.displayElements.popover,"in"),R(s.find("body"),"click keyup",function(){d.hidePopover()})},d.reflowPopover=function(e){d.displayElements.text[0].offsetHeight-51>e[0].offsetTop?(d.displayElements.popover.css("top",e[0].offsetTop+e[0].offsetHeight+d.displayElements.scrollWindow[0].scrollTop+"px"),d.displayElements.popover.removeClass("top").addClass("bottom")):(d.displayElements.popover.css("top",e[0].offsetTop-54+d.displayElements.scrollWindow[0].scrollTop+"px"),d.displayElements.popover.removeClass("bottom").addClass("top"));var t=d.displayElements.text[0].offsetWidth-d.displayElements.popover[0].offsetWidth,n=e[0].offsetLeft+e[0].offsetWidth/2-d.displayElements.popover[0].offsetWidth/2;d.displayElements.popover.css("left",Math.max(0,Math.min(t,n))+"px"),d.displayElements.popoverArrow.css("margin-left",Math.min(n,Math.max(0,n-t))-11+"px")},d.hidePopover=function(){d.displayElements.popover.css("display",""),d.displayElements.popoverContainer.attr("style",""),d.displayElements.popoverContainer.attr("class","popover-content"),d.displayElements.popover.removeClass("in")},d.displayElements.resize.overlay.append(d.displayElements.resize.background),angular.forEach(d.displayElements.resize.anchors,function(e){d.displayElements.resize.overlay.append(e)}),d.displayElements.resize.overlay.append(d.displayElements.resize.info),d.displayElements.scrollWindow.append(d.displayElements.resize.overlay),d.reflowResizeOverlay=function(e){e=angular.element(e)[0],d.displayElements.resize.overlay.css({display:"block",left:e.offsetLeft-5+"px",top:e.offsetTop-5+"px",width:e.offsetWidth+10+"px",height:e.offsetHeight+10+"px"}),d.displayElements.resize.info.text(e.offsetWidth+" x "+e.offsetHeight)},d.showResizeOverlay=function(e){var t=s.find("body");E=function(n){var r={width:parseInt(e.attr("width")),height:parseInt(e.attr("height")),x:n.clientX,y:n.clientY};(void 0===r.width||isNaN(r.width))&&(r.width=e[0].offsetWidth),(void 0===r.height||isNaN(r.height))&&(r.height=e[0].offsetHeight),d.hidePopover();var i=r.height/r.width,a=function(t){function n(e){return Math.round(Math.max(0,e))}var a={x:Math.max(0,r.width+(t.clientX-r.x)),y:Math.max(0,r.height+(t.clientY-r.y))},o=void 0!==h.taResizeForceAspectRatio,s=h.taResizeMaintainAspectRatio,l=o||s&&!t.shiftKey;if(l){var u=a.y/a.x;a.x=i>u?a.x:a.y/i,a.y=i>u?a.x*i:a.y}var c=angular.element(e);c.css("height",n(a.y)+"px"),c.css("width",n(a.x)+"px"),d.reflowResizeOverlay(e)};t.on("mousemove",a),R(t,"mouseup",function(n){n.preventDefault(),n.stopPropagation(),t.off("mousemove",a),d.showPopover(e)}),n.stopPropagation(),n.preventDefault()},d.displayElements.resize.anchors[3].off("mousedown"),d.displayElements.resize.anchors[3].on("mousedown",E),d.reflowResizeOverlay(e),R(t,"click",function(){d.hideResizeOverlay()})},d.hideResizeOverlay=function(){d.displayElements.resize.anchors[3].off("mousedown",E),d.displayElements.resize.overlay.css("display","")},d.setup.htmlEditorSetup(d.displayElements.html),d.setup.textEditorSetup(d.displayElements.text),d.displayElements.html.attr({id:"taHtmlElement"+A,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),d.displayElements.text.attr({id:"taTextElement"+A,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),d.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),h.taDefaultWrap&&d.displayElements.text.attr("ta-default-wrap",h.taDefaultWrap),h.taUnsafeSanitizer&&(d.displayElements.text.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer),d.displayElements.html.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer)),d.displayElements.scrollWindow.append(d.displayElements.text),p.append(d.displayElements.scrollWindow),p.append(d.displayElements.html),d.displayElements.forminput.attr("name",d._name),p.append(d.displayElements.forminput),h.tabindex&&(p.removeAttr("tabindex"),d.displayElements.text.attr("tabindex",h.tabindex),d.displayElements.html.attr("tabindex",h.tabindex)),h.placeholder&&(d.displayElements.text.attr("placeholder",h.placeholder),d.displayElements.html.attr("placeholder",h.placeholder)),h.taDisabled&&(d.displayElements.text.attr("ta-readonly","disabled"),d.displayElements.html.attr("ta-readonly","disabled"),d.disabled=d.$parent.$eval(h.taDisabled),d.$parent.$watch(h.taDisabled,function(e){d.disabled=e,d.disabled?p.addClass(d.classes.disabled):p.removeClass(d.classes.disabled)})),h.taPaste&&(d._pasteHandler=function(e){return f(h.taPaste)(d.$parent,{$html:e})},d.displayElements.text.attr("ta-paste","_pasteHandler($html)")),e(d.displayElements.scrollWindow)(d),e(d.displayElements.html)(d),d.updateTaBindtaTextElement=d["updateTaBindtaTextElement"+A],d.updateTaBindtaHtmlElement=d["updateTaBindtaHtmlElement"+A],p.addClass("ta-root"),d.displayElements.scrollWindow.addClass("ta-text ta-editor "+d.classes.textEditor),d.displayElements.html.addClass("ta-html ta-editor "+d.classes.htmlEditor),d._actionRunning=!1;var N=!1;if(d.startAction=function(){return d._actionRunning=!0,N=o.rangy.saveSelection(),function(){N&&o.rangy.restoreSelection(N)}},d.endAction=function(){d._actionRunning=!1,N&&(d.showHtml?d.displayElements.html[0].focus():d.displayElements.text[0].focus(),o.rangy.removeMarkers(N)),N=!1,d.updateSelectedStyles(),d.showHtml||d["updateTaBindtaTextElement"+A]()},b=function(){d.focussed=!0,p.addClass(d.classes.focussed),x.focus(),p.triggerHandler("focus")},d.displayElements.html.on("focus",b),d.displayElements.text.on("focus",b),w=function(e){return d._actionRunning||s[0].activeElement===d.displayElements.html[0]||s[0].activeElement===d.displayElements.text[0]||(p.removeClass(d.classes.focussed),x.unfocus(),t(function(){d._bUpdateSelectedStyles=!1,p.triggerHandler("blur"),d.focussed=!1},0)),e.preventDefault(),!1},d.displayElements.html.on("blur",w),d.displayElements.text.on("blur",w),d.displayElements.text.on("paste",function(e){p.triggerHandler("paste",e)}),d.queryFormatBlockState=function(e){return!d.showHtml&&e.toLowerCase()===s[0].queryCommandValue("formatBlock").toLowerCase()},d.queryCommandState=function(e){return d.showHtml?"":s[0].queryCommandState(e)},d.switchView=function(){d.showHtml=!d.showHtml,l.enabled(!1,d.displayElements.html),l.enabled(!1,d.displayElements.text),d.showHtml?t(function(){return l.enabled(!0,d.displayElements.html),l.enabled(!0,d.displayElements.text),d.displayElements.html[0].focus()},100):t(function(){return l.enabled(!0,d.displayElements.html),l.enabled(!0,d.displayElements.text),d.displayElements.text[0].focus()},100)},h.ngModel){var P=!0;m.$render=function(){if(P){P=!1;var e=d.$parent.$eval(h.ngModel);void 0!==e&&null!==e||!C||""===C||m.$setViewValue(C)}d.displayElements.forminput.val(m.$viewValue),d.html=m.$viewValue||""},p.attr("required")&&(m.$validators.required=function(e,t){var n=e||t;return!(!n||""===n.trim())})}else d.displayElements.forminput.val(C),d.html=C;if(d.$watch("html",function(e,t){e!==t&&(h.ngModel&&m.$viewValue!==e&&m.$setViewValue(e),d.displayElements.forminput.val(e))}),h.taTargetToolbars)x=a.registerEditor(d._name,d,h.taTargetToolbars.split(","));else{var U=angular.element('<div text-angular-toolbar name="textAngularToolbar'+A+'">');h.taToolbar&&U.attr("ta-toolbar",h.taToolbar),h.taToolbarClass&&U.attr("ta-toolbar-class",h.taToolbarClass),h.taToolbarGroupClass&&U.attr("ta-toolbar-group-class",h.taToolbarGroupClass),h.taToolbarButtonClass&&U.attr("ta-toolbar-button-class",h.taToolbarButtonClass),h.taToolbarActiveButtonClass&&U.attr("ta-toolbar-active-button-class",h.taToolbarActiveButtonClass),h.taFocussedClass&&U.attr("ta-focussed-class",h.taFocussedClass),p.prepend(U),e(U)(d.$parent),x=a.registerEditor(d._name,d,["textAngularToolbar"+A])}d.$on("$destroy",function(){a.unregisterEditor(d._name),angular.element(window).off("blur")}),d.$on("ta-element-select",function(e,t){x.triggerElementSelect(e,t)&&d["reApplyOnSelectorHandlerstaTextElement"+A]()}),d.$on("ta-drop-event",function(e,n,r,i){d.displayElements.text[0].focus(),i&&i.files&&i.files.length>0?(angular.forEach(i.files,function(e){try{c.when(d.fileDropHandler(e,d.wrapSelection)||d.fileDropHandler!==d.defaultFileDropHandler&&c.when(d.defaultFileDropHandler(e,d.wrapSelection))).then(function(){d["updateTaBindtaTextElement"+A]()})}catch(t){u.error(t)}}),r.preventDefault(),r.stopPropagation()):t(function(){d["updateTaBindtaTextElement"+A]()},0)}),d._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){d._bUpdateSelectedStyles=!1,d.focussed=!1}),d.updateSelectedStyles=function(){var e;T&&t.cancel(T),void 0!==(e=r.getSelectionElement())&&e.parentNode!==d.displayElements.text[0]?x.updateSelectedStyles(angular.element(e)):x.updateSelectedStyles(),d._bUpdateSelectedStyles&&(T=t(d.updateSelectedStyles,200))},g=function(){return d.focussed?void(d._bUpdateSelectedStyles||(d._bUpdateSelectedStyles=!0,d.$apply(function(){d.updateSelectedStyles()}))):void(d._bUpdateSelectedStyles=!1)},d.displayElements.html.on("keydown",g),d.displayElements.text.on("keydown",g),v=function(){d._bUpdateSelectedStyles=!1},d.displayElements.html.on("keyup",v),d.displayElements.text.on("keyup",v),$=function(e,t){t&&angular.extend(e,t),d.$apply(function(){return x.sendKeyCommand(e)?(d._bUpdateSelectedStyles||d.updateSelectedStyles(),e.preventDefault(),!1):void 0})},d.displayElements.html.on("keypress",$),d.displayElements.text.on("keypress",$),y=function(){d._bUpdateSelectedStyles=!1,d.$apply(function(){d.updateSelectedStyles()})},d.displayElements.html.on("mouseup",y),d.displayElements.text.on("mouseup",y)}}}]),g.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(e,t,n){var r={},i={};return{registerEditor:function(n,a,o){if(!n||""===n)throw"textAngular Error: An editor requires a name";if(!a)throw"textAngular Error: An editor requires a scope";if(i[n])throw'textAngular Error: An Editor with name "'+n+'" already exists';var s=[];return angular.forEach(o,function(e){r[e]&&s.push(r[e])}),i[n]={scope:a,toolbars:o,_registerToolbar:function(e){this.toolbars.indexOf(e.name)>=0&&s.push(e)},editorFunctions:{disable:function(){angular.forEach(s,function(e){e.disabled=!0})},enable:function(){angular.forEach(s,function(e){e.disabled=!1})},focus:function(){angular.forEach(s,function(e){e._parent=a,e.disabled=!1,e.focussed=!0,a.focussed=!0})},unfocus:function(){angular.forEach(s,function(e){e.disabled=!0,e.focussed=!1}),a.focussed=!1},updateSelectedStyles:function(e){angular.forEach(s,function(t){angular.forEach(t.tools,function(n){n.activeState&&(t._parent=a,n.active=n.activeState(e))})})},sendKeyCommand:function(n){var r=!1;return(n.ctrlKey||n.metaKey||n.specialKey)&&angular.forEach(t,function(t,i){if(t.commandKeyCode&&(t.commandKeyCode===n.which||t.commandKeyCode===n.specialKey))for(var o=0;o<s.length;o++)if(void 0!==s[o].tools[i]){e.call(s[o].tools[i],a),r=!0;break}}),r},triggerElementSelect:function(e,n){var r=function(e,t){for(var n=!0,r=0;r<t.length;r++)n=n&&e.attr(t[r]);return n},i=[],o={},l=!1;n=angular.element(n);var u=!1;if(angular.forEach(t,function(e,t){e.onElementSelect&&e.onElementSelect.element&&e.onElementSelect.element.toLowerCase()===n[0].tagName.toLowerCase()&&(!e.onElementSelect.filter||e.onElementSelect.filter(n))&&(u=u||angular.isArray(e.onElementSelect.onlyWithAttrs)&&r(n,e.onElementSelect.onlyWithAttrs),(!e.onElementSelect.onlyWithAttrs||r(n,e.onElementSelect.onlyWithAttrs))&&(o[t]=e))}),u?(angular.forEach(o,function(e,t){e.onElementSelect.onlyWithAttrs&&r(n,e.onElementSelect.onlyWithAttrs)&&i.push({name:t,tool:e})}),i.sort(function(e,t){return t.tool.onElementSelect.onlyWithAttrs.length-e.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(o,function(e,t){i.push({name:t,tool:e})}),i.length>0)for(var c=0;c<i.length;c++){for(var f=i[c].tool,d=i[c].name,p=0;p<s.length;p++)if(void 0!==s[p].tools[d]){f.onElementSelect.action.call(s[p].tools[d],e,n,a),l=!0;break}if(l)break}return l}}},i[n].editorFunctions},retrieveEditor:function(e){return i[e]},unregisterEditor:function(e){delete i[e]},registerToolbar:function(e){if(!e)throw"textAngular Error: A toolbar requires a scope";if(!e.name||""===e.name)throw"textAngular Error: A toolbar requires a name";if(r[e.name])throw'textAngular Error: A toolbar with name "'+e.name+'" already exists';r[e.name]=e,angular.forEach(i,function(t){t._registerToolbar(e)})},retrieveToolbar:function(e){return r[e]},retrieveToolbarsViaEditor:function(e){var t=[],n=this;return angular.forEach(this.retrieveEditor(e).toolbars,function(e){t.push(n.retrieveToolbar(e))}),t},unregisterToolbar:function(e){delete r[e]},updateToolsDisplay:function(e){var t=this;angular.forEach(e,function(e,n){t.updateToolDisplay(n,e)})},resetToolsDisplay:function(){var e=this;angular.forEach(t,function(t,n){e.resetToolDisplay(n)})},updateToolDisplay:function(e,t){var n=this;angular.forEach(r,function(r,i){n.updateToolbarToolDisplay(i,e,t)})},resetToolDisplay:function(e){var t=this;angular.forEach(r,function(n,r){t.resetToolbarToolDisplay(r,e)})},updateToolbarToolDisplay:function(e,t,n){if(!r[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';r[e].updateToolDisplay(t,n)},resetToolbarToolDisplay:function(e,n){if(!r[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';r[e].updateToolDisplay(n,t[n],!0)},removeTool:function(e){delete t[e],angular.forEach(r,function(t){delete t.tools[e];for(var n=0;n<t.toolbar.length;n++){for(var r,i=0;i<t.toolbar[n].length;i++){if(t.toolbar[n][i]===e){r={group:n,index:i};break}if(void 0!==r)break}void 0!==r&&(t.toolbar[r.group].slice(r.index,1),t._$element.children().eq(r.group).children().eq(r.index).remove())}})},addTool:function(e,t,i,a){n(e,t),angular.forEach(r,function(n){n.addTool(e,t,i,a)})},addToolToToolbar:function(e,t,i,a,o){n(e,t),r[i].addTool(e,t,a,o)},refreshEditor:function(e){if(!i[e])throw'textAngular Error: No Editor with name "'+e+'" exists';i[e].scope.updateTaBindtaTextElement(),i[e].scope.$$phase||i[e].scope.$digest()},sendKeyCommand:function(e,t){angular.forEach(i,function(n){return n.editorFunctions.sendKeyCommand(t)?(e._bUpdateSelectedStyles||e.updateSelectedStyles(),t.preventDefault(),!1):void 0})}}}]),g.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(e,t,n,r,i,a){return{scope:{name:"@"},restrict:"EA",link:function(o,s,l){if(!o.name||""===o.name)throw"textAngular Error: A toolbar requires a name";angular.extend(o,angular.copy(n)),l.taToolbar&&(o.toolbar=o.$parent.$eval(l.taToolbar)),l.taToolbarClass&&(o.classes.toolbar=l.taToolbarClass),l.taToolbarGroupClass&&(o.classes.toolbarGroup=l.taToolbarGroupClass),l.taToolbarButtonClass&&(o.classes.toolbarButton=l.taToolbarButtonClass),l.taToolbarActiveButtonClass&&(o.classes.toolbarButtonActive=l.taToolbarActiveButtonClass),l.taFocussedClass&&(o.classes.focussed=l.taFocussedClass),o.disabled=!0,o.focussed=!1,o._$element=s,s[0].innerHTML="",s.addClass("ta-toolbar "+o.classes.toolbar),o.$watch("focussed",function(){o.focussed?s.addClass(o.classes.focussed):s.removeClass(o.classes.focussed)});var u=function(t,n){var r;if(r=angular.element(t&&t.display?t.display:"<button type='button'>"),r.addClass(t&&t["class"]?t["class"]:o.classes.toolbarButton),r.attr("name",n.name),r.attr("ta-button","ta-button"),r.attr("ng-disabled","isDisabled()"),r.attr("tabindex","-1"),r.attr("ng-click","executeAction()"),r.attr("ng-class","displayActiveToolClass(active)"),t&&t.tooltiptext&&r.attr("title",t.tooltiptext),t&&!t.display&&!n._display&&(r[0].innerHTML="",t.buttontext&&(r[0].innerHTML=t.buttontext),t.iconclass)){var i=angular.element("<i>"),a=r[0].innerHTML;
i.addClass(t.iconclass),r[0].innerHTML="",r.append(i),a&&""!==a&&r.append("&nbsp;"+a)}return n._lastToolDefinition=angular.copy(t),e(r)(n)};o.tools={},o._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var c={$window:a,$editor:function(){return o._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(e){return e?o.classes.toolbarButtonActive:""},executeAction:i};angular.forEach(o.toolbar,function(e){var t=angular.element("<div>");t.addClass(o.classes.toolbarGroup),angular.forEach(e,function(e){o.tools[e]=angular.extend(o.$new(!0),r[e],c,{name:e}),o.tools[e].$element=u(r[e],o.tools[e]),t.append(o.tools[e].$element)}),s.append(t)}),o.updateToolDisplay=function(e,t,n){var r=o.tools[e];if(r){if(r._lastToolDefinition&&!n&&(t=angular.extend({},r._lastToolDefinition,t)),null===t.buttontext&&null===t.iconclass&&null===t.display)throw'textAngular Error: Tool Definition for updating "'+e+'" does not have a valid display/iconclass/buttontext value';null===t.buttontext&&delete t.buttontext,null===t.iconclass&&delete t.iconclass,null===t.display&&delete t.display;var i=u(t,r);r.$element.replaceWith(i),r.$element=i}},o.addTool=function(e,t,n,i){o.tools[e]=angular.extend(o.$new(!0),r[e],c,{name:e}),o.tools[e].$element=u(r[e],o.tools[e]);var a;void 0===n&&(n=o.toolbar.length-1),a=angular.element(s.children()[n]),void 0===i?(a.append(o.tools[e].$element),o.toolbar[n][o.toolbar[n].length-1]=e):(a.children().eq(i).after(o.tools[e].$element),o.toolbar[n][i]=e)},t.registerToolbar(o),o.$on("$destroy",function(){t.unregisterToolbar(o.name)})}}}])}()}({},function(){return this}()),!function(e,t){t["true"]=e,function(t,n){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"object"==typeof e?module.exports=t():n.rangy=t()}(function(){function e(e,t){var n=typeof e[t];return n==b||!(n!=y||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=y||!e[t])}function n(e,t){return typeof e[t]!=w}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function i(e){return e&&T(e,E)&&R(e,S)}function a(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function o(t){typeof console!=w&&e(console,"log")&&console.log(t)}function s(e,t){P&&t?alert(e):o(e)}function l(e){D.initialized=!0,D.supported=!1,s("Rangy is not supported in this environment. Reason: "+e,D.config.alertOnFail)}function u(e){s("Rangy warning: "+e,D.config.alertOnWarn)}function c(e){return e.message||e.description||String(e)}function f(){if(P&&!D.initialized){var t,n=!1,r=!1;e(document,"createRange")&&(t=document.createRange(),T(t,x)&&R(t,C)&&(n=!0));var s=a(document);if(!s||"body"!=s.nodeName.toLowerCase())return void l("No body element found");if(s&&e(s,"createTextRange")&&(t=s.createTextRange(),i(t)&&(r=!0)),!n&&!r)return void l("Neither Range nor TextRange are available");D.initialized=!0,D.features={implementsDomRange:n,implementsTextRange:r};var u,f;for(var d in N)(u=N[d])instanceof m&&u.init(u,D);for(var p=0,h=O.length;h>p;++p)try{O[p](D)}catch(g){f="Rangy init listener threw an exception. Continuing. Detail: "+c(g),o(f)}}}function d(e,t,n){n&&(e+=" in module "+n.name),D.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function p(e,t,n,r){e[t]=function(){return d(t,n,r),e[n].apply(e,U.toArray(arguments))}}function h(e){e=e||window,f();for(var t=0,n=L.length;n>t;++t)L[t](e)}function m(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function g(e,t,n){var r=new m(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(D,t),t.supported=!0}catch(r){var i="Module '"+e+"' failed to load: "+c(r);o(i),r.stack&&o(r.stack)}}});return N[e]=r,r}function v(){}function $(){}var y="object",b="function",w="undefined",C=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],x=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],S=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],E=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],T=r(e),A=r(t),R=r(n),k=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;r>n;++n)t(e[n],n)},N={},P=typeof window!=w&&typeof document!=w,U={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:T,areHostObjects:A,areHostProperties:R,isTextRange:i,getBody:a,forEach:k},D={version:"1.3.0",initialized:!1,isBrowser:P,supported:!0,util:U,features:{},modules:N,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==w?!0:rangyAutoInitialize}};D.fail=l,D.warn=u;var M;({}).hasOwnProperty?(U.extend=M=function(e,t,n){var r,i;for(var a in t)t.hasOwnProperty(a)&&(r=e[a],i=t[a],n&&null!==r&&"object"==typeof r&&null!==i&&"object"==typeof i&&M(r,i,!0),e[a]=i);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},U.createOptions=function(e,t){var n={};return M(n,t),e&&M(n,e),n}):l("hasOwnProperty not supported"),P||l("Rangy can only run in a browser"),function(){var e;if(P){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(r){}}e||(e=function(e){for(var t=[],n=0,r=e.length;r>n;++n)t[n]=e[n];return t}),U.toArray=e}();var I;P&&(e(document,"addEventListener")?I=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?I=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),U.addListener=I);var O=[];U.deprecationNotice=d,U.createAliasForDeprecatedMethod=p,D.init=f,D.addInitListener=function(e){D.initialized?e(D):O.push(e)};var L=[];D.addShimListener=function(e){L.push(e)},P&&(D.shim=D.createMissingNativeApi=h,p(D,"createMissingNativeApi","shim")),m.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,i=n.length;i>r;++r){if(t=n[r],e=N[t],!(e&&e instanceof m))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){D.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){D.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},D.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=g(e,n,t);D.initialized&&D.supported&&r.init()},D.createCoreModule=function(e,t,n){g(e,t,n)},D.RangePrototype=v,D.rangePrototype=new v,D.selectionPrototype=new $,D.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==P||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function r(e){var t=e.parentNode;return 1==t.nodeType?t:null}function i(e){for(var t=0;e=e.previousSibling;)++t;return t}function a(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function o(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(O(r,n))return n;return null}function s(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function l(e,t){return s(e,t,!0)}function u(e,t,n){for(var r,i=n?e:e.parentNode;i;){if(r=i.parentNode,r===t)return i;i=r}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function f(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function d(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function p(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),d(r,e),n)for(var a,o=0;a=n[o++];)a.node==e&&a.offset>t?(a.node=r,a.offset-=t):a.node==e.parentNode&&a.offset>i(e)&&++a.offset;return r}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=P)return e.ownerDocument;if(typeof e.document!=P)return e.document;if(e.parentNode)return h(e.parentNode);throw t.createError("getDocument: no document found for node")}function m(e){var n=h(e);if(typeof n.defaultView!=P)return n.defaultView;if(typeof n.parentWindow!=P)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function g(e){if(typeof e.contentDocument!=P)return e.contentDocument;if(typeof e.contentWindow!=P)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){if(typeof e.contentWindow!=P)return e.contentWindow;if(typeof e.contentDocument!=P)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function $(e){return e&&U.isHostMethod(e,"setTimeout")&&U.isHostObject(e,"document")}function y(e,t,n){var r;if(e?U.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?g(e):h(e):$(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r}function b(e){for(var t;t=e.parentNode;)e=t;return e}function w(e,n,r,a){var s,l,c,f,d;if(e==r)return n===a?0:a>n?-1:1;if(s=u(r,e,!0))return n<=i(s)?-1:1;if(s=u(e,r,!0))return i(s)<a?-1:1;if(l=o(e,r),!l)throw new Error("comparePoints error: nodes have no common ancestor");if(c=e===l?l:u(e,l,!0),f=r===l?l:u(r,l,!0),c===f)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(d=l.firstChild;d;){if(d===c)return-1;if(d===f)return 1;d=d.nextSibling}}function C(e){var t;try{return t=e.parentNode,!1}catch(n){return!0}}function x(e){if(!e)return"[No node]";if(L&&C(e))return"[Broken node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+i(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function S(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function E(e,t,n){var r=D(e),i=e.createElement("div");i.contentEditable=""+!!n,t&&(i.innerHTML=t);var a=r.firstChild;return a?r.insertBefore(i,a):r.appendChild(i),i}function T(e){return e.parentNode.removeChild(e)}function A(e){this.root=e,this._next=e}function R(e){return new A(e)}function k(e,t){this.node=e,this.offset=t}function N(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var P="undefined",U=e.util,D=U.getBody;U.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),U.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var M=document.createElement("div");U.areHostMethods(M,["insertBefore","appendChild","cloneNode"]||!U.areHostObjects(M,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),U.isHostProperty(M,"innerHTML")||t.fail("Element is missing innerHTML property");var I=document.createTextNode("test");U.areHostMethods(I,["splitText","deleteData","insertData","appendData","cloneNode"]||!U.areHostObjects(M,["previousSibling","nextSibling","childNodes","parentNode"])||!U.areHostProperties(I,["data"]))||t.fail("Incomplete Text Node implementation");var O=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},L=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",L=C(n),e.features.crashyTextNodes=L}();var _;typeof window.getComputedStyle!=P?_=function(e,t){return m(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=P?_=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),A.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},k.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},N.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},N.prototype.toString=function(){return this.message},e.dom={arrayContains:O,isHtmlNamespace:n,parentElement:r,getNodeIndex:i,getNodeLength:a,getCommonAncestor:o,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:u,isCharacterDataNode:c,isTextOrCommentNode:f,insertAfter:d,splitDataNode:p,getDocument:h,getWindow:m,getIframeWindow:v,getIframeDocument:g,getBody:D,isWindow:$,getContentDocument:y,getRootContainer:b,comparePoints:w,isBrokenNode:C,inspectNode:x,getComputedStyleProperty:_,createTestElement:E,removeNode:T,fragmentFromNodeChildren:S,createIterator:R,DomPosition:k},e.DOMException=N}),D.createCoreModule("DomRange",["DomUtil"],function(e){function t(e,t){return 3!=e.nodeType&&(F(e,t.startContainer)||F(e,t.endContainer))}function n(e){return e.document||j(e.startContainer)}function r(e){return G(e.startContainer)}function i(e){return new O(e.parentNode,H(e))}function a(e){return new O(e.parentNode,H(e)+1)}function o(e,t,n){var r=11==e.nodeType?e.firstChild:e;return _(t)?n==t.length?M.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:q(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function s(e,t,r){if(S(e),S(t),n(t)!=n(e))throw new L("WRONG_DOCUMENT_ERR");var i=B(e.startContainer,e.startOffset,t.endContainer,t.endOffset),a=B(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return r?0>=i&&a>=0:0>i&&a>0}function l(e){for(var t,r,i,a=n(e.range).createDocumentFragment();r=e.next();){if(t=e.isPartiallySelectedSubtree(),r=r.cloneNode(!t),t&&(i=e.getSubtreeIterator(),r.appendChild(l(i)),i.detach()),10==r.nodeType)throw new L("HIERARCHY_REQUEST_ERR");a.appendChild(r)}return a}function u(e,t,n){var r,i;n=n||{stop:!1};for(var a,o;a=e.next();)if(e.isPartiallySelectedSubtree()){if(t(a)===!1)return void(n.stop=!0);if(o=e.getSubtreeIterator(),u(o,t,n),o.detach(),n.stop)return}else for(r=M.createIterator(a);i=r.next();)if(t(i)===!1)return void(n.stop=!0)}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach()):e.remove()}function f(e){for(var t,r,i=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),r=e.getSubtreeIterator(),t.appendChild(f(r)),r.detach()):e.remove(),10==t.nodeType)throw new L("HIERARCHY_REQUEST_ERR");i.appendChild(t)}return i}function d(e,t,n){var r,i=!(!t||!t.length),a=!!n;i&&(r=new RegExp("^("+t.join("|")+")$"));var o=[];return u(new h(e,!1),function(t){if(!(i&&!r.test(t.nodeType)||a&&!n(t))){var s=e.startContainer;if(t!=s||!_(s)||e.startOffset!=s.length){var l=e.endContainer;t==l&&_(l)&&0==e.endOffset||o.push(t)}}}),o}function p(e){var t="undefined"==typeof e.getName?"Range":e.getName();return"["+t+"("+M.inspectNode(e.startContainer)+":"+e.startOffset+", "+M.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function h(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&_(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||_(this.sc)?V(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||_(this.ec)?V(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function m(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.nodeType,W(e,r))return i;i=i.parentNode}return null}}function g(e,t){if(rt(e,t))throw new L("INVALID_NODE_TYPE_ERR")}function v(e,t){if(!W(t,e.nodeType))throw new L("INVALID_NODE_TYPE_ERR")}function $(e,t){if(0>t||t>(_(e)?e.length:e.childNodes.length))throw new L("INDEX_SIZE_ERR")}function y(e,t){if(tt(e,!0)!==tt(t,!0))throw new L("WRONG_DOCUMENT_ERR")}function b(e){if(nt(e,!0))throw new L("NO_MODIFICATION_ALLOWED_ERR")}function w(e,t){if(!e)throw new L(t)}function C(e,t){return t<=(_(e)?e.length:e.childNodes.length)}function x(e){return!!e.startContainer&&!!e.endContainer&&!(K&&(M.isBrokenNode(e.startContainer)||M.isBrokenNode(e.endContainer)))&&G(e.startContainer)==G(e.endContainer)&&C(e.startContainer,e.startOffset)&&C(e.endContainer,e.endOffset)}function S(e){if(!x(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function E(e,t){S(e);var n=e.startContainer,r=e.startOffset,i=e.endContainer,a=e.endOffset,o=n===i;_(i)&&a>0&&a<i.length&&q(i,a,t),_(n)&&r>0&&r<n.length&&(n=q(n,r,t),o?(a-=r,i=n):i==n.parentNode&&a>=H(n)&&a++,r=0),e.setStartAndEnd(n,r,i,a)}function T(e){S(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function A(e){e.START_TO_START=ut,e.START_TO_END=ct,e.END_TO_END=ft,e.END_TO_START=dt,e.NODE_BEFORE=pt,e.NODE_AFTER=ht,e.NODE_BEFORE_AND_AFTER=mt,e.NODE_INSIDE=gt}function R(e){A(e),A(e.prototype)}function k(e,t){return function(){S(this);var n,r,i=this.startContainer,o=this.startOffset,s=this.commonAncestorContainer,l=new h(this,!0);i!==s&&(n=V(i,s,!0),r=a(n),i=r.node,o=r.offset),u(l,b),l.reset();var c=e(l);return l.detach(),t(this,i,o,i,o),c}}function N(n,r){function o(e,t){return function(n){v(n,J),v(G(n),Q);var r=(e?i:a)(n);(t?s:l)(this,r.node,r.offset)}}function s(e,t,n){var i=e.endContainer,a=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((G(t)!=G(i)||1==B(t,n,i,a))&&(i=t,a=n),r(e,t,n,i,a))}function l(e,t,n){var i=e.startContainer,a=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((G(t)!=G(i)||-1==B(t,n,i,a))&&(i=t,a=n),r(e,i,a,t,n))}var u=function(){};u.prototype=e.rangePrototype,n.prototype=new u,I.extend(n.prototype,{setStart:function(e,t){g(e,!0),$(e,t),s(this,e,t)},setEnd:function(e,t){g(e,!0),$(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],i=t,a=n;switch(e.length){case 3:a=e[2];break;case 4:i=e[2],a=e[3]}r(this,t,n,i,a)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(e){S(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){g(e,!0),r(this,e,0,e,z(e))},selectNode:function(e){g(e,!1),v(e,J);var t=i(e),n=a(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:k(f,r),deleteContents:k(c,r),canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var e=new h(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},splitBoundaries:function(){E(this)},splitBoundariesPreservingPositions:function(e){E(this,e)},normalizeBoundaries:function(){S(this);var e,t=this.startContainer,n=this.startOffset,i=this.endContainer,a=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,a=e.length,e.appendData(t.data),Y(t))},s=function(e){var r=e.previousSibling;if(r&&r.nodeType==e.nodeType){t=e;var o=e.length;if(n=r.length,e.insertData(0,r.data),Y(r),t==i)a+=n,i=t;else if(i==e.parentNode){var s=H(e);a==s?(i=e,a=o):a>s&&a--}}},l=!0;if(_(i))a==i.length?o(i):0==a&&(e=i.previousSibling,e&&e.nodeType==i.nodeType&&(a=e.length,t==i&&(l=!1),e.appendData(i.data),Y(i),i=e));else{if(a>0){var u=i.childNodes[a-1];u&&_(u)&&o(u)}l=!this.collapsed}if(l){if(_(t))0==n?s(t):n==t.length&&(e=t.nextSibling,e&&e.nodeType==t.nodeType&&(i==e&&(i=t,a+=t.length),t.appendData(e.data),Y(e)));else if(n<t.childNodes.length){var c=t.childNodes[n];c&&_(c)&&s(c)}}else t=i,n=a;r(this,t,n,i,a)},collapseToPoint:function(e,t){g(e,!0),$(e,t),this.setStartAndEnd(e,t)}}),R(n)}function P(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:M.getCommonAncestor(e.startContainer,e.endContainer)}function U(e,t,n,r,i){e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,e.document=M.getDocument(t),P(e)}function D(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,P(this)}var M=e.dom,I=e.util,O=M.DomPosition,L=e.DOMException,_=M.isCharacterDataNode,H=M.getNodeIndex,F=M.isOrIsAncestorOf,j=M.getDocument,B=M.comparePoints,q=M.splitDataNode,V=M.getClosestAncestorIn,z=M.getNodeLength,W=M.arrayContains,G=M.getRootContainer,K=e.features.crashyTextNodes,Y=M.removeNode;h.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,_(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!_(n)||n!==this.sc&&n!==this.ec?n.parentNode&&Y(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)e=this.range.cloneRange(),e.collapse(!1);else{e=new D(n(this.range));var t=this._current,r=t,i=0,a=t,o=z(t);F(t,this.sc)&&(r=this.sc,i=this.so),F(t,this.ec)&&(a=this.ec,o=this.eo),U(e,r,i,a,o)}return new h(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var J=[1,3,4,5,7,8,10],Q=[2,9,11],Z=[5,6,10,12],X=[1,3,4,5,7,8,10,11],et=[1,3,4,5,7,8],tt=m([9,11]),nt=m(Z),rt=m([6,10,12]),it=document.createElement("style"),at=!1;try{it.innerHTML="<b>x</b>",at=3==it.firstChild.nodeType}catch(ot){}e.features.htmlParsingConforms=at;var st=at?function(e){var t=this.startContainer,n=j(t);if(!t)throw new L("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:_(t)&&(r=M.parentElement(t)),r=null===r||"HTML"==r.nodeName&&M.isHtmlNamespace(j(r).documentElement)&&M.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=e,M.fragmentFromNodeChildren(r)}:function(e){var t=n(this),r=t.createElement("body");return r.innerHTML=e,M.fragmentFromNodeChildren(r)},lt=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ut=0,ct=1,ft=2,dt=3,pt=0,ht=1,mt=2,gt=3;I.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){S(this),y(this.startContainer,t.startContainer);var n,r,i,a,o=e==dt||e==ut?"start":"end",s=e==ct||e==ut?"start":"end";return n=this[o+"Container"],r=this[o+"Offset"],i=t[s+"Container"],a=t[s+"Offset"],B(n,r,i,a)},insertNode:function(e){if(S(this),v(e,X),b(this.startContainer),F(e,this.startContainer))throw new L("HIERARCHY_REQUEST_ERR");var t=o(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){S(this);var e,t;if(this.collapsed)return n(this).createDocumentFragment();if(this.startContainer===this.endContainer&&_(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t;var r=new h(this,!0);return e=l(r),r.detach(),e},canSurroundContents:function(){S(this),b(this.startContainer),b(this.endContainer);var e=new h(this,!0),n=e._first&&t(e._first,this)||e._last&&t(e._last,this);return e.detach(),!n},surroundContents:function(e){if(v(e,et),!this.canSurroundContents())throw new L("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);o(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new D(n(this)),r=lt.length;r--;)e=lt[r],t[e]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&_(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new h(this,!0);return u(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,n=H(e);if(!t)throw new L("NOT_FOUND_ERR");var r=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return 0>r?i>0?mt:pt:i>0?ht:gt},comparePoint:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),B(e,t,this.startContainer,this.startOffset)<0?-1:B(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:st,toHtml:function(){return T(this)},intersectsNode:function(e,t){if(S(this),G(e)!=r(this))return!1;var n=e.parentNode,i=H(e);if(!n)return!0;var a=B(n,i,this.endContainer,this.endOffset),o=B(n,i+1,this.startContainer,this.startOffset);return t?0>=a&&o>=0:0>a&&o>0},isPointInRange:function(e,t){return S(this),w(e,"HIERARCHY_REQUEST_ERR"),y(e,this.startContainer),B(e,t,this.startContainer,this.startOffset)>=0&&B(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return s(this,e,!1)},intersectsOrTouchesRange:function(e){return s(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=B(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=B(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==B(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==B(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new L("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==gt},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,z(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return S(this),d(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var r=n(this),i=e.createRange(r);t=t||M.getBody(r),i.selectNodeContents(t);var a=this.intersection(i),o=0,s=0;return a&&(i.setEnd(a.startContainer,a.startOffset),o=i.toString().length,s=o+a.toString().length),{start:o,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,i,a,o,s=[t],l=!1,u=!1;!u&&(r=s.pop());)if(3==r.nodeType)i=n+r.length,!l&&e.start>=n&&e.start<=i&&(this.setStart(r,e.start-n),l=!0),l&&e.end>=n&&e.end<=i&&(this.setEnd(r,e.end-n),u=!0),n=i;else for(o=r.childNodes,a=o.length;a--;)s.push(o[a])},getName:function(){return"DomRange"},equals:function(e){return D.rangesEqual(this,e)},isValid:function(){return x(this)},inspect:function(){return p(this)},detach:function(){}}),N(D,U),I.extend(D,{rangeProperties:lt,RangeIterator:h,copyComparisonConstants:R,createPrototypeRange:N,inspect:p,toHtml:T,getRangeDocument:n,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=D}),D.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,r,i=e.dom,a=e.util,o=i.DomPosition,s=e.DomRange,l=i.getBody,u=i.getContentDocument,c=i.isCharacterDataNode;if(e.features.implementsDomRange&&!function(){function r(e){for(var t,n=d.length;n--;)t=d[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function o(e,t,n,r,i){var a=e.startContainer!==t||e.startOffset!=n,o=e.endContainer!==r||e.endOffset!=i,s=!e.equals(e.nativeRange);(a||o||s)&&(e.setEnd(r,i),e.setStart(t,n))}var c,f,d=s.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,r(this)},s.createPrototypeRange(n,o),c=n.prototype,c.selectNode=function(e){this.nativeRange.selectNode(e),r(this)},c.cloneContents=function(){return this.nativeRange.cloneContents()},c.surroundContents=function(e){this.nativeRange.surroundContents(e),r(this)},c.collapse=function(e){this.nativeRange.collapse(e),r(this)},c.cloneRange=function(){return new n(this.nativeRange.cloneRange())},c.refresh=function(){r(this)},c.toString=function(){return this.nativeRange.toString()};var p=document.createTextNode("test");l(document).appendChild(p);var h=document.createRange();h.setStart(p,0),h.setEnd(p,0);try{h.setStart(p,1),c.setStart=function(e,t){this.nativeRange.setStart(e,t),r(this)},c.setEnd=function(e,t){this.nativeRange.setEnd(e,t),r(this)},f=function(e){return function(t){this.nativeRange[e](t),r(this)}}}catch(m){c.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}r(this)},c.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}r(this)},f=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(i){this.nativeRange[t](n),this.nativeRange[e](n)}r(this)}}}c.setStartBefore=f("setStartBefore","setEndBefore"),c.setStartAfter=f("setStartAfter","setEndAfter"),c.setEndBefore=f("setEndBefore","setStartBefore"),c.setEndAfter=f("setEndAfter","setStartAfter"),c.selectNodeContents=function(e){this.setStartAndEnd(e,0,i.getNodeLength(e))},h.selectNodeContents(p),h.setEnd(p,3);var g=document.createRange();g.selectNodeContents(p),g.setEnd(p,4),g.setStart(p,2),c.compareBoundaryPoints=-1==h.compareBoundaryPoints(h.START_TO_END,g)&&1==h.compareBoundaryPoints(h.END_TO_START,g)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var v=document.createElement("div");v.innerHTML="123";var $=v.firstChild,y=l(document);y.appendChild(v),h.setStart($,1),h.setEnd($,2),h.deleteContents(),"13"==$.data&&(c.deleteContents=function(){this.nativeRange.deleteContents(),r(this)},c.extractContents=function(){var e=this.nativeRange.extractContents();return r(this),e}),y.removeChild(v),y=null,a.isHostMethod(h,"createContextualFragment")&&(c.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(p),c.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return e=u(e,t,"createNativeRange"),e.createRange()}}(),e.features.implementsTextRange){var f=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();
n=e.duplicate(),n.collapse(!1);var a=n.parentElement(),o=r==a?r:i.getCommonAncestor(r,a);return o==t?o:i.getCommonAncestor(t,o)},d=function(e){return 0==e.compareEndPoints("StartToEnd",e)},p=function(e,t,n,r,a){var s=e.duplicate();s.collapse(n);var l=s.parentElement();if(i.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var u=new o(l.parentNode,i.getNodeIndex(l));return{boundaryPosition:u,nodeInfo:{nodeIndex:u.offset,containerElement:u.node}}}var f=i.getDocument(l).createElement("span");f.parentNode&&i.removeNode(f);for(var d,p,h,m,g,v=n?"StartToStart":"StartToEnd",$=a&&a.containerElement==l?a.nodeIndex:0,y=l.childNodes.length,b=y,w=b;w==y?l.appendChild(f):l.insertBefore(f,l.childNodes[w]),s.moveToElementText(f),d=s.compareEndPoints(v,e),0!=d&&$!=b;){if(-1==d){if(b==$+1)break;$=w}else b=b==$+1?$:w;w=Math.floor(($+b)/2),l.removeChild(f)}if(g=f.nextSibling,-1==d&&g&&c(g)){s.setEndPoint(n?"EndToStart":"EndToEnd",e);var C;if(/[\r\n]/.test(g.data)){var x=s.duplicate(),S=x.text.replace(/\r\n/g,"\r").length;for(C=x.moveStart("character",S);-1==(d=x.compareEndPoints("StartToEnd",x));)C++,x.moveStart("character",1)}else C=s.text.length;m=new o(g,C)}else p=(r||!n)&&f.previousSibling,h=(r||n)&&f.nextSibling,m=h&&c(h)?new o(h,0):p&&c(p)?new o(p,p.data.length):new o(l,i.getNodeIndex(f));return i.removeNode(f),{boundaryPosition:m,nodeInfo:{nodeIndex:w,containerElement:l}}},h=function(e,t){var n,r,a,o,s=e.offset,u=i.getDocument(e.node),f=l(u).createTextRange(),d=c(e.node);return d?(n=e.node,r=n.parentNode):(o=e.node.childNodes,n=s<o.length?o[s]:null,r=e.node),a=u.createElement("span"),a.innerHTML="&#feff;",n?r.insertBefore(a,n):r.appendChild(a),f.moveToElementText(a),f.collapse(!t),r.removeChild(a),d&&f[t?"moveStart":"moveEnd"]("character",s),f};r=function(e){this.textRange=e,this.refresh()},r.prototype=new s(document),r.prototype.refresh=function(){var e,t,n,r=f(this.textRange);d(this.textRange)?t=e=p(this.textRange,r,!0,!0).boundaryPosition:(n=p(this.textRange,r,!0,!1),e=n.boundaryPosition,t=p(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var m=function(e){if(e.collapsed)return h(new o(e.startContainer,e.startOffset),!0);var t=h(new o(e.startContainer,e.startOffset),!0),n=h(new o(e.endContainer,e.endOffset),!1),r=l(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=m,r.prototype.toTextRange=function(){return m(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var g=function(e){return e("return this;")()}(Function);"undefined"==typeof g.Range&&(g.Range=r),e.createNativeRange=function(e){return e=u(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=u(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=u(e,t,"createRangyRange"),new s(e)},a.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),a.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;"undefined"==typeof n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),D.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function r(e,n){if(e){if(R.isWindow(e))return e;if(e instanceof v)return e.win;var r=R.getContentDocument(e,t,n);return R.getWindow(r)}return window}function i(e){return r(e,"getWinSelection").getSelection()}function a(e){return r(e,"getDocSelection").document.selection}function o(e){var t=!1;return e.anchorNode&&(t=1==R.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function s(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function u(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function c(t){var n;return t instanceof P?(n=e.createNativeRange(t.getDocument()),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof U?n=t.nativeRange:I.implementsDomRange&&t instanceof R.getWindow(t.startContainer).Range&&(n=t),n}function f(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!R.isAncestorOf(e[0],e[t]))return!1;return!0}function d(e){var n=e.getNodes();if(!f(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function p(e){return!!e&&"undefined"!=typeof e.text}function h(e,t){var n=new U(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function m(t){if(t._ranges.length=0,"None"==t.docSelection.type)u(t);else{var n=t.docSelection.createRange();if(p(n))h(t,n);else{t.rangeCount=n.length;for(var r,i=L(n.item(0)),a=0;a<t.rangeCount;++a)r=e.createRange(i),r.selectNode(n.item(a)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}}function g(e,n){for(var r=e.docSelection.createRange(),i=d(n),a=L(r.item(0)),o=_(a).createControlRange(),s=0,l=r.length;l>s;++s)o.add(r.item(s));try{o.add(i)}catch(u){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}o.select(),m(e)}function v(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function $(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function y(e,t){for(var n,r,i=tt.length;i--;)if(n=tt[i],r=n.selection,"deleteAll"==t)$(r);else if(n.win==e)return"delete"==t?(tt.splice(i,1),!0):r;return"deleteAll"==t&&(tt.length=0),null}function b(e,n){for(var r,i=L(n[0].startContainer),a=_(i).createControlRange(),o=0,s=n.length;s>o;++o){r=d(n[o]);try{a.add(r)}catch(l){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),m(e)}function w(e,t){if(e.win.document!=L(t))throw new D("WRONG_DOCUMENT_ERR")}function C(t){return function(n,r){var i;this.rangeCount?(i=this.getRangeAt(0),i["set"+(t?"Start":"End")](n,r)):(i=e.createRange(this.win.document),i.setStartAndEnd(n,r)),this.setSingleRange(i,this.isBackward())}}function x(e){var t=[],n=new M(e.anchorNode,e.anchorOffset),r=new M(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if("undefined"!=typeof e.rangeCount)for(var a=0,o=e.rangeCount;o>a;++a)t[a]=P.inspect(e.getRangeAt(a));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.config.checkSelectionRanges=!0;var S,E,T="boolean",A="number",R=e.dom,k=e.util,N=k.isHostMethod,P=e.DomRange,U=e.WrappedRange,D=e.DOMException,M=R.DomPosition,I=e.features,O="Control",L=R.getDocument,_=R.getBody,H=P.rangesEqual,F=N(window,"getSelection"),j=k.isHostObject(document,"selection");I.implementsWinGetSelection=F,I.implementsDocSelection=j;var B=j&&(!F||e.config.preferTextRange);if(B)S=a,e.isSelectionValid=function(e){var t=r(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||L(n.createRange().parentElement())==t};else{if(!F)return t.fail("Neither document.selection or window.getSelection() detected."),!1;S=i,e.isSelectionValid=function(){return!0}}e.getNativeSelection=S;var q=S();if(!q)return t.fail("Native selection was null (possibly issue 138?)"),!1;var V=e.createNativeRange(document),z=_(document),W=k.areHostProperties(q,["anchorNode","focusNode","anchorOffset","focusOffset"]);I.selectionHasAnchorAndFocus=W;var G=N(q,"extend");I.selectionHasExtend=G;var K=typeof q.rangeCount==A;I.selectionHasRangeCount=K;var Y=!1,J=!0,Q=G?function(t,n){var r=P.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.addRange(c(i)),t.extend(n.startContainer,n.startOffset)}:null;k.areHostMethods(q,["addRange","getRangeAt","removeAllRanges"])&&typeof q.rangeCount==A&&I.implementsDomRange&&!function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,i=[],a=o(t),s=0;n>s;++s)i[s]=t.getRangeAt(s);var l=R.createTestElement(document,"",!1),u=l.appendChild(document.createTextNode("   ")),c=document.createRange();if(c.setStart(u,1),c.collapse(!0),t.removeAllRanges(),t.addRange(c),J=1==t.rangeCount,t.removeAllRanges(),!r){var f=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(f&&parseInt(f[1])>=36)Y=!1;else{var d=c.cloneRange();c.setStart(u,0),d.setEnd(u,3),d.setStart(u,2),t.addRange(c),t.addRange(d),Y=2==t.rangeCount}}for(R.removeNode(l),t.removeAllRanges(),s=0;n>s;++s)0==s&&a?Q?Q(t,i[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(i[s])):t.addRange(i[s])}}(),I.selectionSupportsMultipleRanges=Y,I.collapsedNonEditableSelectionsSupported=J;var Z,X=!1;z&&N(z,"createControlRange")&&(Z=z.createControlRange(),k.areHostProperties(Z,["item","add"])&&(X=!0)),I.implementsControlRange=X,E=W?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return e.rangeCount?e.getRangeAt(e.rangeCount-1).collapsed:!1};var et;N(q,"getRangeAt")?et=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:W&&(et=function(t){var n=L(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),v.prototype=e.selectionPrototype;var tt=[],nt=function(e){if(e&&e instanceof v)return e.refresh(),e;e=r(e,"getNativeSelection");var t=y(e),n=S(e),i=j?a(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh()):(t=new v(n,i,e),tt.push({win:e,selection:t})),t};e.getSelection=nt,k.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var rt=v.prototype;if(!B&&W&&k.areHostMethods(q,["removeAllRanges","addRange"])){rt.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),u(this)};var it=function(e,t){Q(e.nativeSelection,t),e.refresh()};rt.addRange=K?function(t,r){if(X&&j&&this.docSelection.type==O)g(this,t);else if(n(r)&&G)it(this,t);else{var i;Y?i=this.rangeCount:(this.removeAllRanges(),i=0);var a=c(t).cloneRange();try{this.nativeSelection.addRange(a)}catch(o){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var l=et(this.nativeSelection,this.rangeCount-1);l&&!H(l,t)&&(t=new U(l))}this._ranges[this.rangeCount-1]=t,s(this,t,st(this.nativeSelection)),this.isCollapsed=E(this)}else this.refresh()}}:function(e,t){n(t)&&G?it(this,e):(this.nativeSelection.addRange(c(e)),this.refresh())},rt.setRanges=function(e){if(X&&j&&e.length>1)b(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(N(q,"empty")&&N(V,"select")&&X&&B))return t.fail("No means of selecting a Range or TextRange was found"),!1;rt.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=L(this.anchorNode);else if(this.docSelection.type==O){var t=this.docSelection.createRange();t.length&&(e=L(t.item(0)))}if(e){var n=_(e).createTextRange();n.select(),this.docSelection.empty()}}}catch(r){}u(this)},rt.addRange=function(t){this.docSelection.type==O?g(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},rt.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?b(this,e):t&&this.addRange(e[0])}}rt.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new D("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var at;if(B)at=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=_(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==O?m(t):p(n)?h(t,n):u(t)};else if(N(q,"getRangeAt")&&typeof q.rangeCount==A)at=function(t){if(X&&j&&t.docSelection.type==O)m(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;r>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],st(t.nativeSelection)),t.isCollapsed=E(t)}else u(t)};else{if(!W||typeof q.isCollapsed!=T||typeof V.collapsed!=T||!I.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;at=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=et(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=E(e)):u(e)}}rt.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(at(this),e){var i=t.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;i--;)if(!H(t[i],this._ranges[i]))return!0;return!1}};var ot=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,i=n.length;i>r;++r)H(t,n[r])||e.addRange(n[r]);e.rangeCount||u(e)};rt.removeRange=X&&j?function(e){if(this.docSelection.type==O){for(var t,n=this.docSelection.createRange(),r=d(e),i=L(n.item(0)),a=_(i).createControlRange(),o=!1,s=0,l=n.length;l>s;++s)t=n.item(s),t!==r||o?a.add(n.item(s)):o=!0;a.select(),m(this)}else ot(this,e)}:function(e){ot(this,e)};var st;!B&&W&&I.implementsDomRange?(st=o,rt.isBackward=function(){return st(this)}):st=rt.isBackward=function(){return!1},rt.isBackwards=rt.isBackward,rt.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},rt.collapse=function(t,n){w(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},rt.collapseToStart=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},rt.collapseToEnd=function(){if(!this.rangeCount)throw new D("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},rt.selectAllChildren=function(t){w(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},rt.deleteFromDocument=function(){if(X&&j&&this.docSelection.type==O){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),R.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,i=n.length;i>r;++r)n[r].deleteContents();this.addRange(n[i-1])}}},rt.eachRange=function(e,t){for(var n=0,r=this._ranges.length;r>n;++n)if(e(this.getRangeAt(n)))return t},rt.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},rt.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},rt.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(r){n.push(r[e].apply(r,t||[]))}),n},rt.setStart=C(!0),rt.setEnd=C(!1),e.rangePrototype.select=function(e){nt(this.getDocument()).setSingleRange(this,e)},rt.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},rt.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},rt.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},rt.moveToBookmark=function(t){for(var n,r,i=[],a=0;n=t.rangeBookmarks[a++];)r=e.createRange(this.win),r.moveToBookmark(n),i.push(r);t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)},rt.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},rt.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},rt.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(P.toHtml(t))}),e.join("")},I.implementsTextRange&&(rt.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(p(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),rt.getName=function(){return"WrappedSelection"},rt.inspect=function(){return x(this)},rt.detach=function(){y(this.win,"delete"),$(this)},v.detachAll=function(){y(null,"deleteAll")},v.inspect=x,v.isDirectionBackward=n,e.Selection=v,e.selectionPrototype=rt,e.addShimListener(function(e){"undefined"==typeof e.getSelection&&(e.getSelection=function(){return nt(e)}),e=null})});var _=!1,H=function(){_||(_=!0,!D.initialized&&D.config.autoInitialize&&f())};return P&&("complete"==document.readyState?H():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",H,!1),I(window,"load",H))),D},this),function(t,n){"function"==typeof define&&define.amd?define(["./rangy-core"],t):"undefined"!=typeof module&&"object"==typeof e?module.exports=t(require("rangy")):t(n.rangy)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function r(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),i=h.getDocument(e.startContainer),a=e.cloneRange();return a.collapse(t),n=i.createElement("span"),n.id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(i.createTextNode(v)),a.insertNode(n),n}function i(e,r,i,a){var o=n(i,e);o?(r[a?"setStartBefore":"setEndBefore"](o),m(o)):t.warn("Marker element has been removed. Cannot restore selection.")}function a(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function o(t,n){var i,a,o=e.DomRange.getRangeDocument(t),s=t.toString(),l=g(n);return t.collapsed?(a=r(t,!1),{document:o,markerId:a.id,collapsed:!0}):(a=r(t,!1),i=r(t,!0),{document:o,startMarkerId:i.id,endMarkerId:a.id,collapsed:!1,backward:l,toString:function(){return"original text: '"+s+"', new text: '"+t.toString()+"'"}})}function s(r,a){var o=r.document;"undefined"==typeof a&&(a=!0);var s=e.createRange(o);if(r.collapsed){var l=n(r.markerId,o);if(l){l.style.display="inline";var u=l.previousSibling;u&&3==u.nodeType?(m(l),s.collapseToPoint(u,u.length)):(s.collapseBefore(l),m(l))}else t.warn("Marker element has been removed. Cannot restore selection.")}else i(o,s,r.startMarkerId,!0),i(o,s,r.endMarkerId,!1);return a&&s.normalizeBoundaries(),s}function l(t,r){var i,s,l=[],u=g(r);t=t.slice(0),t.sort(a);for(var c=0,f=t.length;f>c;++c)l[c]=o(t[c],u);for(c=f-1;c>=0;--c)i=t[c],s=e.DomRange.getRangeDocument(i),i.collapsed?i.collapseAfter(n(l[c].markerId,s)):(i.setEndBefore(n(l[c].endMarkerId,s)),i.setStartAfter(n(l[c].startMarkerId,s)));return l}function u(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var r=e.getSelection(n),i=r.getAllRanges(),a=1==i.length&&r.isBackward(),o=l(i,a);return a?r.setSingleRange(i[0],a):r.setRanges(i),{win:n,rangeInfos:o,restored:!1}}function c(e){for(var t=[],n=e.length,r=n-1;r>=0;r--)t[r]=s(e[r],!0);return t}function f(t,n){if(!t.restored){var r=t.rangeInfos,i=e.getSelection(t.win),a=c(r),o=r.length;1==o&&n&&e.features.selectionHasExtend&&r[0].backward?(i.removeAllRanges(),i.addRange(a[0],!0)):i.setRanges(a),t.restored=!0}}function d(e,t){var r=n(t,e);r&&m(r)}function p(e){for(var t,n=e.rangeInfos,r=0,i=n.length;i>r;++r)t=n[r],t.collapsed?d(e.doc,t.markerId):(d(e.doc,t.startMarkerId),d(e.doc,t.endMarkerId))}var h=e.dom,m=h.removeNode,g=e.Selection.isDirectionBackward,v="﻿";e.util.extend(e,{saveRange:o,restoreRange:s,saveRanges:l,restoreRanges:c,saveSelection:u,restoreSelection:f,removeMarkerElement:d,removeMarkers:p})}),e},this)}({},function(){return this}()),!function(e,t){t["true"]=e,function(e,t){"use strict";function n(){this.$get=["$$sanitizeUri",function(e){return function(t){"undefined"!=typeof arguments[1]&&(arguments[1].version="taSanitize");var n=[];return a(t,c(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function r(e){var n=[],r=c(n,t.noop);return r.chars(e),n.join("")}function i(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function a(e,n){function r(e,r,a,s){if(r=t.lowercase(r),R[r])for(;c.last()&&k[c.last()];)i("",c.last());A[r]&&c.last()==r&&i("",r),s=S[r]||!!s,s||c.push(r);var l={};a.replace(h,function(e,t,n,r,i){var a=n||r||i||"";l[t]=o(a)}),n.start&&n.start(r,l,s)}function i(e,r){var i,a=0;if(r=t.lowercase(r))for(a=c.length-1;a>=0&&c[a]!=r;a--);if(a>=0){for(i=c.length-1;i>=a;i--)n.end&&n.end(c[i]);c.length=a}}"string"!=typeof e&&(e=null===e||"undefined"==typeof e?"":""+e);var a,s,l,u,c=[],w=e;for(c.last=function(){return c[c.length-1]};e;){if(u="",s=!0,c.last()&&P[c.last()]?(e=e.replace(new RegExp("([^]*)<\\s*\\/\\s*"+c.last()+"[^>]*>","i"),function(e,t){return t=t.replace(v,"$1").replace(b,"$1"),n.chars&&n.chars(o(t)),""}),i("",c.last())):(x.test(e)?(l=e.match(x))&&(l[0],n.whitespace&&n.whitespace(l[0]),e=e.replace(l[0],""),s=!1):$.test(e)?(l=e.match($),l&&(n.comment&&n.comment(l[1]),e=e.replace(l[0],""),s=!1)):y.test(e)?(l=e.match(y),l&&(e=e.replace(l[0],""),s=!1)):g.test(e)?(l=e.match(p),l&&(e=e.substring(l[0].length),l[0].replace(p,i),s=!1)):m.test(e)&&(l=e.match(d),l?(l[4]&&(e=e.substring(l[0].length),l[0].replace(d,r)),s=!1):(u+="<",e=e.substring(1))),s&&(a=e.indexOf("<"),u+=0>a?e:e.substring(0,a),e=0>a?"":e.substring(a),n.chars&&n.chars(o(u)))),e==w)throw f("badparse","The sanitizer was unable to parse the following block of html: {0}",e);w=e}i()}function o(e){if(!e)return"";var t=_.exec(e),n=t[1],r=t[3],i=t[2];return i&&(L.innerHTML=i.replace(/</g,"&lt;"),i="textContent"in L?L.textContent:L.innerText),n+i+r}function s(e){return e.replace(/&/g,"&amp;").replace(w,function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return"&#"+(1024*(t-55296)+(n-56320)+65536)+";"}).replace(C,function(e){var t=e.charCodeAt(0);return 159>=t||173==t||t>=1536&&1540>=t||1807==t||6068==t||6069==t||t>=8204&&8207>=t||t>=8232&&8239>=t||t>=8288&&8303>=t||65279==t||t>=65520&&65535>=t?"&#"+t+";":e}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e){var n="",r=e.split(";");return t.forEach(r,function(e){var r=e.split(":");if(2==r.length){var i=H(t.lowercase(r[0])),e=H(t.lowercase(r[1]));(("color"===i||"background-color"===i)&&(e.match(/^rgb\([0-9%,\. ]*\)$/i)||e.match(/^rgba\([0-9%,\. ]*\)$/i)||e.match(/^hsl\([0-9%,\. ]*\)$/i)||e.match(/^hsla\([0-9%,\. ]*\)$/i)||e.match(/^#[0-9a-f]{3,6}$/i)||e.match(/^[a-z]*$/i))||"text-align"===i&&("left"===e||"right"===e||"center"===e||"justify"===e)||"float"===i&&("left"===e||"right"===e||"none"===e)||("width"===i||"height"===i)&&e.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===i&&e.match(/^ltr|rtl|initial|inherit$/))&&(n+=i+": "+e+";")}}),n}function u(e,t,n,r){return"img"===e&&t["ta-insert-video"]&&("ta-insert-video"===n||"allowfullscreen"===n||"frameborder"===n||"contenteditable"===n&&"false"===r)?!0:!1}function c(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,a,o){e=t.lowercase(e),!r&&P[e]&&(r=e),r||U[e]!==!0||(i("<"),i(e),t.forEach(a,function(r,o){var c=t.lowercase(o),f="img"===e&&"src"===c||"background"===c;("style"===c&&""!==(r=l(r))||u(e,a,c,r)||O[c]===!0&&(D[c]!==!0||n(r,f)))&&(i(" "),i(o),i('="'),i(s(r)),i('"'))}),i(o?"/>":">"))},comment:function(e){i(e)},whitespace:function(e){i(s(e))},end:function(e){e=t.lowercase(e),r||U[e]!==!0||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(s(e))}}}var f=t.$$minErr("$sanitize"),d=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,p=/^<\/\s*([\w:-]+)[^>]*>/,h=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,m=/^</,g=/^<\//,v=/<!--(.*?)-->/g,$=/(^<!--.*?-->)/,y=/<!DOCTYPE([^>]*?)>/i,b=/<!\[CDATA\[(.*?)]]>/g,w=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=/([^\#-~| |!])/g,x=/^(\s+)/,S=i("area,br,col,hr,img,wbr,input"),E=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),T=i("rp,rt"),A=t.extend({},T,E),R=t.extend({},E,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),k=t.extend({},T,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),N=i("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),P=i("script,style"),U=t.extend({},S,R,k,A,N),D=i("background,cite,href,longdesc,src,usemap,xlink:href"),M=i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),I=i("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),O=t.extend({},D,I,M),L=document.createElement("pre"),_=/^(\s*)([\s\S]*?)(\s*)$/,H=function(){return String.prototype.trim?function(e){return t.isString(e)?e.trim():e}:function(e){return t.isString(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();t.module("ngSanitize",[]).provider("$sanitize",n),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,i=/^mailto:/;return function(a,o){function s(e){e&&p.push(r(e))}function l(e,n){p.push("<a "),t.isDefined(o)&&p.push('target="',o,'" '),p.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),p.push("</a>")}if(!a)return a;for(var u,c,f,d=a,p=[];u=d.match(n);)c=u[0],u[2]||u[4]||(c=(u[3]?"http://":"mailto:")+c),f=u.index,s(d.substr(0,f)),l(c,u[0].replace(i,"")),d=d.substring(f+u[0].length);return s(d),e(p.join(""))}}])}(window,window.angular)}({},function(){return this}()),angular.module("myApp",["ngRoute","myApp.controllers","myApp.services","myApp.directives","myApp.filters","ngCookies","gettext","superCache","ngAnimate","textAngular"]).config(["$routeProvider","$locationProvider","$provide",function(e,t,n){t.html5Mode(!0),e.when("/:lang/matchmaking",{templateUrl:"html/controllers/matchmaking.html",controller:"MatchmakingCtrl"}),e.when("/",{templateUrl:"/html/controllers/rdv.html",controller:"RdvCtrl",reloadOnSearch:!1}),e.when("/:lang/home/",{templateUrl:"/html/controllers/home.html",controller:"HomeCtrl",reloadOnSearch:!1}),e.when("/:lang/destiny/",{templateUrl:"/html/controllers/rdv.html",controller:"RdvCtrl",reloadOnSearch:!1}),e.when("/:lang/destiny/:plateform",{templateUrl:"/html/controllers/rdv.html",controller:"RdvCtrl",reloadOnSearch:!1}),e.when("/:lang/party/create",{templateUrl:"/html/controllers/party-create.html",controller:"PartyCreateCtrl"}),e.when("/:lang/party/waiting/:partyId",{templateUrl:"/html/controllers/party-waiting.html",controller:"PartyWaitingCtrl"}),e.when("/:lang/matchmaking/waiting/:partyId",{templateUrl:"/html/controllers/matchmaking-waiting.html",controller:"MatchmakingWaitingCtrl"}),e.when("/:lang/register",{templateUrl:"/html/controllers/register.html",controller:"RegisterCtrl"}),e.when("/:lang/login",{templateUrl:"/html/controllers/login.html",controller:"LoginCtrl"}),e.when("/:lang/profile/",{templateUrl:"/html/controllers/profile.html",controller:"ProfileCtrl"}),e.when("/:lang/profile/:gameId/:plateformId/",{templateUrl:"/html/controllers/profile.html",controller:"ProfileCtrl"}),e.when("/:lang/welcome",{templateUrl:"/html/controllers/rdv.html",controller:"RdvCtrl",action:"welcome"}),e.when("/:lang/home",{templateUrl:"/html/controllers/home.html",controller:"HomeCtrl"}),e.when("/:lang/games",{templateUrl:"/html/controllers/games-profiles.html",controller:"GamesProfilesCtrl",action:"games"}),e.when("/:lang/404/:msg?",{templateUrl:"/html/controllers/404.html",controller:"404Ctrl"}),e.when("/:lang/notification",{templateUrl:"/html/controllers/notification.html",controller:"NotificationCtrl"}),e.when("/:lang/password/forget/:username/:forgetToken",{templateUrl:"/html/controllers/password-update.html",controller:"PasswordUpdateCtrl",action:"forget"}),e.when("/:lang/password/update",{templateUrl:"/html/controllers/password-update.html",controller:"PasswordUpdateCtrl",action:"update"}),e.when("/:lang/users/connected",{templateUrl:"/html/controllers/list-users.html",controller:"ListUsersCtrl",reloadOnSearch:!1}),e.when("/:lang/annonce/create",{templateUrl:"/html/controllers/annonce-create.html",controller:"AnnonceCreateCtrl"}),e.when("/:lang/forum/",{templateUrl:"/html/controllers/forum.html",controller:"ForumCtrl"}),e.when("/:lang/forum/topic/:id/:page/:titre",{templateUrl:"/html/controllers/topic.html",controller:"TopicCtrl"}),e.when("/:lang/destiny/video/all",{templateUrl:"/html/controllers/videotheque.html",controller:"VideothequeCtrl"}),e.when("/:lang/video/:id/:nom",{templateUrl:"/html/controllers/partenaire.html",controller:"PartenaireCtrl"}),e.otherwise({redirectTo:"/fr/destiny/"}),n.decorator("taOptions",["$delegate",function(e){return e.toolbar=[["quote","bold","italics","underline","strikeThrough","ul","ol","redo","undo"],["h1","justifyLeft","justifyCenter","justifyRight","insertImage","insertLink","insertVideo","html","clear"]],e.classes={focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},e}])}]),angular.module("myApp.controllers",[]),angular.module("myApp.services",[]),angular.module("myApp.directives",[]),angular.module("myApp.filters",[]),angular.module("myApp").run(["gettextCatalog",function(e){e.setStrings("fr",{'<span class="title">FAQ: </span><br>Without an Esbattle account, you only can create an announcement. To create or join a party, an account is required :)':'<span class="title"><b>Comment ça marche? </b></span><br/>- Sans compte vous pouvez créer une annonce. En vous inscrivant vous aurez en plus la possibilité de <b>Créer</b> ou de <b>Rejoindre</b> une partie. De plus, vos personnages seront sauvegardés. Plus besoin de rentrer votre PSN ID ou Gamertag.<br /><b>Annonce:</b><br/> Une annonce est juste un message pour dire par exemple "dispo caveau".<br/><b>Partie:</b><br/>- Une partie permet de proposer aux autres joueurs un raid, un assaut, une nuit noire.<br />- Choisissez l\'heure et le nombre de places.<br/>- Une fois créée, les joueurs pourront rejoindre votre partie. Vous recevrez alors une notification. <br/>- Une url sera transmise pour que vous puissiez la partager sur des forums ou des réseaux sociaux. ',"<span>IMPORTANT :</span>After creating the party, it will be possible to invit/promote some players or cancel the party. However, after two players in the party, it will unfortunately not be possible to cancel the party! If you leave the party, the second player will be promoted as the creator of the party. Please check your information before creating!":"<span>IMPORTANT :</span>Après avoir créé la partie, il sera possible d'inviter des joueur, d'annuler la partie mais pas de la modifier. Cependant, lorsque deux joueurs sont confirmés dans la partie, il n'est plus possible d'annuler la partie. Si vous quittez la partie, le second joueur sera promu en tant que créateur. Donc merci de vérifier vos informations avant de créer une partie !","ALL FIELDS ARE REQUIRED":"TOUS LES CHAMPS DOIVENT ETRE REMPLIS",Accept:"Accepter",Actions:"Actions",Announcement:"Annonce","Are you sure to kick :":"Êtes-vous sûr de vouloir kicker:","Bad Username or Password.":"Mauvais nom d'utilisateur ou mot de passe.","Choose a character":"Choisissez un personnage",Class:"Class","Confirm Password":"Confirmez votre mot de passe","Create a party":"Créer une partie","Create a profile for this game and join !":"Créer un profil pour ce jeu et rejoignez !","Create an esbattle account to get your character from Destiny every time on www.esbattle.com.<br>You will also be able to to schedule party and join an existing party.<br><br>Your GamerTag or PSN ID will be used to get your Destiny characters.<br><br>A valid email is required if you forgot your password, we will send you an email to verify your	identity.<br>":"Creer un compte esbatte pour avoir vos personnages de Destiny sur www.esbattle.com.<br>Vous pourrez alors préparer une partie ou en rejoindre une existante<br><br>VotreGamerTag ou PSN ID sera utilisé pour récupérer vos personnages de Destiny<br><br>Un email valide est nécessaire si vous oubliez votre mot de passe, nous vous enverrons un email pour vérifier votre identité<br>",Creator:"Createur","Cropta's End":"La Chute de Cropta",Decline:"Refuser",Description:"Description","Display all":"Afficher tout","Display new":"Afficher les nouvelles","Email Address":"Adresse email",Ended:"Terminé","Enter a description":"Entrer une description","Enter your informations or":"Entrez vos informations ou","Enter your login and password":"Entrez votre login et mot de passe","Esbattle username":"Compte Esbattle",Find:"Chercher","First you have to create a party, then you will be able to invite your friends !":"Vous devez d'abord créer une partie, après vous pourrez inviter vos amis !","Forget login or password ?":"Mot de passe oublié ?",Fri:"Ven","Friend's list":"Liste d'amis","Game Profil":"Profil de jeux","GamerTag or PSN ID : Login Esbattle":"GamerTag ou PSN ID : Login Esbattle",Gamertag:"Gamertag",Guardian:"Gardien","Hi, we are looking for":"Bonjour, nous recherchons",Home:"Accueil","If you leave this page, the matchmaking will be cancel":"Si vous quittez cette page, le matchmaking sera annulé",Infos:"Infos","Invit !":"Invites !",Join:"Rejoins",Kick:"Rejeter","La Chute du Roi":"La Chute du Roi",Leave:"Quitter",Level:"Niveau",Login:"Connexion","Login !":"Connexion !","Login Esbattle":"Login Esbattle","Mail already send. Please check your mailBox (and your spam box)":"Email déjà envoyé. Merci de vérifier votre boite email (et votre dossier spam)","Mail send. Please check your mailBox (and your spam box)":"Email envoyé. Merci de vérifier votre boite email (et votre dossier spam)","Mark all as read":"Marquer tout comme lu","Mark as read":"Marquer comme lu",Mon:"Lun","My partys":"Mes parties","New announcement":"Nouvelle annonce","New character":"Nouveau personnage","New party on":"Nouvelle partie sur",Nightfall:"Nuit noire",No:"Non",Notifications:"Notifications",OR:"OU",Open:"Ouvert",Party:"Partie",Password:"Mot de passe","Password Forgotten ?":"Mot de passe oublié ?","Password Updated !":"Mot de passe mis à jour !","Passwords doesn't match":"Les mots de passe ne correspondent pas",Plateform:"Plateforme",Platform:"Platformes","Platform:":"Plateforme:",Player:"Joueur","Please check your GamerTag or PSN ID, we didn't found any Destiny characters":"Merci de vérifier votre GamerTag ou PSN ID, nous ne trouvons aucun personnage sur Destiny","Please waiting, we are looking for players...":"Merci de patienter, nous recherchons des joueurs...","Post an announcement":"Poster une annonce","Prison of Elders":"La Prison des Vétérans",Promote:"Nommer chef de groupe",Register:"Inscription","Register !":"Inscription !","Register on Esbattle.com":"Inscription sur Esbattle.com","Register to join the party !":"Inscrits toi pour rejoindre la partie !","Retrieve my account !":"Récupérer mon compte !",Sat:"Sam",Search:"Recherche",Send:"Envoyer","Send it":"Envoyer","Share this information on your favorite forum, social network and friends :":"Partage cette information sur ton forum favori, ton réseau social et tes amis :","Show Help":"Montrer l'aide",Slots:"Slots","Sorry, you have been kicked by {{notification.expediteur.username}} from":"Désolé, vous avez été exclus par  {{notification.expediteur.username}} de",Start:"Début","Start:":"Début:",Story:"Histoire","Story Challenge":"Histoire épique",Strike:"Assaut",Sun:"Dim",Team:"Equipe",Thanks:"Merci","This email is already used.":"Cet email est déjà pris","This gamerTag or PSN ID is already used as Esbattle account, please choose an other name for your Esbattle account.":"Ce gamerTag ou PSN ID est déjà utilisé comme nom de compte Esbattle, s'il vous plait choississez un autre nom pour votre compte Esbattle.",Thu:"Jeu",Tomorrow:"Demain","Trials of Osiris":"Le Jugement d'Osiris",Tue:"Mar",Type:"Type","Update Password":"Mettre à jour le mot de passe","Update my password !":"Mettre à jour mon mot de passe !","Url of the party:":"Url de la partie:","Use this character":"Utiliser ce personnage",Username:"Nom d'utilisateur","Vault of Glass":"Caveau de Verre",VaultOfGlass:"CaveauDeVerre","Waiting / Guest Players":"Joueurs invités / en attente ",Wed:"Mer","Weekly Heroic Strike":"Assaut épique de la semaine",When:"Quand:",Yes:"Oui","You have been accepted by {{notification.expediteur.username}} on":"Vous avez été accepté par {{notification.expediteur.username}} sur","You have been promoted as leader by {{notification.expediteur.username}} on":"Vous avez été promu organisateur par  {{notification.expediteur.username}} sur","Your gamertag":"Votre gamertag","Your message":"Votre message","an error occured, please try again later, sorry for the inconvenience":"une erreur est survenue, essayez plus tard, désolé pour le dérangement","apply on":"rejoins sur ","create an account":"créer un compte",daily:"du jour",epic:"épique","friend request":"demande d'ami",hunter:"chasseur","join the party !":"rejoins la partie !",online:"en ligne","password doesn't match":"Les mots de passe ne correspondent pas","player(s)":"joueur(s)","please wait ... game's data update is in progress":"patientez s'il vous plait ... mise à jour des données du jeu en cours",start:"commence","this party":"cette partie",titan:"titan","to save your character for the next time !":"pour sauvegarder votre personnage la prochaine fois !","today at {{time}}":"aujourd'hui à {{time}}","tomorrow at {{time}}":"demain à {{time}}",warlock:"arcaniste","yesterday at {{time}}":"hier à {{time}}","you have send a invite to {{name}}":"vous avez envoyé une invitation à {{name}}","your annoncement has been send and will appear in few second, please wait":"votre annonce a été envoyé et va apparaitre dans quelques secondes, merci de patienter","{{days}} days":"{{days}} jours","{{days}} days ago":"il y a {{days}} jours","{{hours}} hours":"{{hours}} heures","{{hours}} hours ago":"il y a {{hours}} heures","{{minutes}} minutes":"{{minutes}} minutes","{{minutes}} minutes ago":"il y a {{minutes}} minutes","{{name}} added on your friend list":"{{name}} a été ajouté à votre liste d'ami","{{name}} removed from your friend list":"{{name}} a été supprimé de votre liste d'amis",'{{notification.expediteur.username}} had you as friend, if he isn\'t on your friend list accept him on <a ng-href="{{listUsersUrl}}">users list page</a>':"{{notification.expediteur.username}} vous a ajouté comme amis, si il n'est pas dans votre liste d'amis ajouté le depuis <a ng-href=\"{{listUsersUrl}}\">la page utilisateur</a>","{{notification.expediteur.username}} has leave. You lead":"{{notification.expediteur.username}} a quitté. Vous organisez","{{notification.expediteur.username}} joined":"{{notification.expediteur.username}} a rejoins","{{notification.expediteur.username}} leave":"{{notification.expediteur.username}} a quitté","{{notification.expediteur.username}} send you an invitation to":"{{notification.expediteur.username}} vous a envoyé une invitation pour","Alternate Guardians":"Autre Gardiens","Follow us":"Nous suivre",English:"Anglais",French:"Français",Notification:"Notification",Back:"Retour",Email:"Adresse email",Game:"Jeu","Game Infos for {{game.name}}":"Infos de jeux pour {{game.name}}","Personal Infos":"Informations personelles","Profil Name":"Nom du profil",Update:"Mettre à jour","Username on this game":"Nom d'utilisateur sur ce jeu",Logout:"Déconnexion","A new player joined":"Un nouveau joueur a rejoint","A player leave":"Un joueur a quitté","Sorry, you have been kicked by":"Désolé, vous avez été exclu par","Waiting Players":"Joueurs voulant rejoindre la partie","You have been accepted by":"Vous avez été accepté par","You have been promoted as leader by":"Vous avez été promu comme chef par",from:"de","has leave. You lead":"a quitté. Vous contrôlez ",on:"sur",All:"Tous","GamerTag or PSN ID":"GamerTag ou PSN ID",Hide:"Cacher","The username is already used.":"Ce nom d'utilisateur est déjà pris","start at":"commence à","Appointment not found":"Rendez vous non trouvé","Ask to join the party":"Demander à rejoindre la partie","Formated Party":"Partie préformatée","Personalized Party":"Partie Personnalisée","This party is ended, create a new party !":"Cette partie est terminée, créez une nouvelle partie !",'<span class="title">What\'s new: 12 jan 2015</span><br>New Design and new feature :<br>Create an announcement with your destiny character, just put your plateform and your GamerTag ou PSN ID !<br>Choose your games console and watch all announcement or schedule party.<br>Use tag like #raid, #cropta, #caveaudeverre, #level30 to find easily what you want !<br>Create a schedule party easily with our new interface !':'<span class="title">What\'s new: 12 jan 2015</span><br>Nouveau design et nouvelle fonctionnalité :<br>Créer une annonce avec votre personnage de Destiny, renseignez juste votre platefome et votre GamerTag ou PSN ID !<br>Sélectionnez une console de jeux et regardez toutes les annonces ou les parties planifiées<br>Utilisez les tags comme #raid, #cropta, #caveaudeverre, #level30 pour trouvez facilement ce que vous voulez!<br>Créer plus facilement une partie planifiée avec notre nouvelle interface !','<span class="title">FAQ: </span><br>Without an Esbattle account, you only can create an accouncement. To create or join a party, an account is required :)':'<span class="title">FAQ: </span>Sans inscription, vous pouvez seulement poster des annonces. Pour créer ou rejoindre une partie, un compte Esbattle est requis :)',"<span class=\"title\">What's new: 10 jan 2015</span><br> With this new version, it's more simple to user the website. Now, just with your gamertag, all your characters will be automai":'<span class="title">Nouveautés du 10 jan 2015</span> With this new version, it\'s more simple to user the website. Now, just with your gamertag, all your characters ',"Join this party to see player's gamertag":"Rejoignez cette partie pour voir le gamertag des joueurs","Register with your email address":"S'enregistrer avec votre adresse email","Create a profil for this game and join !":"Créer un profil pour ce jeu et rejoignez !"})
}]),angular.module("myApp.controllers").controller("404Ctrl",["$scope","$routeParams",function(e,t){"use strict";e.msg=t.msg,console.log(e.msg)}]),angular.module("myApp.controllers").controller("AnnonceCreateCtrl",["$scope","rdv","$location","$filter","user","$rootScope","redirection","lang",function(e,t,n,r,i,a,o,s){"use strict";e.lang=s.getCurrent(),e.currentUser=i.get()}]),angular.module("myApp.controllers").controller("ForumCtrl",["$scope","$routeParams","forum","redirection","$location","$window","user",function(e,t,n,r,i,a,o){"use strict";e.currentUser=o.get(),e.title=e.texte="",e.registerUrl=r.getRegisterPageUrl(),n.getAllTopic().success(function(t){for(var n in t)t[n].url=r.getTopicUrl(t[n]);e.aTopic=t}),e.submit=function(){if(e.myForm.$valid!==!1){var t=n.createTopic(e.title,e.texte);null===t&&r.goToLogin(),t.success(function(e){var t=r.getTopicUrl(e,1);i.path(t)})}},e.refresh=function(){a.location.reload()},e.indexPage=0,e.nbItemByPage=25,e.updateIndexPage=function(t){e.indexPage=t}}]),angular.module("myApp.controllers").controller("GamesProfilesCtrl",["$scope","user","rdv","$routeParams","redirection","lang",function(e,t,n,r,i,a){"use strict";e.lang=a.getCurrent(),e.currentUser=t.get(),e.aProfils=[],null!==e.currentUser&&(e.aProfils=e.currentUser.userGame),n.getFormInfo().then(function(t){e.plateforms=t.plateforms,e.games=t.games,e.plateform=e.plateforms[0],e.game=e.games[0]}),e.submitFormGameInfo=function(){e.formGameProfil.$valid!==!1&&(e.formGameInfoUpdate=!1,"undefined"==typeof e.profilId||""===e.profilId?t.createUserGame(e.plateform.id,e.game.id,e.profilName,e.gameUsername,e.data_1,e.data_2,e.data_3,e.data_4).success(function(t){e.aProfils=t.userGame,e.formGameInfoUpdate=!0,e.$broadcast("refreshProfil")}):t.updateUserGame(e.plateform.id,e.game.id,e.profilId,e.profilName,e.gameUsername,e.data_1,e.data_2,e.data_3,e.data_4).success(function(t){e.aProfils=t.userGame,e.formGameInfoUpdate=!0,e.$broadcast("refreshProfil")}))},e.selectProfil=function(t){if(e.profilId=null!==t?t.id:"",e.profilName=null!==t?t.gameProfilName:"",e.gameUsername=null!==t?t.gameUsername:"",e.data_1=null!==t?t.data1:"",e.data_2=null!==t?parseInt(t.data2):"",e.data_3=null!==t?t.data3:"",e.data_4=null!==t?t.data4:"",null!==t){for(var n in e.plateforms)e.plateforms[n].id==t.plateform.id&&(e.plateform=e.plateforms[n]);for(var r in e.games)e.games[r].id==t.game.id&&(e.game=e.games[r])}}}]),angular.module("myApp.controllers").controller("HomeCtrl",["$scope","$routeParams","forum","redirection","$anchorScroll","$location","$timeout","user","rdv","$filter","partenaire","planification","$sce",function(e,t,n,r,i,a,o,s,l,u,c,f,d){"use strict";e.currentUser=s.get(),e.texte="",e.aTopic=[],e.partyWaitingUrlRoot=r.getPartyWaitingUrlRoot(),e.rdvUrl=r.getHomePageDestinyUrl();c.getAll().success(function(t){for(var n in t)""==t[n].blocHomeLink&&(t[n].blocHomeLink=r.getPartenaireByIdUrl(t[n]));e.partenaires=t});var p=function(e){for(var t in e.users)e.users[t].user.id===e.leader.id&&(e.author=e.users[t],e.user=e.users[t].user,e.type="type_party")},h=null;null!==e.currentUser&&e.currentUser.userGame[0]&&e.currentUser.userGame[0].plateform&&(h=e.currentUser.userGame[0].plateform.id);var m=function(){l.getAll().success(function(t){for(var n in t)t[n].url=e.partyWaitingUrlRoot+t[n].id,p(t[n]);e.predicate="start",e.reverse=!0,e.aRdv=u("filterRdvLastPlace")(t,h,[],!1,!0,!0,1,5,"type_party"),e.aRdv.length<2&&(e.aRdv=u("orderBy")(t,e.predicate,e.reverse))}).error(function(){})},g=0,v=13;e.displayAddNews=!0,e.addNews=function(){n.getNews(g,v).success(function(t){var n=t.length-1;t.length!==v&&(e.displayAddNews=!1,n=t.length);for(var i=0;n>i;i++)t[i].url=r.getTopicUrl(t[i]),t[i].message.texteBrut=u("filterWords")(t[i].message.texteBrut,26),t[i].dateFormated=u("filterDateNews")(t[i].created),e.aTopic.push(t[i]),g++})};e.trustSrc=function(e){return d.trustAsResourceUrl(e)};var $=function(){f.getCurrent().success(function(t){e.planification=t,o(function(){e.masonry.reloadItems(),e.masonry.layout()},15e3)})},y=function(){f.getNext().success(function(t){e.aNextPlanifications=t,e.masonry.reloadItems(),e.masonry.layout()})},b=function(){e.masonry.reloadItems(),e.masonry.layout()};e.displayChat=!1,e.toggleChat=function(){b(),e.displayChat=!e.displayChat,o(function(){b()},1e3)},m(),e.addNews(),$(),y(),e.reloadParty=function(){m()};var w=document.querySelector("#container");e.masonry=new Masonry(w,{columnWidth:".grid-sizer",itemSelector:".article",gutter:10,percentPosition:!0}),e.isTwitchUrl=function(e){return e.match(/twitch/)}}]),angular.module("myApp.controllers").controller("ListUsersCtrl",["$scope","$routeParams","user","$filter","rdv","gettextCatalog","$location",function(e,t,n,r,i,a,o){"use strict";e.currentUser=n.get(),e.sort="onlineTime",e.reverse=!0,e.onlyFriends=!1,e.username="",e.aAllUsers=[],e.plateform=null,e.aFriendsId=[];var s=function(t){e.aFriendsId=[];for(var n in t)e.aFriendsId.push(t[n].id)};e.aFriendsPendingId=[];var l=function(t){e.aFriendsPendingId=[];for(var n in t)e.aFriendsPendingId.push(t[n].id)};e.aFriendsRequestPendingId=[];var u=function(t){e.aFriendsRequestPendingId=[];for(var n in t)e.aFriendsRequestPendingId.push(t[n].id)};e.page=1,e.searchPlateform=null,e.searchUsername=null,e.searchMethode=null,e.searchMore=!0;var c=60,f=function(e,t){for(var n=0;n<t.length;n++){for(var r=!1,i=0;i<e.length;i++)t[n].id===e[i].id&&(r=!0,e[i]=t[n]);r===!1&&e.push(t[n])}},d=function(){var t=null;"undefined"!=typeof e.plateform&&null!==e.plateform&&(t=e.plateform.id);var r=null;e.username.length>=1&&(r=e.username),e.searchPlateform!==t&&(e.aAllUsers=[]),(e.searchPlateform!==t||e.searchUsername!==r)&&(e.page=1,e.searchMore=!0),e.searchPlateform=t,e.searchUsername=r,n.getByUsername(e.searchUsername,e.searchPlateform,e.page,c).success(function(t){0===t.length&&(e.searchMore=!1),f(e.aAllUsers,t),p()})},p=function(){for(var t in e.aAllUsers)e.aAllUsers[t].connected=!1,e.aAllUsers[t].me=!1,e.aAllUsers[t].canAddToFriendList=!0,e.aAllUsers[t].canAddToBlackList=!0,null!==e.currentUser&&e.aAllUsers[t].username===e.currentUser.username&&(e.aAllUsers[t].me=!0),e.aAllUsers[t].isFriend=e.aFriendsId.indexOf(e.aAllUsers[t].id)>-1,e.aAllUsers[t].isFriendPending=e.aFriendsPendingId.indexOf(e.aAllUsers[t].id)>-1,e.aAllUsers[t].isFriendResquest=e.aFriendsRequestPendingId.indexOf(e.aAllUsers[t].id)>-1;var n=null;"undefined"!=typeof e.plateform&&null!==e.plateform&&(n=e.plateform.id),e.aUsers=r("filterUser")(e.aAllUsers,e.username,e.onlyFriends,n)};e.addMore=function(){e.page++,d()},e.$watch("username",function(){o.search("user",e.username),p(),0===e.aUsers.length&&d()}),e.$watch("plateform",function(){p(),0===e.aUsers.length&&d()}),e.$on("updateListUsers",function(){p()}),e.addToFriendList=function(t){var r=n.addFriend(t);r!==!1&&r.success(function(){$()});var i=a.getString("{{name}} added on your friend list",{name:t});e.$broadcast("popup",[i])},e.removeFromFriendList=function(t){var r=n.removeFriend(t);r!==!1&&r.success(function(){$()});var i=a.getString("{{name}} removed from your friend list",{name:t});e.$broadcast("popup",[i])};var h=function(){i.getFormInfo().then(function(t){e.aPlateforms=t.plateforms,y()})};e.invite=function(t){e.$broadcast("invite",[t])};var m=function(){var e=n.getFriends();e!==!1&&n.getFriendsRequest().success(function(e){u(e)}).then(function(){p()})},g=function(){var e=n.getFriends();e!==!1&&n.getFriendsPending().success(function(e){l(e)}).then(function(){p()})},v=function(){var e=n.getFriends();e!==!1&&n.getFriends().success(function(e){s(e)}).then(function(){p()})},$=function(){v(),g(),m()},y=function(){if(null!==e.currentUser){var t=e.currentUser.userGame[0].plateform;for(var n in e.aPlateforms)e.aPlateforms[n].id===t.id&&(e.plateform=e.aPlateforms[n])}},b=function(){var t=o.search();t.user&&(e.username=t.user)},w=function(){b(),h(),$(),d()};w()}]),angular.module("myApp.controllers").controller("LoginCtrl",["$scope","user","redirection","lang",function(e,t,n,r){"use strict";e.lang=r.getCurrent(),e.registerPageUrl=n.getRegisterPageUrl();var i=0,a=2;e.promiseLoginInProgress=!1,e.bDisplayForgetPasswordForm=!1,e.bDisplayForgetPasswordFormMailSend=!1,e.displayForgetPasswordForm=function(){e.bDisplayForgetPasswordForm=!0},e.login=function(){e.loginForm.$valid!==!1&&(e.promiseLoginInProgress=!0,t.log(e.username,e.password).success(function(t){e.promiseLoginInProgress=!1,e.userInfo=t,n.goHome()}).error(function(t){e.promiseLoginInProgress=!1,e.error=t.msg,"connection_refused"===t.msg&&(i++,i>a&&e.displayForgetPasswordForm())}))},e.forgetPassword=function(){t.forgetPassword(e.email).success(function(){e.bDisplayForgetPasswordFormMailSend=!0}).error(function(t){e.errorForgetPassword=t.msg})}}]),angular.module("myApp.controllers").controller("MatchmakingCtrl",["$scope","matchmaking","user","redirection","$filter",function(e,t,n,r,i){"use strict";e.currentUser=n.get(),e.matchmakingTemplate=null,e.profilSelected=null;var a=function(){null!==e.currentUser&&null!==e.game&&(e.profils=i("filterGameProfil")(e.currentUser.userGame,null,null),e.profils[0]&&null===e.profilSelected&&(e.profilSelected=e.profils[0]))};a(),t.getConf().success(function(t){var n={};for(var r in t){n[t[r].description]||(n[t[r].description]=[]),t[r].concatTags="";for(var i in t[r].tags)t[r].concatTags+="#"+t[r].tags[i].nom+" ";n[t[r].description].push(t[r])}e.groupOfTemplate=n}),e.join=function(){e.joinMatchmakingForm.$valid!==!1&&t.join(e.templateSelectedModel.id,e.profilSelected.id).success(function(e){r.goToMatchmakingId(e.id)})},e.selectGroupOfTemplate=function(t){e.matchmakingTemplate=t,e.templateSelectedModel=t[0]},e.createProfil=function(){r.goToGamesPage()}}]),angular.module("myApp.controllers").controller("MatchmakingWaitingCtrl",["$scope","rdv","$routeParams","user","$location","$filter","redirection","$interval","activity","lang",function(e,t,n,r,i,a,o,s,l,u){"use strict";e.lang=u.getCurrent(),e.currentUser=r.get();var c=function(){if(e.isLeader=!1,e.canJoin=!0,e.imOnGroup=!1,null!==e.currentUser){e.profils=a("filterGameProfil")(e.currentUser.userGame,e.rdv.game.id,e.rdv.plateform.id),e.profils[0]&&(e.profilSelected=e.profils[0]),e.rdv.leader&&e.rdv.leader.username===e.currentUser.username&&(e.isLeader=!0);for(var t in e.rdv.users)e.rdv.users[t].user.username===e.currentUser.username&&(e.canJoin=!1,e.imOnGroup=!0);for(var n in e.rdv.usersInQueue)e.rdv.usersInQueue[n].user.username===e.currentUser.username&&(e.canJoin=!1)}else e.canJoin=!1},f=function(){t.get(n.partyId).success(function(t){e.rdv=t,e.isFull=t.users.length===t.nbParticipant,c()})},d=function(){null!==e.currentUser?r.updateOnline(e.currentUser).success(function(){f()}):f()};e.leave=function(n){m(),t.leave(e.rdv.id,n,e.currentUser.username,e.currentUser.token).success(function(t){e.rdv=t,h()})},e.currentUrl=i.absUrl();var p=12e3,h=function(){m(),e.intervalId=s(function(){d()},p)},m=function(){s.cancel(e.intervalId)};d(),h()}]),angular.module("myApp.controllers").controller("NotificationCtrl",["$scope","$routeParams","redirection","rdv","$filter","user","$interval","$rootScope",function(e,t,n,r,i,a){"use strict";e.partyWaitingUrlRoot=n.getPartyWaitingUrlRoot(),e.listUsersUrl=n.getListUsersUrl(),e.userInfo=a.get(),e.displayNew=!0,e.displayNewfn=function(){e.displayNew=!0},e.displayAllfn=function(){e.displayNew=!1};var o=function(){var t=r.getNotifications();t!==!1&&t.success(function(t){e.notifications=t})};e.markRead=function(t){var n=r.markNotificationRead(t);n!==!1&&n.success(function(t){e.notifications=t})},e.markAllAsRead=function(){var t=[];for(var n in e.notifications)t.push(e.notifications[n].id);e.markRead(t.join("-"))};var s=function(){var t=r.getAllNotifications();t!==!1&&t.success(function(t){e.allNotifications=t})};o(),s()}]),angular.module("myApp.controllers").controller("PartenaireCtrl",["$scope","$routeParams","forum","redirection","$anchorScroll","$location","$timeout","user","partenaire",function(e,t,n,r,i,a,o,s,l){"use strict";e.currentUser=s.get(),e.texte="",l.getById(t.id).success(function(t){e.partenaire=t})}]),angular.module("myApp.controllers").controller("PartyCreateCtrl",["$scope","rdv","$location","$filter","user","$rootScope","redirection","lang","gettextCatalog",function(e,t,n,r,i,a,o,s,l){"use strict";if(e.lang=s.getCurrent(),e.currentUser=i.get(),null===e.currentUser)return void o.goToLogin();e.dureeHours=1,e.dureeMinutes=0,e.game=null,e.plateform=null,e.profilSelected=null,t.getFormInfo().then(function(t){e.formInfo=t,e.game=e.formInfo.games[0]}),e.today=new Date,e.day=new Date(e.today.getFullYear(),e.today.getMonth(),e.today.getDate(),e.today.getHours(),e.today.getMinutes()+5,e.today.getSeconds()),e.startHours=e.today.getHours(),e.startMinutes=e.today.getMinutes(),e.dayPlusTwo=new Date,e.dayPlusTwo.setTime(e.dayPlusTwo.getTime()+1728e5),e.$watch("game",function(){u()}),e.$watch("profilSelected",function(t){"undefined"!=typeof t&&null!==t&&e.updatePlateform(t.plateform)});var u=function(){null!==e.currentUser&&null!==e.game&&(e.profils=r("filterGameProfil")(e.currentUser.userGame,e.game.id,null))},c=function(){var t=new Date,n=new Date;t.setHours(e.startHours),t.setMinutes(e.startMinutes),e.bDemain=!1,n.getTime()>t.getTime()&&(t.setTime(t.getTime()+864e5),e.bDemain=!0),e.day=t};e.$watch("startMinutes",function(){c()}),e.$watch("startHours",function(){c()}),e.submit=function(){if(e.myForm.$valid!==!1){var n=e.game.id,r=e.myForm.inputDayStart.$modelValue.getTime()/1e3,i=e.dureeHours,a=e.dureeMinutes,s=e.plateform.id,l=e.tags,u=e.description,c=e.slotTotal,f=e.profilSelected.id,d=e.vignette;t.add(s,n,l,u,r,i+":"+a,c,f,d).success(function(e){o.goToRdvId(e.id)})}},e.updatePlateform=function(t){e.plateform=t},e.autocomplete=function(){for(var t=e.tags.split(" "),n="",r=[],i=0;i<t.length-1;i++)n=n+t[i]+" ",r.push(t[i]);e.autocompleteTag=[];for(var a in e.formInfo.tags)r.indexOf(e.formInfo.tags[a].nom)>-1||e.autocompleteTag.push(n+e.formInfo.tags[a].nom)},e.createProfil=function(){o.goToGamesPage()},e.$on("templateSelectedModel",function(t,n){var r=n[0];"undefined"!=typeof r&&(e.tags=r.concatTags,e.description=l.getString(r.description),e.slotTotal=r.nbParticipant,null!==r.vignette&&(e.vignette=r.vignette.id))})}]),angular.module("myApp.controllers").controller("PartyWaitingCtrl",["$scope","rdv","$routeParams","user","$location","$filter","redirection","$interval","activity","lang",function(e,t,n,r,i,a,o,s,l,u){"use strict";e.lang=u.getCurrent(),e.partyCreateUrl=o.getCreatePartyPageUrl(),e.registerUrl=o.getRegisterPageUrl(),e.currentUser=r.get(),e.profilSelected=null;var c=function(){if(e.isLeader=!1,e.canJoin=!0,e.imOnGroup=!1,null!==e.currentUser){e.profils=a("filterGameProfil")(e.currentUser.userGame,e.rdv.game.id,e.rdv.plateform.id),e.rdv.leader&&e.rdv.leader.username===e.currentUser.username&&(e.isLeader=!0);for(var t in e.rdv.users)e.rdv.users[t].user.username===e.currentUser.username&&(e.canJoin=!1,e.imOnGroup=!0);for(var n in e.rdv.usersInQueue)e.rdv.usersInQueue[n].user.username===e.currentUser.username&&(e.canJoin=!1,e.imOnGroup=!0)}else e.canJoin=!1,e.imOnGroup=!1,e.isLeader=!1},f=function(){t.get(n.partyId).success(function(n){e.rdv=n,e.isFull=n.users.length===n.nbParticipant,e.isEnded=t.isEnded(e.rdv),e.isLive=t.isLive(e.rdv),g(),c()})},d=function(){f()};e.join=function(){null!==e.currentUser&&(m(),t.join(e.rdv.id,e.profilSelected.id,e.currentUser.username,e.currentUser.token).success(function(t){e.rdv=t,c(),h()}))},e.acceptUser=function(n){m(),t.acceptUser(n,e.rdv.id,e.currentUser.username,e.currentUser.token).success(function(t){e.rdv=t,c(),h()})},e.kickUser=function(n){m(),t.kickUser(n,e.rdv.id,e.currentUser.username,e.currentUser.token).success(function(t){e.rdv=t,c(),h()})},e.leave=function(n){m(),t.leave(e.rdv.id,n,e.currentUser.username,e.currentUser.token).success(function(t){e.rdv=t,c(),h()})},e.promote=function(n){m(),t.promote(e.rdv.id,n,e.currentUser.username,e.currentUser.token).success(function(t){e.rdv=t,c(),h()})},e.createProfil=function(){o.goToGamesPage()},e.currentUrl=i.absUrl();var p=12e3,h=function(){m(),e.intervalId=s(function(){d()},p)},m=function(){s.cancel(e.intervalId)},g=function(){null!==e.currentUser&&null!==e.rdv&&null!==e.rdv.game&&null!==e.rdv.plateform&&(e.profils=a("filterGameProfil")(e.currentUser.userGame,e.rdv.game.id,e.rdv.plateform.id),e.profils[0]&&null===e.profilSelected&&(e.profilSelected=e.profils[0]))};d(),h(),function(){var e=document,t=e.createElement("script");t.src="//esbattle.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)}()}]),angular.module("myApp.controllers").controller("PasswordUpdateCtrl",["$scope","user","$route","$routeParams","redirection",function(e,t,n,r,i){"use strict";"forget"===n.current.action&&t.logByForgetToken(r.username,r.forgetToken).error(function(t){e.error=t.msg}),e.bDisplayUpdatePassword=!1,e.updatePassword=function(){e.password!==e.passwordVerif?e.error="password_not_equal":t.updatePassword(e.password).success(function(){e.bDisplayUpdatePassword=!0,i.goHome()}).error(function(t){e.error=t.msg})}}]),angular.module("myApp.controllers").controller("ProfileCtrl",["$scope","user","rdv","$routeParams","redirection","lang","avis",function(e,t,n,r,i,a,o){"use strict";e.lang=a.getCurrent(),e.currentUser=t.get(),e.submit=function(){console.log(e.avis),o.post(1,e.avis)},o.get(1).then(function(e){console.log("ok",e)})}]),angular.module("myApp.controllers").controller("RdvCtrl",["$scope","rdv","redirection","$route","tag","lang","$interval","user","bungie","annonce","$timeout","$filter","storage","$routeParams","$location",function(e,t,n,r,i,a,o,s,l,u,c,f,d,p,h){"use strict";a.initLang(),e.currentUser=null,e.displayhelp="false"==d.getPersistant("displayhelp")?!1:!0,e.showHelp=function(){e.displayhelp=!0,d.setPersistant("displayhelp",e.displayhelp)},e.hideHelp=function(){e.displayhelp=!1,d.setPersistant("displayhelp",e.displayhelp)},e.predicate="start",e.reverse=!0,e.now=new Date,e.demain=new Date,e.demain.setTime(e.demain.getTime()+864e5),e.slotMinAvailable=0,e.slotMaxAvailable=200,e.partyWaitingUrlRoot=n.getPartyWaitingUrlRoot(),e.partyCreateUrl=n.getCreatePartyPageUrl(),e.annonceCreateUrl=n.getAnnonceCreateUrl(),e.registerPageUrl=n.getRegisterPageUrl(),e.isLive=t.isLive,e.isEnded=t.isEnded,e.aCharacters=[],e.displayFormAnnonce=!1,e.aMyRdv=[],e.aRdv=[],e.aRdvNormaux=[],e.tags="",e.goToParty=function(e){n.goToRdvId(e)},e.updateTags=function(){var t=e.tags.split(" ");e.autoCompleteTags=i.autoCompleteUserTags(t,e.allTags)},e.autoCompleteTags=[],e.allTags=[];var m=function(e){for(var t in e.users)e.users[t].user.id===e.leader.id&&(e.author=e.users[t],e.user=e.users[t].user,e.type="type_party")},g=function(){$(),y()},v=function(e,t){for(var n=0;n<t.length;n++){for(var r=!1,i=0;i<e.length;i++)t[n].id===e[i].id&&t[n].type===e[i].type&&(r=!0);r===!1&&e.push(t[n])}g()},$=function(){if(null!==e.currentUser){if("undefined"==typeof e.plateform||null===e.plateform)var t=null;else var t=e.plateform.id;e.aMyRdv=f("filterRdvWithMe")(e.aRdv,e.currentUser.id,t,e.tags,e.slotMinAvailable,e.slotMaxAvailable),e.aMyRdv=f("orderBy")(e.aMyRdv,e.predicate,e.reverse)}};e.aRdvLastPlace=[];var y=function(){if("undefined"==typeof e.plateform||null===e.plateform)var t=null;else var t=e.plateform.id;e.aRdvLastPlace=f("filterRdvLastPlace")(e.aRdv,t,e.tags,!1,!1,!0,e.slotMinAvailable,e.slotMaxAvailable,e.type),e.aRdvLastPlace=f("orderBy")(e.aRdvLastPlace,e.predicate,e.reverse)},b=function(){if("undefined"==typeof e.plateform||null===e.plateform)u.get().success(function(t){v(e.aRdv,S(t))}),t.getAll().success(function(t){for(var n in t)t[n].url=e.partyWaitingUrlRoot+t[n].id,m(t[n]);v(e.aRdv,t)}).error(function(){});else{var n=e.plateform.id;u.getByPlateform(n).success(function(t){v(e.aRdv,S(t))}),t.getByPlateform(n).success(function(t){for(var n in t)t[n].url=e.partyWaitingUrlRoot+t[n].id,m(t[n]);v(e.aRdv,t)}).error(function(){})}};e.displayWelcome="welcome"===r.current.action;var w=2e4,C=function(){e.intervalId=o(function(){b()},w)};e.getDestinyCharacters=function(){l.getCharacters(e.plateformAnnonce.id,e.plateformAnnonce.bungiePlateformId,e.gamertag).success(function(t){e.aCharacters=t}).error(function(){e.aCharacters=[]})},e.selectedPerso=null,e.aAnnoncesFormated=[];var x=function(e){return{id:e.id,author:e.author,game:e.game,plateform:e.plateform,tags:e.tags,description:e.description,start:e.created,type:"type_annonce",user:e.user}},S=function(e){for(var t=e.length,n=0;t>n;n++)e[n]=x(e[n]);return e};e.blockPostAnnonce=!1,e.messageFormAnnonce=null,e.addAnnonce=function(){e.messageFormAnnonce=null,e.blockPostAnnonce=!0;var t=e.selectedPerso.id,n=e.annonce_tag,r=e.annonce_description;u.create(n,r,t).success(function(t){e.annonce_tag="",e.annonce_description="",c(function(){e.blockPostAnnonce=!1},2),e.messageFormAnnonce="your annoncement has been send and will appear in few second, please wait";var n=[];n.push(x(t)),v(e.aRdv,n)}).error(function(){e.annonce_tag="",e.annonce_description="",c(function(){e.blockPostAnnonce=!1},2),e.messageFormAnnonce="an error occured, please try again later, sorry for the inconvenience"})};var E=function(){var t=d.getPersistant("cookie_type_rdv");e.type="undefined"==typeof t?"type_all":t,e.$watch("type",function(e){d.setPersistant("cookie_type_rdv",e),g()})},T=function(){var t=p.plateform;if(null!==e.currentUser&&e.currentUser.userGame[0]&&e.currentUser.userGame[0].plateform)var r=e.currentUser.userGame[0].plateform.id;if("undefined"!=typeof t){t=t.replace("_"," ");for(var i in e.aPlateforms)e.aPlateforms[i].nom==t&&(e.plateform=e.aPlateforms[i])}else if("undefined"!=typeof r)for(var i in e.aPlateforms)e.aPlateforms[i].id==r&&(e.plateform=e.aPlateforms[i]);e.$watch("plateform",function(e){var t=n.getHomePageDestinyUrl();if("undefined"!=typeof e&&null!==e){var r=e.nom.replace(" ","_");h.path(t+r).replace()}else h.path(t+"ALL").replace()})},A=function(){e.$watch("tags",function(e,t){(""!==e||""!==t)&&(h.search("tags",e),g())});var t=h.search();t.tags&&(e.tags=t.tags)},R=function(){b(),C(),E(),A()};e.$on("updateListUsers",function(t,n){n[0]&&(e.listUser=n[0])});var k=function(){e.currentUser=s.get(),t.getFormInfo().then(function(t){e.allTags=t.tags,e.autoCompleteTags=i.autoCompleteUserTags([],e.allTags),e.aPlateforms=t.plateforms,T(),R()})};k()}]),angular.module("myApp.controllers").controller("RegisterCtrl",["$scope","user","$location","lang","redirection","rdv",function(e,t,n,r,i,a){e.lang=r.getCurrent(),e.promiseRegisterInProgress=!1,a.getFormInfo().then(function(t){e.aPlateforms=t.plateforms}),e.updateRegExpPassword=function(){e.regExpPassword="/"+e.password+"/"},e.checkPassword=function(){return e.errorPassword=!1,e.password!==e.passwordverif?void(e.errorPassword=!0):void 0},e.$watch("gamerTag",function(t){console.log("gamertag",t),e.username=t}),e.submit=function(){e.registerForm.$valid!==!1&&e.errorPassword!==!0&&(e.username_already_taken=!1,e.email_already_taken=!1,e.gamertag_not_found=!1,e.promiseRegisterInProgress=!0,t.register(e.email,e.password,e.username,e.plateform.id,e.gamerTag).success(function(){e.promiseRegisterInProgress=!1,i.goWelcomeHome()}).error(function(t){if(e.promiseRegisterInProgress=!1,e.aError=t,t.aError)for(var n in t.aError)"username_already_taken"===t.aError[n]&&(e.username_already_taken=!0),"email_already_taken"===t.aError[n]&&(e.email_already_taken=!0),"gamertag_not_found"===t.aError[n]&&(e.gamertag_not_found=!0)}))}}]),angular.module("myApp.controllers").controller("TopicCtrl",["$scope","$routeParams","forum","redirection","$anchorScroll","$location","$timeout","user","$window",function(e,t,n,r,i,a,o,s,l){"use strict";e.registerUrl=r.getRegisterPageUrl(),e.homeUrl=r.getHomePageUrl(),e.texte="";var u=t.id,c=t.page;e.currentPage=parseInt(c);var f=20;e.currentUser=s.get(),e.canPost=!1,e.modeEdit=1,e.modeModify=2,e.aPage=[],e.mode=e.modeEdit,e.forumUrl=r.getForumUrl();var d=function(t){e.topic=t,e.nbPage=Math.ceil(t.topic.nbMessages/f),e.aPage=[];for(var n=0;n<e.nbPage;n++)e.aPage.push(r.getTopicUrl(e.topic.topic,n+1));e.canPost=!0};e.goToLastPage=function(){e.aPage.length>e.currentPage&&a.path(e.aPage[e.aPage.length-1])},n.getTopic(u,c,f).success(function(e){d(e)}),e.submit=function(){if(e.myForm.$valid!==!1){switch(e.mode){case e.modeEdit:n.reply(u,e.texte,c,f).success(function(t){d(t),e.goToLastPage(),e.goToBottom()});break;case e.modeModify:n.updateMessage(e.messageId,e.texte,c,f).success(function(t){d(t),e.goToBottom()})}e.texte="",e.mode=e.modeEdit}},e.modify=function(t){e.mode=e.modeModify,e.messageId=t.id,e.texte=t.texte.replace(/<br\/>/gi,"\n")},e["delete"]=function(t){n.deleteMessage(t.id,c,f).success(function(t){d(t),e.goToBottom()})},e.goToBottom=function(){o(function(){a.hash("bottom"),i()},0)},e.refresh=function(){l.location.reload()}}]),angular.module("myApp.controllers").controller("VideothequeCtrl",["$scope","$routeParams","forum","redirection","$anchorScroll","$location","$timeout","user","partenaire",function(e,t,n,r,i,a,o,s,l){"use strict";e.currentUser=s.get(),e.texte="",l.getAll().success(function(t){for(var n in t)t[n].href=r.getPartenaireByIdUrl(t[n]);e.partenaires=t})}]),angular.module("myApp.directives").directive("lfgChatTwitch",["$sce",function(e){"use strict";return{scope:{url:"="},link:function(t){t.isTwitch=t.url.match(/twitch/),t.urlChat=t.url.replace("/embed","/chat?popout="),t.trustSrc=function(t){return e.trustAsResourceUrl(t)}},restrict:"E",templateUrl:"/html/directives/lfg-chat-twitch.html"}}]),angular.module("myApp.directives").directive("lfgFacebook",["$window","$document",function(){"use strict";return{link:function(){window.fbAsyncInit=function(){FB.init({appId:"1482107158698739",xfbml:!0,version:"v2.0"})},function(e,t,n){var r,i=e.getElementsByTagName(t)[0];e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src="//connect.facebook.net/fr_FR/sdk.js",i.parentNode.insertBefore(r,i))}(document,"script","facebook-jssdk")},restrict:"E",templateUrl:"/html/directives/lfg-facebook.html"}}]),angular.module("myApp.directives").directive("lfgFbShare",["$location",function(e){"use strict";return{scope:{url:"@"},link:function(t){t.urlFormat=t.url?"http://"+e.host()+t.url:e.absUrl(),t.shareFB=function(){FB.ui({method:"share",href:t.urlFormat},function(e){console.log(e)})}},restrict:"E",templateUrl:"/html/directives/lfg-fb-share.html"}}]),angular.module("myApp.directives").directive("lfgFooter",["lang","$location",function(e,t){return{link:function(n){e.initLang(),n.lang=e.getCurrent(),n.updateLang=function(t){e.change(t),n.lang=t};var r=function(e){return t.absUrl().replace(n.lang,e)};n.switchLangUrlFr=r("fr"),n.switchLangUrlEn=r("en")},restrict:"E",templateUrl:"/html/directives/lfg-footer.html"}}]),angular.module("myApp.directives").directive("lfgFriendlist",["$window","user","$filter","redirection",function(e,t,n,r){"use strict";return{scope:{},link:function(e){e.currentUser=t.get(),e.username="",e.allUsers=[],e.aUsers=[],e.ready=!1,e.listUsersUrl=r.getListUsersUrl(),e.listUsersUrl=r.getListUsersUrl(),e.firstDisplay=0,e.scrollUp=function(){e.firstDisplay--},e.scrollDown=function(){e.firstDisplay++};var i=function(){for(var t in e.allUsers)e.allUsers[t].connected=!1,e.allUsers[t].me=!1,e.allUsers[t].canAddToFriendList=!0,e.allUsers[t].canAddToBlackList=!0,null!==e.currentUser&&e.allUsers[t].username===e.currentUser.username&&(e.allUsers[t].me=!0);e.aUsers=n("filterUser")(e.allUsers,e.username,e.onlyFriends)},a=function(){var n=t.getFriends();return n===!1?void(e.ready=!0):void n.success(function(t){e.allUsers=t,i(),e.ready=!0})};e.$on("updateListUsers",function(){i()}),e.$watch("username",function(){e.firstDisplay=0,i()});var o=function(){a()};e.invite=function(t){e.$broadcast("invite",[t])},e.scrollUp=function(t){null==t&&(t=1);for(var n=0;t>n;n++)e.firstDisplay>0&&e.firstDisplay--},e.scrollDown=function(t){null==t&&(t=1);for(var n=0;t>n;n++)e.firstDisplay<e.aUsers.length-1&&e.firstDisplay++};var s=function(){e.percent=e.firstDisplay/e.aUsers.length*100};e.$on("scroll",function(t,n){n[0]>0?e.scrollDown():e.scrollUp(),s()}),o()},restrict:"E",templateUrl:"/html/directives/lfg-friendlist.html"}}]),angular.module("myApp.directives").directive("lfgHeader",["user","rdv","tag","lang","redirection","$interval","$filter","$document","$window","$location",function(e,t,n,r,i,a,o,s,l,u){"use strict";return{scope:{lfgHeader:"="},link:function(n){r.initLang(),n.lang=r.getCurrent(),n.logout=function(){e.logout(),n.userInfo=null,l.location.reload()},n.updateInProgress=!1,n.refreshBungie=function(){n.updateInProgress=!0,e.refreshBungie().then(function(){n.updateInProgress=!1})},n.homeUrl=i.getHomePageUrl(),n.rdvUrl=i.getHomePageDestinyUrl(),n.partyCreateUrl=i.getCreatePartyPageUrl(),n.profilGameUrl=i.getProfilGamePageUrl(),n.loginPageUrl=i.getLoginPageUrl(),n.registerPageUrl=i.getRegisterPageUrl(),n.partyWaitingUrlRoot=i.getPartyWaitingUrlRoot(),n.gamesUrl=i.getGamesPageUrl(),n.notifUrl=i.getNotifPageUrl(),n.matchmakingUrl=i.getMatchmakingPageUrl(),n.listUsersUrl=i.getListUsersUrl(),n.forumUrl=i.getForumUrl(),n.videoUrl=i.getVideoUrl(),n.userInfo=e.get(),n.currentUrl=u.path();var o=function(){var e=t.getNotifications();e!==!1&&e.success(function(e){if(null!==n.userInfo){n.notifications=[],n.allMyNotifications=e;for(var t in n.allMyNotifications)n.allMyNotifications[t]["new"]===!0&&n.notifications.push(n.allMyNotifications[t]);s[0].title=n.notifications.length>0?"("+n.notifications.length+") Esbattle.com":"Esbattle.com"}})},c=12e3,f=function(){a.cancel(n.intervaNotificationId),angular.isDefined(n.intervaNotificationId)||(n.intervaNotificationId=a(function(){o()},c))};o(),f()},restrict:"E",templateUrl:"/html/directives/lfg-header.html"}}]),angular.module("myApp.directives").directive("lfgInit",["user",function(e){"use strict";return{scope:{init:"="},link:function(){e.get()},restrict:"E"}}]),angular.module("myApp.directives").directive("lfgInterval",["$interval",function(e){"use strict";return{replace:!0,scope:{lfgInterval:"="},link:function(t,n){n.on("$destroy",function(){e.cancel(t.lfgInterval),t.lfgInterval=void 0})},restrict:"A"}}]),angular.module("myApp.directives").directive("lfgInvitePopup",["rdv","$filter","user","gettextCatalog","$rootScope",function(e,t,n,r,i){"use strict";return{scope:{},link:function(a){a.currentUser=n.get(),a.aRdv=[];var o=function(){e.getAll().success(function(e){a.aRdv=e,s()}).error(function(){}).then(function(){a.displayInvite=!0})};a.rdvInvite=null;var s=function(){if(null!==a.currentUser){if("undefined"==typeof a.plateform||null===a.plateform)var e=null;else var e=a.plateform.id;a.aMyRdv=t("filterRdvWithMe")(a.aRdv,a.currentUser.id,e,a.tags,a.slotMinAvailable,a.slotMaxAvailable);for(var n in a.aMyRdv)a.aMyRdv[n].description=t("date")(1e3*a.aMyRdv[n].start,"yyyy-MM-dd");a.rdvInvite=a.aMyRdv[0]}};a.displayInvite=!1,a.$on("invite",function(e,t){"undefined"!=typeof t&&(a.userInvite=t[0],o())}),a.submitInvite=function(){if(a.inviteForm.$valid!==!1){var t=e.invite(a.userInvite,a.rdvInvite);t!==!1&&t.then(function(){});var n=r.getString("you have send a invite to {{name}}",{name:a.userInvite.username});i.$broadcast("popup",[n]),a.hide()}},a.hide=function(){a.displayInvite=!1}},restrict:"E",templateUrl:"/html/directives/lfg-invite-popup.html"}}]),angular.module("myApp.directives").directive("lfgLoader",[function(){return{link:function(){},restrict:"E",replace:!1,templateUrl:"/html/directives/lfg-loader.html"}}]),angular.module("myApp.directives").directive("lfgMasonry",[function(){"use strict";return{scope:{lfgMasonry:"="},link:function(e,t){e.lfgMasonry.appended(t),e.lfgMasonry.reloadItems(),imagesLoaded(t,function(){e.lfgMasonry.layout()})},restrict:"A",priority:99}}]),angular.module("myApp.directives").directive("lfgMatchmaking",["matchmaking","user","redirection","$filter",function(e){"use strict";return{scope:{lfgProfile:"="},link:function(t){t.matchmakingTemplate=null,e.getConf().success(function(e){var n={};for(var r in e){n[e[r].description]||(n[e[r].description]=[]),e[r].concatTags="";
for(var i in e[r].tags)e[r].concatTags+=e[r].tags[i].nom+" ";n[e[r].description].push(e[r])}t.groupOfTemplate=n}),t.selectGroupOfTemplate=function(e){t.matchmakingTemplate=e,t.templateSelectedModel=e[0]},t.$watch("templateSelectedModel",function(e){t.$emit("templateSelectedModel",[e])})},restrict:"E",templateUrl:"/html/directives/lfg-matchmaking.html"}}]),angular.module("myApp.directives").directive("lfgMeta",["meta","$rootScope",function(e,t){"use strict";return{scope:{name:"@"},link:function(e,n){n[0].name=e.name;var r="";switch(e.name){case"description":r=t.description,t.$watch("description",function(e){n[0].content=e});break;default:r=t.description}n[0].content=r},restrict:"E",replace:!0,templateUrl:"/html/directives/lfg-meta.html"}}]),angular.module("myApp.directives").directive("lfgPagination",[function(){return{scope:{aPage:"=",currentPage:"=",maxPage:"="},link:function(e){e.maxPageDisplayedWithoutFirstAndLast=e.maxPage-2},restrict:"E",templateUrl:"/html/directives/lfg-pagination.html"}}]),angular.module("myApp.directives").directive("lfgPopup",[function(){"use strict";return{scope:{},link:function(e){e.$on("popup",function(t,n){e.displayPopup=!0,e.message=n[0]}),e.hide=function(){e.displayPopup=!1}},restrict:"E",templateUrl:"/html/directives/lfg-popup.html"}}]),angular.module("myApp.directives").directive("lfgProfileBungie",[function(){"use strict";return{scope:{lfgProfileBungie:"=",userGame:"=",withPlateform:"@",user:"=",listUser:"="},link:function(e){e.isConnected=!1,"undefined"!=typeof e.user&&null!==e.user&&null!==e.listUser&&"undefined"!=typeof e.listUser&&e.listUser[e.user.username]&&(e.isConnected=!0)},restrict:"E",templateUrl:"/html/directives/lfg-profile-bungie.html"}}]),angular.module("myApp.directives").directive("lfgProfile",["user","storage",function(e,t){"use strict";return{scope:{lfgProfile:"=",selectedPerso:"=",aUserGame:"=",withPlateform:"@"},link:function(n){n.currentUser=e.get(),n.selectPerso=function(e){n.selectedPerso=e,t.setPersistant("cookie_selected_profil_id",e.id)};var r=function(){null!==n.currentUser&&(n.aUserGame=n.currentUser.userGame);var e=t.getPersistant("cookie_selected_profil_id");if("undefined"!=typeof e)for(var r in n.aUserGame)n.aUserGame[r].id==e&&(n.selectedPerso=n.aUserGame[r]);null===n.selectedPerso&&null!==n.currentUser&&n.aUserGame.length>0&&(n.selectedPerso=n.aUserGame[0])};r()},restrict:"E",templateUrl:"/html/directives/lfg-profile.html"}}]),angular.module("myApp.directives").directive("lfgScroll",["tools","$timeout",function(){"use strict";return{link:function(e,t){var n=function(){e.$emit("scroll",[-1]),e.$apply()},r=function(){e.$emit("scroll",[1]),e.$apply()};t.on("mousewheel",function(e){e.deltaY>0?n():r(),e.preventDefault()}),t.on("touchmove",function(e){e.preventDefault()});var i=0;t.on("touchstart",function(e){i=e.changedTouches[0].clientY}),t.on("touchend",function(t){var a=t.changedTouches[0].clientY-i;0>a?(r(),e.$apply()):(n(),e.$apply())})},restrict:"A",replace:!1}}]),angular.module("myApp.directives").directive("lfgSince",["tools","$timeout",function(e,t){"use strict";return{scope:{time:"@"},link:function(n){var r=function(){n.message=e.getSinceTimeMessage(n.time),t(function(){r()},6e4)};r()},restrict:"E",templateUrl:"/html/directives/lfg-since.html"}}]),angular.module("myApp.directives").directive("lfgYoutube",["$sce",function(e){"use strict";return{scope:{url:"=",height:"=",width:"="},link:function(t,n){function r(){}function i(e){e.data!=YT.PlayerState.PLAYING||u||(u=!0)}t.isYoutube=t.url.match(/youtube/);var a=t.url.match(/(\?|&)v=[^&]*/),o=390;t.height>0&&(o=t.height);var s=640;t.width>0&&(s=t.width);var l;t.onYouTubeIframeAPIReady=function(){l=new YT.Player(n[0],{height:o,width:s,videoId:a[0].substring(3),html5:1,events:{onReady:r,onStateChange:i}})};var u=!1;t.iframe=!1,t.trustSrc=function(t){return e.trustAsResourceUrl(t)},t.isYoutube&&a?t.onYouTubeIframeAPIReady():t.iframe=!0},restrict:"E",templateUrl:"/html/directives/lfg-youtube.html"}}]),angular.module("superCache",[]).factory("superCache",["$cacheFactory","$q","$timeout",function(e,t,n){"use strict";return this.customCache={myCache:e("super-cache",{capacity:200}),get:function(e){return this.myCache.get(e)},put:function(e,t){this.myCache.put(e,t)},removeAll:function(){this.myCache.removeAll()},promise:function(e){var r=this.get(e);if(r&&"object"==typeof r){var i=t.defer(),a=i.promise;return n(function(){i.resolve()},0),a.then(function(){return r})}return!1}},this.customCache}]),angular.module("myApp").factory("transformRequestAsFormPost",function(){function e(e,n){var r=n();return r["Content-type"]="application/x-www-form-urlencoded; charset=utf-8",t(e)}function t(e){if(!angular.isObject(e))return null==e?"":e.toString();var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t.push(encodeURIComponent(n)+"="+encodeURIComponent(null==r?"":r))}var i=t.join("&").replace(/%20/g,"+");return i}return e}),angular.module("myApp.services").service("activity",["$rootScope","$window",function(e,t){"use strict";this.setEvent=function(){t.onfocus=function(){e.activityOnWindow=!0},t.onblur=function(){e.activityOnWindow=!1}},this.isActiveWindow=function(){return e.activityOnWindow}}]),angular.module("myApp.services").service("annonce",["$http","storage","api","$rootScope","$q","$timeout","$window","user",function(e,t,n,r,i,a,o,s){"use strict";this.create=function(e,t,r){var i=s.get();if(null!==i){o.encodeURIComponent(i.username),o.encodeURIComponent(i.token)}return e=o.encodeURIComponent(e),t=o.encodeURIComponent(t),r=o.encodeURIComponent(r),n.call("annonce/create/"+e+"/"+t+"/"+r)},this.get=function(){return n.call("annonce")},this.getByPlateform=function(e){return n.call("annonce/byPlateform/"+e)}}]),angular.module("myApp.services").service("api",["$http","storage","redirection","$location",function(e,t,n,r){"use strict";this.url=null,this.getApiUrl=function(){if(null!==this.url)return this.url;var e=r.host();return this.url="http://apidev.esbattle.com/app_dev.php/","lfg.esbattle.com"===e&&(this.url="http://apiv2.esbattle.com/"),this.url},this.call=function(r){return e.get(this.getApiUrl()+r).error(function(e,r){switch(r){case 401:t.erasePersistant("user"),n.goToLogin();break;case 403:break;case 308:n.goHome();break;case 404:n.notFound(e.msg)}})},this.post=function(r,i,a){var o=this.getApiUrl()+r,s="",l="";return null!==a&&"undefined"!=typeof a&&(s=a.id,l=a.token),e({method:"POST",url:o,data:i,headers:{User:s,Token:l}}).error(function(e,r){switch(r){case 401:t.erasePersistant("user"),n.goToLogin();break;case 403:break;case 308:n.goHome();break;case 404:n.notFound(e.msg)}})}}]),angular.module("myApp.services").service("avis",["api","$window","user",function(e,t,n){"use strict";this.get=function(t){return e.call("avis/"+t)},this.post=function(t,r){var i=n.get(),a={avis:r};return e.post("avis/"+t,a,i)}}]),angular.module("myApp.services").service("bungie",["$http","storage","api","$rootScope","$q","$timeout","$window","user",function(e,t,n,r,i,a,o,s){"use strict";this.characters=null,this.getCharacters=function(e,t,r){var i=null,a=null,l=s.get();if(null!==l)var i=o.encodeURIComponent(l.username),a=o.encodeURIComponent(l.token);return e=o.encodeURIComponent(e),t=o.encodeURIComponent(t),r=o.encodeURIComponent(r),n.call("bungie/characters/"+e+"/"+t+"/"+r+"/"+i+"/"+a)}}]),angular.module("myApp.services").service("filter",[function(){"use strict";this.isExpired=function(e,t){return e.end<t},this.isLive=function(e,t){return e.end>t&&e.start<t+300},this.hasTagSelected=function(e,t){var n="";for(var r in e.tags)n=n+" "+e.tags[r].nom.toLowerCase();var i=!0;for(var a in t)if(n.indexOf(t[a].toLowerCase())<0){i=!1;break}return i},this.hasPlateformSelected=function(e,t){var n=!0;return""!==t&&"undefined"!=typeof t&&null!==t&&(null===e.plateform||e.plateform.id!==t)&&(n=!1),n},this.getCurrentTimestampInSeconds=function(){return(new Date).getTime()/1e3},this.tagsStringToArray=function(e){var t=[];return"string"==typeof e&&""!==e&&(t=e.split(" ")),t},this.hasPlaceAvailable=function(e,t,n){return e.users?e.nbParticipant-e.users.length>=t&&e.nbParticipant-e.users.length<=n:!0},this.hasType=function(e,t){return"type_all"===t?!0:"type_annonce"===t&&e.type===t?!0:"type_party"===t&&"type_annonce"!==e.type?!0:!1},this.byPlateformsAndTags=function(e,t,n,r,i,a,o,s,l){var u=[],c=this.tagsStringToArray(n),f=this.getCurrentTimestampInSeconds();for(var d in e)(this.hasPlateformSelected(e[d],t)!==!1||null===t)&&!(a===!0&&this.hasPlaceAvailable(e[d],o,s)===!1||r===!0&&this.isLive(e[d],f)===!1||i===!0&&(this.isExpired(e[d],f)===!0||this.isLive(e[d],f)===!0)||0!==c.length&&this.hasTagSelected(e[d],c)===!1||this.hasType(e[d],l)===!1||!u.push(e[d]));return u},this.hasMeInGame=function(e,t){for(var n in e.users)if(e.users[n].user.id===t)return!0;for(var r in e.usersInQueue)if(e.usersInQueue[r].user.id===t)return!0;return!1},this.byPlateformsAndTagsWithMe=function(e,t,n,r){var i=[],a=this.tagsStringToArray(r),o=this.getCurrentTimestampInSeconds();for(var s in e)this.hasMeInGame(e[s],t)!==!1&&(null===n||this.hasPlateformSelected(e[s],n)!==!1)&&this.isExpired(e[s],o)!==!0&&(0===a.length||this.hasTagSelected(e[s],a)!==!1)&&i.push(e[s]);return i}}]),angular.module("myApp.services").service("forum",["api","$window","user",function(e,t,n){"use strict";this.getAllTopic=function(){return e.call("forum")},this.getNews=function(t,n){return e.call("news/"+t+"/"+n)},this.getTopic=function(t,n,r){return e.call("forum/topic/get/"+t+"/"+n+"/"+r)},this.reply=function(r,i,a,o){var s=n.get();if(null===s)return!1;var l=t.encodeURIComponent(s.username),u=t.encodeURIComponent(s.token);i=i.replace(/\n/g,"<br/>");var c={texte:i};return e.post("forum/topic/message/"+r+"/"+a+"/"+o+"/"+l+"/"+u,c)},this.updateMessage=function(r,i,a,o){var s=n.get();if(null===s)return!1;var l=t.encodeURIComponent(s.username),u=t.encodeURIComponent(s.token);i=i.replace(/\n/g,"<br/>");var c={texte:i};return e.post("forum/topic/message/update/"+r+"/"+a+"/"+o+"/"+l+"/"+u,c)},this.deleteMessage=function(r,i,a){var o=n.get();if(null===o)return!1;var s=t.encodeURIComponent(o.username),l=t.encodeURIComponent(o.token);return e.call("forum/topic/message/delete/"+r+"/"+i+"/"+a+"/"+s+"/"+l)},this.createTopic=function(r,i){var a=n.get();if(null===a)return!1;var o=t.encodeURIComponent(a.username),s=t.encodeURIComponent(a.token);i=i.replace(/\n/g,"<br/>");var l={title:r,texte:i};return e.post("forum/topic/create/"+o+"/"+s,l)}}]),angular.module("myApp.services").service("lang",["gettextCatalog","$routeParams","$rootScope","$location",function(e,t,n){"use strict";this.initLang=function(){e.debug=!0,this.updateLang(t.lang?t.lang:"fr")},this.getCurrent=function(){return this.initLang(),n.lang},this.updateLang=function(t){n.lang=t,e.setCurrentLanguage(t)}}]),angular.module("myApp.services").service("matchmaking",["$http","user","api","superCache","$window",function(e,t,n,r,i){"use strict";this.getConf=function(){return n.call("matchmaking/")},this.join=function(e,r){var a=t.get(),o=i.encodeURIComponent(a.username);return n.call("matchmaking/join/"+e+"/"+r+"/"+o+"/"+a.token)}}]),angular.module("myApp.services").service("meta",["$rootScope",function(e){"use strict";e.description="EsBattle.com est votre site de recherche de joueurs pour Destiny. Vous cherchez des joueurs pour le raid ? Sur www.esbattle.com vous pouvez créer une partie ou en rejoindre une rapidement ! Créez un profil de jeu et demander à rejoindre une partie !",this.getDescription=function(){return e.description},this.setDescription=function(t){e.description=t}}]),angular.module("myApp.services").service("partenaire",["api",function(e){"use strict";this.getAll=function(){return e.call("partenaire")},this.getById=function(t){return e.call("partenaire/"+t)}}]),angular.module("myApp.services").service("planification",["api",function(e){"use strict";this.getCurrent=function(){return e.call("planification")},this.getNext=function(){return e.call("planification/next")}}]),angular.module("myApp.services").service("rdv",["$http","user","api","superCache","$window",function(e,t,n,r,i){"use strict";this.getAll=function(){return n.call("rdv/")},this.getByPlateform=function(e){return n.call("rdv/byPlateform/"+e)},this.getFormInfo=function(){var e=r.promise("getFormInfo");return e!==!1?e:n.call("rdv/form_info").success(function(e){r.put("getFormInfo",e)}).then(function(e){return e.data})},this.add=function(e,r,a,o,s,l,u,c,f){var d=t.get();e=i.encodeURIComponent(e),r=i.encodeURIComponent(r),a=i.encodeURIComponent(a),o=i.encodeURIComponent(o),s=i.encodeURIComponent(s),l=i.encodeURIComponent(l),u=i.encodeURIComponent(u),c=i.encodeURIComponent(c),f=i.encodeURIComponent(f);var p=i.encodeURIComponent(d.username);return n.call("rdv/add/"+e+"/"+r+"/"+a+"/"+o+"/"+s+"/"+l+"/"+u+"/"+c+"/"+f+"/"+p+"/"+d.token)},this.get=function(e){return n.call("rdv/get/"+e)},this.join=function(e,t,r,a){return r=i.encodeURIComponent(r),n.call("rdv/join/"+e+"/"+t+"/"+r+"/"+a)},this.acceptUser=function(e,t,r,a){return r=i.encodeURIComponent(r),n.call("rdv/accept_user/"+e+"/"+t+"/"+r+"/"+a)},this.kickUser=function(e,t,r,a){return r=i.encodeURIComponent(r),n.call("rdv/kick_user/"+e+"/"+t+"/"+r+"/"+a)},this.leave=function(e,t,r,a){return r=i.encodeURIComponent(r),n.call("rdv/leave/"+e+"/"+t+"/"+r+"/"+a)},this.promote=function(e,t,r,a){return r=i.encodeURIComponent(r),n.call("rdv/promote/"+e+"/"+t+"/"+r+"/"+a)},this.getNotifications=function(){var e=t.get();return null===e?!1:n.call("notifications/"+e.id)},this.getAllNotifications=function(){var e=t.get();return null===e?!1:n.call("notifications/all/"+e.id)},this.markNotificationRead=function(e){var r=t.get();return null===r?!1:n.call("notifications/read/"+r.id+"/"+e)},this.isLive=function(e){var t=new Date;return t=t.getTime()/1e3,"undefined"!=typeof e&&e.start<t&&e.end>t},this.isEnded=function(e){var t=new Date;return t=t.getTime()/1e3,"undefined"!=typeof e&&e.end<t},this.invite=function(e,r){var a=t.get();if(null===a)return!1;var o=i.encodeURIComponent(a.username),s=i.encodeURIComponent(a.token);return n.call("rdv/invite/"+e.id+"/"+r.id+"/"+o+"/"+s)}}]),angular.module("myApp.services").service("redirection",["$location","$rootScope","$window",function(e,t,n){"use strict";var r=function(){return void 0===t.lang?"fr":t.lang};this.getLoginPageUrl=function(){return"/"+r()+"/login"},this.goToLogin=function(){e.path(this.getLoginPageUrl())},this.getRegisterPageUrl=function(){return"/"+r()+"/register"},this.getNotifPageUrl=function(){return"/"+r()+"/notification"},this.getMatchmakingPageUrl=function(){return"/"+r()+"/matchmaking"},this.getGamesPageUrl=function(){return"/"+r()+"/games"},this.goToGamesPage=function(){e.path(this.getGamesPageUrl())},this.goToRegister=function(){e.path(this.getRegisterPageUrl())},this.getCreatePartyPageUrl=function(){return"/"+r()+"/party/create"},this.goCreateParty=function(){e.path(this.getCreatePartyPageUrl())},this.goBack=function(){n.history.back()},this.getPartyWaitingUrlRoot=function(){return"/"+r()+"/party/waiting/"},this.getPartyWaitingByIdUrl=function(e){return this.getPartyWaitingUrlRoot()+e},this.getPartenaireByIdUrlRoot=function(){return"/"+r()+"/video/"},this.getPartenaireByIdUrl=function(e){var t=e.nom.replace(/[^A-Za-z0-9 ]/g,"");return t=t.replace(/\s{2,}/g," "),t=t.replace(/\s/g,"-"),this.getPartenaireByIdUrlRoot()+e.id+"/"+t},this.goToRdvId=function(t){e.path(this.getPartyWaitingByIdUrl(t))},this.goToMatchmakingId=function(t){e.path("/"+r()+"/matchmaking/waiting/"+t)},this.getHomePageUrl=function(){return"/"+r()+"/"},this.getHomePageDestinyUrl=function(){return"/"+r()+"/destiny/"},this.goHome=function(){e.path(this.getHomePageUrl())},this.getNotFoundPageUrl=function(e){return"/"+r()+"/404/"+e},this.goWelcomeHome=function(){e.path("/"+r()+"/welcome")},this.notFound=function(t){e.path(this.getNotFoundPageUrl(t))},this.getProfilGamePageUrl=function(e,t){return"/"+r()+"/profile/"+e+"/"+t},this.getProfilGamePageByGameAndPlateformUrl=function(e,t){return"/"+r()+"/profile/"+e+"/"+t},this.goToCreateProfilForGameAndPlateform=function(){this.goToGamesPage()},this.getListUsersUrl=function(){return"/"+r()+"/users/connected"},this.getAnnonceCreateUrl=function(){return"/"+r()+"/annonce/create/"},this.getForumUrl=function(){return"/"+r()+"/forum/"},this.getTopicUrl=function(e,t){t||(t=1);var n=e.titre.replace(/[^A-Za-z0-9 ]/g,"");return n=n.replace(/\s{2,}/g," "),n=n.replace(/\s/g,"-"),"/"+r()+"/forum/topic/"+e.id+"/"+t+"/"+n},this.getVideoUrl=function(){return"/"+r()+"/destiny/video/all"}}]),angular.module("myApp.services").service("socket",["$rootScope","$location",function(e,t){"use strict";this.currentSocket=null,this.listUsers={},this.url=null,this.getSocketUrl=function(){if(null!==this.url)return this.url;t.host();return this.url="http://www.esbattle.com:3000",this.url},this.on=function(e,t){var n=this.getCurrentSocket();n.on(e,function(e){console.log("event global",e),t()})},this.initListener=function(t){var n=this;t.on("new message",function(e){console.log("new message",e)}),t.on("user joined",function(t){console.log("user join",t),n.listUsers=t.listUsers,e.$broadcast("updateListUsers",[t.listUsers])}),t.on("user left",function(t){console.log("user left",t),n.listUsers=t.listUsers,e.$broadcast("updateListUsers",[t.listUsers])}),t.on("users list",function(t){console.log("users list",t),n.listUsers=t.listUsers,e.$broadcast("updateListUsers",[t.listUsers])}),t.on("typing",function(e){console.log("typing",e)}),t.on("stop typing",function(e){console.log("stop typing",e)})},this.getCurrentSocket=function(){if(null===this.currentSocket&&"undefined"!=typeof io){var e=this.getSocketUrl();this.currentSocket=io.connect(e),this.initListener(this.currentSocket)}return this.currentSocket},this.addUser=function(e){var t=this.getCurrentSocket();null!==t&&t.emit("add user",e)},this.disconnect=function(){var e=this.getCurrentSocket();null!==e&&e.close()},this.getUserList=function(){var e=this.getCurrentSocket();null!==e&&(console.log("emit : ask users list"),e.emit("ask users list"))}}]),angular.module("myApp.services").service("storage",["$rootScope","$cookies",function(e,t){this.createCookie=function(e,t,n){var r="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()}document.cookie=e+"="+t+r+"; path=/"},this.eraseCookie=function(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},this.erasePersistant=function(e){null!==localStorage?localStorage[e]=null:document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},this.getPersistant=function(e){if(null!==localStorage)return localStorage[e];var n=t[e];return n},this.setPersistant=function(e,t){return null!==localStorage?void(localStorage[e]=t):void this.createCookie(e,t,360)}}]),angular.module("myApp.services").service("tag",["rdv",function(){"use strict";this.autoCompleteUserTags=function(e,t){for(var n="",r=[],i=0;i<e.length-1;i++)n=n+e[i]+" ",r.push(e[i]);var a=[];for(var o in t)r.indexOf(t[o].nom)>-1||a.push(n+t[o].nom);return a}}]),angular.module("myApp.services").service("tools",["gettextCatalog","$filter",function(e,t){"use strict";this.getSinceTimeMessage=function(n){var r=1e3*n,i=new Date(r),a=new Date,o=a.getTime(),s=o-r,l=new Date(o+864e5);if(0>s)return l.getDay()==i.getDay()?e.getString("tomorrow at {{time}}",{time:t("date")(r,"HH:mm")}):a.getDay()==i.getDay()?e.getString("today at {{time}}",{time:t("date")(r,"HH:mm")}):t("date")(r,"d/MM/yy HH:mm");var u=6e4,c=Math.round(s/u);if(60>c)return e.getString("{{minutes}} minutes ago",{minutes:c});var f=36e5,d=Math.round(s/f);if(24>d)return e.getString("{{hours}} hours ago",{hours:d});var p=864e5,h=Math.round(s/p);return e.getString("{{days}} days ago",{days:h})}}]),angular.module("myApp.services").service("user",["$http","storage","api","$rootScope","$q","$timeout","$window",function(e,t,n,r,i,a,o){"use strict";this.data="",this.fakePromise=function(){var e=i.defer(),t=e.promise;return a(function(){e.resolve()},0),t};var s=function(e){e.ttl=new Date((new Date).getTime()+72e5).getTime(),t.setPersistant("user",JSON.stringify(e))};this.log=function(e,t){return e=o.encodeURIComponent(e),n.call("login/"+e+"/"+t).success(function(e){s(e)})},this.logByToken=function(e,t){return e=o.encodeURIComponent(e),n.call("login/token/"+e+"/"+t).success(function(e){s(e)})},this.refreshBungie=function(){var e=this.get();if(null===e)return!1;var t={username:e.username,token:e.token};return n.post("login/refresh",t,e).success(function(e){s(e)})},this.logByForgetToken=function(e,t){return e=o.encodeURIComponent(e),n.call("login/forgetToken/"+e+"/"+t).success(function(e){s(e)})},this.get=function(){var e=t.getPersistant("user");if("undefined"!=typeof e){var n=JSON.parse(e);return null!==n&&n.ttl<(new Date).getTime()&&(this.logout(),this.logByToken(n.username,n.token).then(function(e){n=e})),n}return null},this.register=function(e,t,r,i,a){return e=o.encodeURIComponent(e),t=o.encodeURIComponent(t),r=o.encodeURIComponent(r),i=o.encodeURIComponent(i),a=o.encodeURIComponent(a),n.call("register/"+e+"/"+t+"/"+r+"/"+i+"/"+a).success(function(e){s(e)})},this.logout=function(){r.notificationsAlreadyRead=[],r.userGameSelected=null,t.erasePersistant("user")},this.createUserGame=function(e,t,r,i,a,l,u,c){e=o.encodeURIComponent(e),t=o.encodeURIComponent(t),r=o.encodeURIComponent(r),i=o.encodeURIComponent(i),a=o.encodeURIComponent(a),l=o.encodeURIComponent(l),u=o.encodeURIComponent(u),c=o.encodeURIComponent(c);var f=this.get(),d=o.encodeURIComponent(f.username);return("undefined"==typeof a||""===a)&&(a="null"),("undefined"==typeof l||""===l)&&(l="null"),("undefined"==typeof u||""===u)&&(u="null"),("undefined"==typeof c||""===c)&&(c="null"),n.call("game_data/create/"+e+"/"+t+"/"+r+"/"+i+"/"+a+"/"+l+"/"+u+"/"+c+"/"+d+"/"+f.token).success(function(e){s(e)})},this.updateUserGame=function(e,t,r,i,a,l,u,c,f){e=o.encodeURIComponent(e),t=o.encodeURIComponent(t),r=o.encodeURIComponent(r),i=o.encodeURIComponent(i),a=o.encodeURIComponent(a),l=o.encodeURIComponent(l),u=o.encodeURIComponent(u),c=o.encodeURIComponent(c),f=o.encodeURIComponent(f);var d=this.get(),p=o.encodeURIComponent(d.username);return("undefined"==typeof l||""===l)&&(l="null"),("undefined"==typeof u||""===u)&&(u="null"),("undefined"==typeof c||""===c)&&(c="null"),("undefined"==typeof f||""===f)&&(f="null"),n.call("game_data/update/"+e+"/"+t+"/"+r+"/"+i+"/"+a+"/"+l+"/"+u+"/"+c+"/"+f+"/"+p+"/"+d.token).success(function(e){s(e)})},this.forgetPassword=function(e){return n.call("forget_password/"+e)},this.updatePassword=function(e){var t=this.get(),r=o.encodeURIComponent(t.username);return n.call("update_password/"+e+"/"+r+"/"+t.token).success(function(e){s(e)})},this.updateOnline=function(e){var t=o.encodeURIComponent(e.username);return n.call("login/online/"+t+"/"+e.token)},this.refresh=function(){var e=this.get();if(null===e)return!1;var t=o.encodeURIComponent(e.username),r=o.encodeURIComponent(e.token);return n.call("login/online/"+t+"/"+r).success(function(e){s(e)})},this.getAll=function(){return n.call("users/")},this.getByPage=function(e,t){return n.call("users/page/"+e+"/"+t)},this.getByPlateform=function(e,t,r){return n.call("users/plateform/"+e+"/"+t+"/"+r)},this.getByUsername=function(e,t,r,i){return e=o.encodeURIComponent(e),n.call("users/search/"+e+"/"+t+"/"+r+"/"+i)},this.getFriends=function(){var e=this.get();if(null===e)return!1;var t=o.encodeURIComponent(e.username),r=o.encodeURIComponent(e.token);return n.call("user/friend/get/"+t+"/"+r)},this.addFriend=function(e){var t=this.get();if(null===t)return!1;var r=o.encodeURIComponent(t.username),i=o.encodeURIComponent(t.token);return e=o.encodeURIComponent(e),n.call("user/friend/add/"+e+"/"+r+"/"+i)},this.removeFriend=function(e){var t=this.get();if(null===t)return!1;var r=o.encodeURIComponent(t.username),i=o.encodeURIComponent(t.token);return e=o.encodeURIComponent(e),n.call("user/friend/remove/"+e+"/"+r+"/"+i)},this.getFriendsRequest=function(){var e=this.get();return null===e?!1:n.call("user/friend/request/"+e.id)},this.getFriendsPending=function(){var e=this.get();return null===e?!1:n.call("user/friend/request/pending/"+e.id)}}]),angular.module("myApp.filters").filter("filterAvatar",[function(){"use strict";return function(e){var t=[],n=0;for(var r in e){var i=parseInt(e[r].data2);n>i||(n=i,t=[],t.push(e[r]))}return t}}]),angular.module("myApp.filters").filter("filterCharacters",function(){"use strict";return function(e,t,n){if(isNaN(t))return e;if(0>=t)return"";if(e&&e.length>t){if(e=e.substring(0,t),n)for(;" "===e.charAt(e.length-1);)e=e.substr(0,e.length-1);else{var r=e.lastIndexOf(" ");-1!==r&&(e=e.substr(0,r))}return e+"..."}return e}}),angular.module("myApp.filters").filter("filterDateForum",["$filter",function(e){"use strict";return function(t){var n=1e3*t,r=new Date,i=r.getTime(),a=e("date")(n,"d/MM/yy");return a!==e("date")(i,"d/MM/yy")?a:e("date")(n,"H:mm")}}]),angular.module("myApp.filters").filter("filterDateNews",["gettextCatalog","$filter",function(e,t){"use strict";return function(n){var r=1e3*n,i=new Date(r),a=new Date,o=a.getTime(),s=new Date(o-864e5);return i.toLocaleDateString()===a.toLocaleDateString()?t("date")(r,"HH:mm"):i.toLocaleDateString()===s.toLocaleDateString()?e.getString("yesterday at {{time}}",{time:t("date")(r,"HH:mm")}):i.toLocaleDateString()}}]),angular.module("myApp.filters").filter("filterGameProfil",[function(){"use strict";return function(e,t,n){var r=[];for(var i in e)(e[i].game.id===t||null===t)&&(e[i].plateform.id===n||null===n)&&r.push(e[i]);return r}}]),angular.module("myApp.filters").filter("filterHtml",["$sce",function(e){"use strict";return function(t){return t&&(t=e.trustAsHtml(t)),t}}]),angular.module("myApp.filters").filter("filterLive",["tools","$filter","gettextCatalog",function(e,t,n){"use strict";return function(e){var r=1e3*e,i=new Date(r),a=new Date,o=a.getTime(),s=o-r,l=new Date(o+864e5);if(0>s)return l.getDay()==i.getDay()?n.getString("tomorrow at {{time}}",{time:t("date")(r,"HH:mm")}):a.getDay()==i.getDay()?n.getString("today at {{time}}",{time:t("date")(r,"HH:mm")}):t("date")(r,"d/MM/yy HH:mm");var u=6e4,c=Math.round(s/u);if(60>c)return n.getString("online");var f=36e5,d=Math.round(s/f);if(24>d)return n.getString("{{hours}} hours ago",{hours:d});var p=864e5,h=Math.round(s/p);return n.getString("{{days}} days ago",{days:h})}}]),angular.module("myApp.filters").filter("filterOnlineTime",["$filter","gettextCatalog",function(e,t){"use strict";return function(e){var n=1e3*e,r=(new Date(n),new Date),i=r.getTime(),a=i-n,o=(new Date(i+864e5),6e4),s=Math.round(a/o);if(60>s)return t.getString("{{minutes}} minutes",{minutes:s});var l=36e5,u=Math.round(a/l);if(24>u)return t.getString("{{hours}} hours",{hours:u});var c=864e5,f=Math.round(a/c);return t.getString("{{days}} days",{days:f})}}]),angular.module("myApp.filters").filter("filterRdv",[function(){"use strict";return function(e,t,n){var r=[],i=[];"string"==typeof n&&""!==n&&(i=n.split(" "));var a=new Date,o=a.getTime()/1e3;for(var s in e)if((""===t||null!==e[s].plateform&&e[s].plateform.id===t)&&!(e[s].end<o))if(0!==i.length){var l=[];for(var u in e[s].tags)l.push(e[s].tags[u].nom.toLowerCase());var c=!0;for(var f in i)l.indexOf(i[f].toLowerCase())<0&&(c=!1);c!==!1&&r.push(e[s])}else r.push(e[s]);return r}}]),angular.module("myApp.filters").filter("filterRdvLastPlace",["filter",function(e){"use strict";return function(t,n,r,i,a,o,s,l,u){return e.byPlateformsAndTags(t,n,r,i,a,o,s,l,u)}}]),angular.module("myApp.filters").filter("filterRdvWithMe",["filter",function(e){"use strict";return function(t,n,r,i,a,o){return e.byPlateformsAndTagsWithMe(t,n,r,i,a,o)}}]),angular.module("myApp.filters").filter("filterSince",["tools",function(e){"use strict";return function(t){return e.getSinceTimeMessage(t)}}]),angular.module("myApp.filters").filter("filterTags",[function(){"use strict";return function(e,t){var n=e.match(/#/);return!n&&t?e="#"+e:n&&!t&&(e=e.replace("#","")),e}}]),angular.module("myApp.filters").filter("filterUser",[function(){"use strict";return function(e,t,n,r){if(""==t&&null===r)return e;t=t.toLowerCase();var i=[];for(var a in e){var o=!0;if(null!==r&&"undefined"!=typeof r){o=!1;for(var s in e[a].userGame)if(e[a].userGame[s].plateform.id===r){o=!0;break}}if(o!==!1){var l=!1;for(var s in e[a].userGame)if(-1!=e[a].userGame[s].gameUsername.toLowerCase().indexOf(t)){l=!0;break}l!==!1&&i.push(e[a])}}return i}}]),angular.module("myApp.filters").filter("filterWords",function(){"use strict";return function(e,t){if(isNaN(t))return e;if(0>=t)return"";if(e){var n=e.split(/\s+/);n.length>t&&(e=n.slice(0,t).join(" ")+"...")}return e}});
//# sourceMappingURL=all.min.js.map